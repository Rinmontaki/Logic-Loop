/*! For license information please see main.1fa96c9e.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var i=n(853),s=n(43),a=n(950);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(r(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var P=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var M=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function N(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case A:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:N(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return N(e(t))}catch(n){}}return null}var L=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},j=[],O=-1;function W(e){return{current:e}}function z(e){0>O||(e.current=j[O],j[O]=null,O--)}function B(e,t){O++,j[O]=e.current,e.current=t}var H=W(null),U=W(null),V=W(null),G=W(null);function q(e,t){switch(B(V,t),B(U,e),B(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?su(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=au(t=su(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(H),B(H,e)}function X(){z(H),z(U),z(V)}function Y(e){null!==e.memoizedState&&B(G,e);var t=H.current,n=au(t,e.type);t!==n&&(B(U,e),B(H,n))}function K(e){U.current===e&&(z(H),z(U)),G.current===e&&(z(G),Yu._currentValue=F)}var Q=Object.prototype.hasOwnProperty,$=i.unstable_scheduleCallback,J=i.unstable_cancelCallback,Z=i.unstable_shouldYield,ee=i.unstable_requestPaint,te=i.unstable_now,ne=i.unstable_getCurrentPriorityLevel,ie=i.unstable_ImmediatePriority,se=i.unstable_UserBlockingPriority,ae=i.unstable_NormalPriority,re=i.unstable_LowPriority,oe=i.unstable_IdlePriority,le=i.log,ce=i.unstable_setDisableYieldValue,he=null,ue=null;function de(e){if("function"===typeof le&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(he,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/ge|0)|0},fe=Math.log,ge=Math.LN2;var me=256,ve=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var s=0,a=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var o=134217727&i;return 0!==o?0!==(i=o&~a)?s=be(i):0!==(r&=o)?s=be(r):n||0!==(n=o&~e)&&(s=be(n)):0!==(o=i&~a)?s=be(o):0!==r?s=be(r):n||0!==(n=i&~e)&&(s=be(n)),0===s?0:0!==t&&t!==s&&0===(t&a)&&((a=s&-s)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:s}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function ke(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ee(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-pe(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-pe(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function Pe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Te(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var Re=Math.random().toString(36).slice(2),Ne="__reactFiber$"+Re,Le="__reactProps$"+Re,De="__reactContainer$"+Re,Ie="__reactEvents$"+Re,Fe="__reactListeners$"+Re,je="__reactHandles$"+Re,Oe="__reactResources$"+Re,We="__reactMarker$"+Re;function ze(e){delete e[Ne],delete e[Le],delete e[Ie],delete e[Fe],delete e[je]}function Be(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[De]||n[Ne]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yu(e);null!==e;){if(n=e[Ne])return n;e=yu(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[Ne]||e[De]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function Ve(e){var t=e[Oe];return t||(t=e[Oe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[We]=!0}var qe=new Set,Xe={};function Ye(e,t){Ke(e,t),Ke(e+"Capture",t)}function Ke(e,t){for(Xe[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Qe,$e,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,Q.call(et,s)||!Q.call(Ze,s)&&(Je.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function it(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function st(e){if(void 0===Qe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",$e=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Qe+e+$e}var at=!1;function rt(e,t){if(!e||at)return"";at=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var i=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){i=a}e.call(n.prototype)}}else{try{throw Error()}catch(r){i=r}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&i&&"string"===typeof o.stack)return[o.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),r=a[0],o=a[1];if(r&&o){var l=r.split("\n"),c=o.split("\n");for(s=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(i===l.length||s===c.length)for(i=l.length-1,s=c.length-1;1<=i&&0<=s&&l[i]!==c[s];)s--;for(;1<=i&&0<=s;i--,s--)if(l[i]!==c[s]){if(1!==i||1!==s)do{if(i--,0>--s||l[i]!==c[s]){var h="\n"+l[i].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}}while(1<=i&&0<=s);break}}}finally{at=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return rt(e.type,!1);case 11:return rt(e.type.render,!1);case 1:return rt(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=ht(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=ht(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function gt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mt(e,t,n,i,s,a,r,o){e.name="",null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r?e.type=r:e.removeAttribute("type"),null!=t?"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==r&&"reset"!==r||e.removeAttribute("value"),null!=t?bt(e,r,ct(t)):null!=n?bt(e,r,ct(n)):null!=i&&e.removeAttribute("value"),null==s&&null!=a&&(e.defaultChecked=!!a),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,i,s,a,r,o){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:s)&&"symbol"!==typeof i&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.name=r)}function bt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yt(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(r(92));if(L(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function At(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&At(e,s,i)}else for(var a in t)t.hasOwnProperty(a)&&At(e,a,t[a])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mt(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,Lt=null;function Dt(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[Le]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[Le]||null;if(!s)throw Error(r(90));mt(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&dt(i)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&yt(e,!!n.multiple,t,!1)}}}var It=!1;function Ft(e,t,n){if(It)return e(t,n);It=!0;try{return e(t)}finally{if(It=!1,(null!==Nt||null!==Lt)&&(Bc(),Nt&&(t=Nt,e=Lt,Lt=Nt=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function jt(e,t){var n=e.stateNode;if(null===n)return null;var i=n[Le]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Ot=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Wt=!1;if(Ot)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Ld){Wt=!1}var Bt=null,Ht=null,Ut=null;function Vt(){if(Ut)return Ut;var e,t,n=Ht,i=n.length,s="value"in Bt?Bt.value:Bt.textContent,a=s.length;for(e=0;e<i&&n[e]===s[e];e++);var r=i-e;for(t=1;t<=r&&n[i-t]===s[a-t];t++);return Ut=s.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Xt(){return!1}function Yt(e){function t(t,n,i,s,a){for(var r in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(s):s[r]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?qt:Xt,this.isPropagationStopped=Xt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Kt,Qt,$t,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Yt(Jt),en=d({},Jt,{view:0,detail:0}),tn=Yt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Kt=e.screenX-$t.screenX,Qt=e.screenY-$t.screenY):Qt=Kt=0,$t=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),sn=Yt(nn),an=Yt(d({},nn,{dataTransfer:0})),rn=Yt(d({},en,{relatedTarget:0})),on=Yt(d({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Yt(d({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Yt(d({},Jt,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function fn(){return pn}var gn=Yt(d({},en,{key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Yt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Yt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),bn=Yt(d({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),yn=Yt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Yt(d({},Jt,{newState:0,oldState:0})),xn=[9,13,27,32],Sn=Ot&&"CompositionEvent"in window,kn=null;Ot&&"documentMode"in document&&(kn=document.documentMode);var An=Ot&&"TextEvent"in window&&!kn,_n=Ot&&(!Sn||kn&&8<kn&&11>=kn),En=String.fromCharCode(32),Cn=!1;function Pn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Tn=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function Ln(e,t,n,i){Nt?Lt?Lt.push(i):Lt=[i]:Nt=i,0<(t=Vh(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Dn=null,In=null;function Fn(e){Fh(e,0)}function jn(e){if(dt(Ue(e)))return e}function On(e,t){if("change"===e)return t}var Wn=!1;if(Ot){var zn;if(Ot){var Bn="oninput"in document;if(!Bn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Bn="function"===typeof Hn.oninput}zn=Bn}else zn=!1;Wn=zn&&(!document.documentMode||9<document.documentMode)}function Un(){Dn&&(Dn.detachEvent("onpropertychange",Vn),In=Dn=null)}function Vn(e){if("value"===e.propertyName&&jn(In)){var t=[];Ln(t,In,e,Rt(e)),Ft(Fn,t)}}function Gn(e,t,n){"focusin"===e?(Un(),In=n,(Dn=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Un()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jn(In)}function Xn(e,t){if("click"===e)return jn(t)}function Yn(e,t){if("input"===e||"change"===e)return jn(t)}var Kn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Kn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Q.call(t,s)||!Kn(e[s],t[s]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,i=$n(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=$n(i)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ei(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function ti(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ni=Ot&&"documentMode"in document&&11>=document.documentMode,ii=null,si=null,ai=null,ri=!1;function oi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ri||null==ii||ii!==pt(i)||("selectionStart"in(i=ii)&&ti(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},ai&&Qn(ai,i)||(ai=i,0<(i=Vh(si,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ii)))}function li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ci={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},hi={},ui={};function di(e){if(hi[e])return hi[e];if(!ci[e])return e;var t,n=ci[e];for(t in n)if(n.hasOwnProperty(t)&&t in ui)return hi[e]=n[t];return e}Ot&&(ui=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);var pi=di("animationend"),fi=di("animationiteration"),gi=di("animationstart"),mi=di("transitionrun"),vi=di("transitionstart"),bi=di("transitioncancel"),yi=di("transitionend"),wi=new Map,xi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(e,t){wi.set(e,t),Ye(t,[e])}xi.push("scrollEnd");var ki=new WeakMap;function Ai(e,t){if("object"===typeof e&&null!==e){var n=ki.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},ki.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var _i=[],Ei=0,Ci=0;function Pi(){for(var e=Ei,t=Ci=Ei=0;t<e;){var n=_i[t];_i[t++]=null;var i=_i[t];_i[t++]=null;var s=_i[t];_i[t++]=null;var a=_i[t];if(_i[t++]=null,null!==i&&null!==s){var r=i.pending;null===r?s.next=s:(s.next=r.next,r.next=s),i.pending=s}0!==a&&Ni(n,s,a)}}function Mi(e,t,n,i){_i[Ei++]=e,_i[Ei++]=t,_i[Ei++]=n,_i[Ei++]=i,Ci|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Ti(e,t,n,i){return Mi(e,t,n,i),Li(e)}function Ri(e,t){return Mi(e,null,null,t),Li(e)}function Ni(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var s=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(i=a.alternate)&&(i.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(s=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,s&&null!==t&&(s=31-pe(n),null===(i=(e=a.hiddenUpdates)[s])?e[s]=[t]:i.push(t),t.lane=536870912|n),a):null}function Li(e){if(50<Nc)throw Nc=0,Lc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Di={};function Ii(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(e,t,n,i){return new Ii(e,t,n,i)}function ji(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oi(e,t){var n=e.alternate;return null===n?((n=Fi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Wi(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zi(e,t,n,i,s,a){var o=0;if(i=e,"function"===typeof e)ji(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Fi(31,n,t,s)).elementType=C,e.lanes=a,e;case m:return Bi(n.children,s,a,t);case v:o=8,s|=24;break;case b:return(e=Fi(12,n,t,2|s)).elementType=b,e.lanes=a,e;case k:return(e=Fi(13,n,t,s)).elementType=k,e.lanes=a,e;case A:return(e=Fi(19,n,t,s)).elementType=A,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case x:o=10;break e;case w:o=9;break e;case S:o=11;break e;case _:o=14;break e;case E:o=16,i=null;break e}o=29,n=Error(r(130,null===e?"null":typeof e,"")),i=null}return(t=Fi(o,n,t,s)).elementType=e,t.type=i,t.lanes=a,t}function Bi(e,t,n,i){return(e=Fi(7,e,i,t)).lanes=n,e}function Hi(e,t,n){return(e=Fi(6,e,null,t)).lanes=n,e}function Ui(e,t,n){return(t=Fi(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vi=[],Gi=0,qi=null,Xi=0,Yi=[],Ki=0,Qi=null,$i=1,Ji="";function Zi(e,t){Vi[Gi++]=Xi,Vi[Gi++]=qi,qi=e,Xi=t}function es(e,t,n){Yi[Ki++]=$i,Yi[Ki++]=Ji,Yi[Ki++]=Qi,Qi=e;var i=$i;e=Ji;var s=32-pe(i)-1;i&=~(1<<s),n+=1;var a=32-pe(t)+s;if(30<a){var r=s-s%5;a=(i&(1<<r)-1).toString(32),i>>=r,s-=r,$i=1<<32-pe(t)+s|n<<s|i,Ji=a+e}else $i=1<<a|n<<s|i,Ji=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===qi;)qi=Vi[--Gi],Vi[Gi]=null,Xi=Vi[--Gi],Vi[Gi]=null;for(;e===Qi;)Qi=Yi[--Ki],Yi[Ki]=null,Ji=Yi[--Ki],Yi[Ki]=null,$i=Yi[--Ki],Yi[Ki]=null}var is=null,ss=null,as=!1,rs=null,os=!1,ls=Error(r(519));function cs(e){throw gs(Ai(Error(r(418,"")),e)),ls}function hs(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ne]=e,t[Le]=i,n){case"dialog":jh("cancel",t),jh("close",t);break;case"iframe":case"object":case"embed":jh("load",t);break;case"video":case"audio":for(n=0;n<Dh.length;n++)jh(Dh[n],t);break;case"source":jh("error",t);break;case"img":case"image":case"link":jh("error",t),jh("load",t);break;case"details":jh("toggle",t);break;case"input":jh("invalid",t),vt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),ut(t);break;case"select":jh("invalid",t);break;case"textarea":jh("invalid",t),xt(t,i.value,i.defaultValue,i.children),ut(t)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||Qh(t.textContent,n)?(null!=i.popover&&(jh("beforetoggle",t),jh("toggle",t)),null!=i.onScroll&&jh("scroll",t),null!=i.onScrollEnd&&jh("scrollend",t),null!=i.onClick&&(t.onclick=$h),t=!0):t=!1,t||cs(e)}function us(e){for(is=e.return;is;)switch(is.tag){case 5:case 13:return void(os=!1);case 27:case 3:return void(os=!0);default:is=is.return}}function ds(e){if(e!==is)return!1;if(!as)return us(e),as=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ru(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),us(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=vu(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,pu(e.type)?(e=bu,bu=null,ss=e):ss=n):ss=is?vu(e.stateNode.nextSibling):null;return!0}function ps(){ss=is=null,as=!1}function fs(){var e=rs;return null!==e&&(null===yc?yc=e:yc.push.apply(yc,e),rs=null),e}function gs(e){null===rs?rs=[e]:rs.push(e)}var ms=W(null),vs=null,bs=null;function ys(e,t,n){B(ms,t._currentValue),t._currentValue=n}function ws(e){e._currentValue=ms.current,z(ms)}function xs(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t,n,i){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var a=s.dependencies;if(null!==a){var o=s.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xs(a.return,n,e),i||(o=null);break e}a=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(r(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),xs(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function ks(e,t,n,i){e=null;for(var s=t,a=!1;null!==s;){if(!a)if(0!==(524288&s.flags))a=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(r(387));if(null!==(o=o.memoizedProps)){var l=s.type;Kn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===G.current){if(null===(o=s.alternate))throw Error(r(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Yu):e=[Yu])}s=s.return}null!==e&&Ss(t,e,n,i),t.flags|=262144}function As(e){for(e=e.firstContext;null!==e;){if(!Kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _s(e){vs=e,bs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Es(e){return Ps(vs,e)}function Cs(e,t){return null===vs&&_s(e),Ps(e,t)}function Ps(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bs){if(null===e)throw Error(r(308));bs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bs=bs.next=t;return n}var Ms="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ts=i.unstable_scheduleCallback,Rs=i.unstable_NormalPriority,Ns={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ls(){return{controller:new Ms,data:new Map,refCount:0}}function Ds(e){e.refCount--,0===e.refCount&&Ts(Rs,function(){e.controller.abort()})}var Is=null,Fs=0,js=0,Os=null;function Ws(){if(0===--Fs&&null!==Is){null!==Os&&(Os.status="fulfilled");var e=Is;Is=null,js=0,Os=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zs=D.S;D.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Is){var n=Is=[];Fs=0,js=Mh(),Os={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fs++,t.then(Ws,Ws)}(0,t),null!==zs&&zs(e,t)};var Bs=W(null);function Hs(){var e=Bs.current;return null!==e?e:ic.pooledCache}function Us(e,t){B(Bs,null===t?Bs.current:t.pool)}function Vs(){var e=Hs();return null===e?null:{parent:Ns._currentValue,pool:e}}var Gs=Error(r(460)),qs=Error(r(474)),Xs=Error(r(542)),Ys={then:function(){}};function Ks(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qs(){}function $s(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Qs,Qs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e;default:if("string"===typeof t.status)t.then(Qs,Qs);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e}throw Js=t,Gs}}var Js=null;function Zs(){if(null===Js)throw Error(r(459));var e=Js;return Js=null,e}function ea(e){if(e===Gs||e===Xs)throw Error(r(483))}var ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&nc)){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=Li(e),Ni(e,null,n),t}return Mi(e,i,t,n),Li(e)}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function oa(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?s=a=r:a=a.next=r,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var la=!1;function ca(){if(la){if(null!==Os)throw Os}}function ha(e,t,n,i){la=!1;var s=e.updateQueue;ta=!1;var a=s.firstBaseUpdate,r=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===r?a=c:r.next=c,r=l;var h=e.alternate;null!==h&&((o=(h=h.updateQueue).lastBaseUpdate)!==r&&(null===o?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(null!==a){var u=s.baseState;for(r=0,h=c=l=null,o=a;;){var p=-536870913&o.lane,f=p!==o.lane;if(f?(ac&p)===p:(i&p)===p){0!==p&&p===js&&(la=!0),null!==h&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,m=o;p=t;var v=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){u=g.call(v,u,p);break e}u=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(p="function"===typeof(g=m.payload)?g.call(v,u,p):g)||void 0===p)break e;u=d({},u,p);break e;case 2:ta=!0}}null!==(p=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=s.callbacks)?s.callbacks=[p]:f.push(p))}else f={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=f,l=u):h=h.next=f,r|=p;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(f=o).next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}null===h&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,null===a&&(s.shared.lanes=0),pc|=r,e.lanes=r,e.memoizedState=u}}function ua(e,t){if("function"!==typeof e)throw Error(r(191,e));e.call(t)}function da(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ua(n[e],t)}var pa=W(null),fa=W(0);function ga(e,t){B(fa,e=uc),B(pa,t),uc=e|t.baseLanes}function ma(){B(fa,uc),B(pa,pa.current)}function va(){uc=fa.current,z(pa),z(fa)}var ba=0,ya=null,wa=null,xa=null,Sa=!1,ka=!1,Aa=!1,_a=0,Ea=0,Ca=null,Pa=0;function Ma(){throw Error(r(321))}function Ta(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return!1;return!0}function Ra(e,t,n,i,s,a){return ba=a,ya=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?Gr:qr,Aa=!1,a=n(i,s),Aa=!1,ka&&(a=La(t,n,i,s)),Na(e),a}function Na(e){D.H=Vr;var t=null!==wa&&null!==wa.next;if(ba=0,xa=wa=ya=null,Sa=!1,Ea=0,Ca=null,t)throw Error(r(300));null===e||Co||null!==(e=e.dependencies)&&As(e)&&(Co=!0)}function La(e,t,n,i){ya=e;var s=0;do{if(ka&&(Ca=null),Ea=0,ka=!1,25<=s)throw Error(r(301));if(s+=1,xa=wa=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}D.H=Xr,a=t(n,i)}while(ka);return a}function Da(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?za(t):t,e=e.useState()[0],(null!==wa?wa.memoizedState:null)!==e&&(ya.flags|=1024),t}function Ia(){var e=0!==_a;return _a=0,e}function Fa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ja(e){if(Sa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Sa=!1}ba=0,xa=wa=ya=null,ka=!1,Ea=_a=0,Ca=null}function Oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xa?ya.memoizedState=xa=e:xa=xa.next=e,xa}function Wa(){if(null===wa){var e=ya.alternate;e=null!==e?e.memoizedState:null}else e=wa.next;var t=null===xa?ya.memoizedState:xa.next;if(null!==t)xa=t,wa=e;else{if(null===e){if(null===ya.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(wa=e).memoizedState,baseState:wa.baseState,baseQueue:wa.baseQueue,queue:wa.queue,next:null},null===xa?ya.memoizedState=xa=e:xa=xa.next=e}return xa}function za(e){var t=Ea;return Ea+=1,null===Ca&&(Ca=[]),e=$s(Ca,e,t),t=ya,null===(null===xa?t.memoizedState:xa.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?Gr:qr),e}function Ba(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return za(e);if(e.$$typeof===x)return Es(e)}throw Error(r(438,String(e)))}function Ha(e){var t=null,n=ya.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=ya.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ya.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=P;return t.index++,n}function Ua(e,t){return"function"===typeof t?t(e):t}function Va(e){return Ga(Wa(),wa,e)}function Ga(e,t,n){var i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=n;var s=e.baseQueue,a=i.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}t.baseQueue=s=a,i.pending=null}if(a=e.baseState,null===s)e.memoizedState=a;else{var l=o=null,c=null,h=t=s.next,u=!1;do{var d=-536870913&h.lane;if(d!==h.lane?(ac&d)===d:(ba&d)===d){var p=h.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),d===js&&(u=!0);else{if((ba&p)===p){h=h.next,p===js&&(u=!0);continue}d={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=d,o=a):c=c.next=d,ya.lanes|=p,pc|=p}d=h.action,Aa&&n(a,d),a=h.hasEagerState?h.eagerState:n(a,d)}else p={lane:d,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=p,o=a):c=c.next=p,ya.lanes|=d,pc|=d;h=h.next}while(null!==h&&h!==t);if(null===c?o=a:c.next=l,!Kn(a,e.memoizedState)&&(Co=!0,u&&null!==(n=Os)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,i.lastRenderedState=a}return null===s&&(i.lanes=0),[e.memoizedState,i.dispatch]}function qa(e){var t=Wa(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);Kn(a,t.memoizedState)||(Co=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Xa(e,t,n){var i=ya,s=Wa(),a=as;if(a){if(void 0===n)throw Error(r(407));n=n()}else n=t();var o=!Kn((wa||s).memoizedState,n);if(o&&(s.memoizedState=n,Co=!0),s=s.queue,mr(2048,8,Qa.bind(null,i,s,e),[e]),s.getSnapshot!==t||o||null!==xa&&1&xa.memoizedState.tag){if(i.flags|=2048,pr(9,{destroy:void 0,resource:void 0},Ka.bind(null,i,s,n,t),null),null===ic)throw Error(r(349));a||0!==(124&ba)||Ya(i,t,n)}return n}function Ya(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ya.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ya.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ka(e,t,n,i){t.value=n,t.getSnapshot=i,$a(t)&&Ja(e)}function Qa(e,t,n){return n(function(){$a(t)&&Ja(e)})}function $a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kn(e,n)}catch(i){return!0}}function Ja(e){var t=Ri(e,2);null!==t&&Fc(t,e,2)}function Za(e){var t=Oa();if("function"===typeof e){var n=e;if(e=n(),Aa){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:e},t}function er(e,t,n,i){return e.baseState=n,Ga(e,wa,"function"===typeof i?i:Ua)}function tr(e,t,n,i,s){if(Br(e))throw Error(r(485));if(null!==(e=t.action)){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==D.T?n(!0):a.isTransition=!1,i(a),null===(n=t.pending)?(a.next=t.pending=a,nr(t,a)):(a.next=n.next,t.pending=n.next=a)}}function nr(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var a=D.T,r={};D.T=r;try{var o=n(s,i),l=D.S;null!==l&&l(r,o),ir(e,t,o)}catch(c){ar(e,t,c)}finally{D.T=a}}else try{ir(e,t,a=n(s,i))}catch(h){ar(e,t,h)}}function ir(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){sr(e,t,n)},function(n){return ar(e,t,n)}):sr(e,t,n)}function sr(e,t,n){t.status="fulfilled",t.value=n,rr(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,nr(e,n)))}function ar(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,rr(t),t=t.next}while(t!==i)}e.action=null}function rr(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function or(e,t){return t}function lr(e,t){if(as){var n=ic.formState;if(null!==n){e:{var i=ya;if(as){if(ss){t:{for(var s=ss,a=os;8!==s.nodeType;){if(!a){s=null;break t}if(null===(s=vu(s.nextSibling))){s=null;break t}}s="F!"===(a=s.data)||"F"===a?s:null}if(s){ss=vu(s.nextSibling),i="F!"===s.data;break e}}cs(i)}i=!1}i&&(t=n[0])}}return(n=Oa()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:t},n.queue=i,n=Or.bind(null,ya,i),i.dispatch=n,i=Za(!1),a=zr.bind(null,ya,!1,i.queue),s={state:t,dispatch:null,action:e,pending:null},(i=Oa()).queue=s,n=tr.bind(null,ya,s,a,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function cr(e){return hr(Wa(),wa,e)}function hr(e,t,n){if(t=Ga(e,t,or)[0],e=Va(Ua)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var i=za(t)}catch(r){if(r===Gs)throw Xs;throw r}else i=t;var s=(t=Wa()).queue,a=s.dispatch;return n!==t.memoizedState&&(ya.flags|=2048,pr(9,{destroy:void 0,resource:void 0},ur.bind(null,s,n),null)),[i,a,e]}function ur(e,t){e.action=t}function dr(e){var t=Wa(),n=wa;if(null!==n)return hr(t,n,e);Wa(),t=t.memoizedState;var i=(n=Wa()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function pr(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=ya.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ya.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function fr(){return Wa().memoizedState}function gr(e,t,n,i){var s=Oa();i=void 0===i?null:i,ya.flags|=e,s.memoizedState=pr(1|t,{destroy:void 0,resource:void 0},n,i)}function mr(e,t,n,i){var s=Wa();i=void 0===i?null:i;var a=s.memoizedState.inst;null!==wa&&null!==i&&Ta(i,wa.memoizedState.deps)?s.memoizedState=pr(t,a,n,i):(ya.flags|=e,s.memoizedState=pr(1|t,a,n,i))}function vr(e,t){gr(8390656,8,e,t)}function br(e,t){mr(2048,8,e,t)}function yr(e,t){return mr(4,2,e,t)}function wr(e,t){return mr(4,4,e,t)}function xr(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Sr(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,mr(4,4,xr.bind(null,t,e),n)}function kr(){}function Ar(e,t){var n=Wa();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&Ta(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function _r(e,t){var n=Wa();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&Ta(t,i[1]))return i[0];if(i=e(),Aa){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[i,t],i}function Er(e,t,n){return void 0===n||0!==(1073741824&ba)?e.memoizedState=t:(e.memoizedState=n,e=Ic(),ya.lanes|=e,pc|=e,n)}function Cr(e,t,n,i){return Kn(n,t)?n:null!==pa.current?(e=Er(e,n,i),Kn(e,t)||(Co=!0),e):0===(42&ba)?(Co=!0,e.memoizedState=n):(e=Ic(),ya.lanes|=e,pc|=e,t)}function Pr(e,t,n,i,s){var a=I.p;I.p=0!==a&&8>a?a:8;var r=D.T,o={};D.T=o,zr(e,!1,t,n);try{var l=s(),c=D.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Wr(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),Dc());else Wr(e,t,i,Dc())}catch(h){Wr(e,t,{then:function(){},status:"rejected",reason:h},Dc())}finally{I.p=a,D.T=r}}function Mr(){}function Tr(e,t,n,i){if(5!==e.tag)throw Error(r(476));var s=Rr(e).queue;Pr(e,s,t,F,null===n?Mr:function(){return Nr(e),n(i)})}function Rr(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:F},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Nr(e){Wr(e,Rr(e).next.queue,{},Dc())}function Lr(){return Es(Yu)}function Dr(){return Wa().memoizedState}function Ir(){return Wa().memoizedState}function Fr(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Dc(),i=aa(t,e=sa(n),n);return null!==i&&(Fc(i,t,n),ra(i,t,n)),t={cache:Ls()},void(e.payload=t)}t=t.return}}function jr(e,t,n){var i=Dc();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Br(e)?Hr(t,n):null!==(n=Ti(e,t,n,i))&&(Fc(n,e,i),Ur(n,t,i))}function Or(e,t,n){Wr(e,t,n,Dc())}function Wr(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Br(e))Hr(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var r=t.lastRenderedState,o=a(r,n);if(s.hasEagerState=!0,s.eagerState=o,Kn(o,r))return Mi(e,t,s,0),null===ic&&Pi(),!1}catch(l){}if(null!==(n=Ti(e,t,s,i)))return Fc(n,e,i),Ur(n,t,i),!0}return!1}function zr(e,t,n,i){if(i={lane:2,revertLane:Mh(),action:i,hasEagerState:!1,eagerState:null,next:null},Br(e)){if(t)throw Error(r(479))}else null!==(t=Ti(e,n,i,2))&&Fc(t,e,2)}function Br(e){var t=e.alternate;return e===ya||null!==t&&t===ya}function Hr(e,t){ka=Sa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ur(e,t,n){if(0!==(4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Vr={readContext:Es,use:Ba,useCallback:Ma,useContext:Ma,useEffect:Ma,useImperativeHandle:Ma,useLayoutEffect:Ma,useInsertionEffect:Ma,useMemo:Ma,useReducer:Ma,useRef:Ma,useState:Ma,useDebugValue:Ma,useDeferredValue:Ma,useTransition:Ma,useSyncExternalStore:Ma,useId:Ma,useHostTransitionStatus:Ma,useFormState:Ma,useActionState:Ma,useOptimistic:Ma,useMemoCache:Ma,useCacheRefresh:Ma},Gr={readContext:Es,use:Ba,useCallback:function(e,t){return Oa().memoizedState=[e,void 0===t?null:t],e},useContext:Es,useEffect:vr,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,gr(4194308,4,xr.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gr(4194308,4,e,t)},useInsertionEffect:function(e,t){gr(4,2,e,t)},useMemo:function(e,t){var n=Oa();t=void 0===t?null:t;var i=e();if(Aa){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Oa();if(void 0!==n){var s=n(t);if(Aa){de(!0);try{n(t)}finally{de(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=jr.bind(null,ya,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Oa().memoizedState=e},useState:function(e){var t=(e=Za(e)).queue,n=Or.bind(null,ya,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:kr,useDeferredValue:function(e,t){return Er(Oa(),e,t)},useTransition:function(){var e=Za(!1);return e=Pr.bind(null,ya,e.queue,!0,!1),Oa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=ya,s=Oa();if(as){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===ic)throw Error(r(349));0!==(124&ac)||Ya(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,vr(Qa.bind(null,i,a,e),[e]),i.flags|=2048,pr(9,{destroy:void 0,resource:void 0},Ka.bind(null,i,a,n,t),null),n},useId:function(){var e=Oa(),t=ic.identifierPrefix;if(as){var n=Ji;t="\xab"+t+"R"+(n=($i&~(1<<32-pe($i)-1)).toString(32)+n),0<(n=_a++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Pa++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Lr,useFormState:lr,useActionState:lr,useOptimistic:function(e){var t=Oa();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zr.bind(null,ya,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ha,useCacheRefresh:function(){return Oa().memoizedState=Fr.bind(null,ya)}},qr={readContext:Es,use:Ba,useCallback:Ar,useContext:Es,useEffect:br,useImperativeHandle:Sr,useInsertionEffect:yr,useLayoutEffect:wr,useMemo:_r,useReducer:Va,useRef:fr,useState:function(){return Va(Ua)},useDebugValue:kr,useDeferredValue:function(e,t){return Cr(Wa(),wa.memoizedState,e,t)},useTransition:function(){var e=Va(Ua)[0],t=Wa().memoizedState;return["boolean"===typeof e?e:za(e),t]},useSyncExternalStore:Xa,useId:Dr,useHostTransitionStatus:Lr,useFormState:cr,useActionState:cr,useOptimistic:function(e,t){return er(Wa(),0,e,t)},useMemoCache:Ha,useCacheRefresh:Ir},Xr={readContext:Es,use:Ba,useCallback:Ar,useContext:Es,useEffect:br,useImperativeHandle:Sr,useInsertionEffect:yr,useLayoutEffect:wr,useMemo:_r,useReducer:qa,useRef:fr,useState:function(){return qa(Ua)},useDebugValue:kr,useDeferredValue:function(e,t){var n=Wa();return null===wa?Er(n,e,t):Cr(n,wa.memoizedState,e,t)},useTransition:function(){var e=qa(Ua)[0],t=Wa().memoizedState;return["boolean"===typeof e?e:za(e),t]},useSyncExternalStore:Xa,useId:Dr,useHostTransitionStatus:Lr,useFormState:dr,useActionState:dr,useOptimistic:function(e,t){var n=Wa();return null!==wa?er(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ha,useCacheRefresh:Ir},Yr=null,Kr=0;function Qr(e){var t=Kr;return Kr+=1,null===Yr&&(Yr=[]),$s(Yr,e,t)}function $r(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Jr(e,t){if(t.$$typeof===p)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zr(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Oi(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Hi(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,i){var a=n.type;return a===m?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===E&&Zr(a)===t.type)?($r(t=s(t,n.props),n),t.return=e,t):($r(t=zi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function h(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ui(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,i,a){return null===t||7!==t.tag?((t=Bi(n,e.mode,i,a)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hi(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return $r(n=zi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Ui(t,e.mode,n)).return=e,t;case E:return d(e,t=(0,t._init)(t._payload),n)}if(L(t)||T(t))return(t=Bi(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,Qr(t),n);if(t.$$typeof===x)return d(e,Cs(e,t),n);Jr(e,t)}return null}function p(e,t,n,i){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===s?c(e,t,n,i):null;case g:return n.key===s?h(e,t,n,i):null;case E:return p(e,t,n=(s=n._init)(n._payload),i)}if(L(n)||T(n))return null!==s?null:u(e,t,n,i,null);if("function"===typeof n.then)return p(e,t,Qr(n),i);if(n.$$typeof===x)return p(e,t,Cs(e,n),i);Jr(e,n)}return null}function v(e,t,n,i,s){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case f:return c(t,e=e.get(null===i.key?n:i.key)||null,i,s);case g:return h(t,e=e.get(null===i.key?n:i.key)||null,i,s);case E:return v(e,t,n,i=(0,i._init)(i._payload),s)}if(L(i)||T(i))return u(t,e=e.get(n)||null,i,s,null);if("function"===typeof i.then)return v(e,t,n,Qr(i),s);if(i.$$typeof===x)return v(e,t,n,Cs(t,i),s);Jr(t,i)}return null}function b(l,c,h,u){if("object"===typeof h&&null!==h&&h.type===m&&null===h.key&&(h=h.props.children),"object"===typeof h&&null!==h){switch(h.$$typeof){case f:e:{for(var y=h.key;null!==c;){if(c.key===y){if((y=h.type)===m){if(7===c.tag){n(l,c.sibling),(u=s(c,h.props.children)).return=l,l=u;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===E&&Zr(y)===c.type){n(l,c.sibling),$r(u=s(c,h.props),h),u.return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}h.type===m?((u=Bi(h.props.children,l.mode,u,h.key)).return=l,l=u):($r(u=zi(h.type,h.key,h.props,null,l.mode,u),h),u.return=l,l=u)}return o(l);case g:e:{for(y=h.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){n(l,c.sibling),(u=s(c,h.children||[])).return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}(u=Ui(h,l.mode,u)).return=l,l=u}return o(l);case E:return b(l,c,h=(y=h._init)(h._payload),u)}if(L(h))return function(s,r,o,l){for(var c=null,h=null,u=r,f=r=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var m=p(s,u,o[f],l);if(null===m){null===u&&(u=g);break}e&&u&&null===m.alternate&&t(s,u),r=a(m,r,f),null===h?c=m:h.sibling=m,h=m,u=g}if(f===o.length)return n(s,u),as&&Zi(s,f),c;if(null===u){for(;f<o.length;f++)null!==(u=d(s,o[f],l))&&(r=a(u,r,f),null===h?c=u:h.sibling=u,h=u);return as&&Zi(s,f),c}for(u=i(u);f<o.length;f++)null!==(g=v(u,s,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),r=a(g,r,f),null===h?c=g:h.sibling=g,h=g);return e&&u.forEach(function(e){return t(s,e)}),as&&Zi(s,f),c}(l,c,h,u);if(T(h)){if("function"!==typeof(y=T(h)))throw Error(r(150));return function(s,o,l,c){if(null==l)throw Error(r(151));for(var h=null,u=null,f=o,g=o=0,m=null,b=l.next();null!==f&&!b.done;g++,b=l.next()){f.index>g?(m=f,f=null):m=f.sibling;var y=p(s,f,b.value,c);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(s,f),o=a(y,o,g),null===u?h=y:u.sibling=y,u=y,f=m}if(b.done)return n(s,f),as&&Zi(s,g),h;if(null===f){for(;!b.done;g++,b=l.next())null!==(b=d(s,b.value,c))&&(o=a(b,o,g),null===u?h=b:u.sibling=b,u=b);return as&&Zi(s,g),h}for(f=i(f);!b.done;g++,b=l.next())null!==(b=v(f,s,g,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?g:b.key),o=a(b,o,g),null===u?h=b:u.sibling=b,u=b);return e&&f.forEach(function(e){return t(s,e)}),as&&Zi(s,g),h}(l,c,h=y.call(h),u)}if("function"===typeof h.then)return b(l,c,Qr(h),u);if(h.$$typeof===x)return b(l,c,Cs(l,h),u);Jr(l,h)}return"string"===typeof h&&""!==h||"number"===typeof h||"bigint"===typeof h?(h=""+h,null!==c&&6===c.tag?(n(l,c.sibling),(u=s(c,h)).return=l,l=u):(n(l,c),(u=Hi(h,l.mode,u)).return=l,l=u),o(l)):n(l,c)}return function(e,t,n,i){try{Kr=0;var s=b(e,t,n,i);return Yr=null,s}catch(r){if(r===Gs||r===Xs)throw r;var a=Fi(29,r,null,e.mode);return a.lanes=i,a.return=e,a}}}var to=eo(!0),no=eo(!1),io=W(null),so=null;function ao(e){var t=e.alternate;B(co,1&co.current),B(io,e),null===so&&(null===t||null!==pa.current||null!==t.memoizedState)&&(so=e)}function ro(e){if(22===e.tag){if(B(co,co.current),B(io,e),null===so){var t=e.alternate;null!==t&&null!==t.memoizedState&&(so=e)}}else oo()}function oo(){B(co,co.current),B(io,io.current)}function lo(e){z(io),so===e&&(so=null),z(co)}var co=W(0);function ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||mu(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function uo(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Dc(),s=sa(i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=aa(e,s,i))&&(Fc(t,e,i),ra(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Dc(),s=sa(i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=aa(e,s,i))&&(Fc(t,e,i),ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dc(),i=sa(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=aa(e,i,n))&&(Fc(t,e,n),ra(t,e,n))}};function fo(e,t,n,i,s,a,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,r):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,i)||!Qn(s,a))}function go(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function mo(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var s in n===t&&(n=d({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bo(e){vo(e)}function yo(e){console.error(e)}function wo(e){vo(e)}function xo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function So(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ko(e,t,n){return(n=sa(n)).tag=3,n.payload={element:null},n.callback=function(){xo(e,t)},n}function Ao(e){return(e=sa(e)).tag=3,e}function _o(e,t,n,i){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var a=i.value;e.payload=function(){return s(a)},e.callback=function(){So(t,n,i)}}var r=n.stateNode;null!==r&&"function"===typeof r.componentDidCatch&&(e.callback=function(){So(t,n,i),"function"!==typeof s&&(null===Ac?Ac=new Set([this]):Ac.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var Eo=Error(r(461)),Co=!1;function Po(e,t,n,i){t.child=null===e?no(t,null,n,i):to(t,e.child,n,i)}function Mo(e,t,n,i,s){n=n.render;var a=t.ref;if("ref"in i){var r={};for(var o in i)"ref"!==o&&(r[o]=i[o])}else r=i;return _s(t),i=Ra(e,t,n,r,a,s),o=Ia(),null===e||Co?(as&&o&&ts(t),t.flags|=1,Po(e,t,i,s),t.child):(Fa(e,t,s),Ko(e,t,s))}function To(e,t,n,i,s){if(null===e){var a=n.type;return"function"!==typeof a||ji(a)||void 0!==a.defaultProps||null!==n.compare?((e=zi(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ro(e,t,a,i,s))}if(a=e.child,!Qo(e,s)){var r=a.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(r,i)&&e.ref===t.ref)return Ko(e,t,s)}return t.flags|=1,(e=Oi(a,i)).ref=t.ref,e.return=t,t.child=e}function Ro(e,t,n,i,s){if(null!==e){var a=e.memoizedProps;if(Qn(a,i)&&e.ref===t.ref){if(Co=!1,t.pendingProps=i=a,!Qo(e,s))return t.lanes=e.lanes,Ko(e,t,s);0!==(131072&e.flags)&&(Co=!0)}}return Io(e,t,n,i,s)}function No(e,t,n){var i=t.pendingProps,s=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode){if(0!==(128&t.flags)){if(i=null!==a?a.baseLanes|n:n,null!==e){for(s=t.child=e.child,a=0;null!==s;)a=a|s.lanes|s.childLanes,s=s.sibling;t.childLanes=a&~i}else t.childLanes=0,t.child=null;return Lo(e,t,i,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Lo(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Us(0,null!==a?a.cachePool:null),null!==a?ga(t,a):ma(),ro(t)}else null!==a?(Us(0,a.cachePool),ga(t,a),oo(),t.memoizedState=null):(null!==e&&Us(0,null),ma(),oo());return Po(e,t,s,n),t.child}function Lo(e,t,n,i){var s=Hs();return s=null===s?null:{parent:Ns._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Us(0,null),ma(),ro(t),null!==e&&ks(e,t,i,!0),null}function Do(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Io(e,t,n,i,s){return _s(t),n=Ra(e,t,n,i,void 0,s),i=Ia(),null===e||Co?(as&&i&&ts(t),t.flags|=1,Po(e,t,n,s),t.child):(Fa(e,t,s),Ko(e,t,s))}function Fo(e,t,n,i,s,a){return _s(t),t.updateQueue=null,n=La(t,i,n,s),Na(e),i=Ia(),null===e||Co?(as&&i&&ts(t),t.flags|=1,Po(e,t,n,a),t.child):(Fa(e,t,a),Ko(e,t,a))}function jo(e,t,n,i,s){if(_s(t),null===t.stateNode){var a=Di,r=n.contextType;"object"===typeof r&&null!==r&&(a=Es(r)),a=new n(i,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=po,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=i,a.state=t.memoizedState,a.refs={},na(t),r=n.contextType,a.context="object"===typeof r&&null!==r?Es(r):Di,a.state=t.memoizedState,"function"===typeof(r=n.getDerivedStateFromProps)&&(uo(t,n,r,i),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(r=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),r!==a.state&&po.enqueueReplaceState(a,a.state,null),ha(t,i,a,s),ca(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=mo(n,o);a.props=l;var c=a.context,h=n.contextType;r=Di,"object"===typeof h&&null!==h&&(r=Es(h));var u=n.getDerivedStateFromProps;h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o||c!==r)&&go(t,a,i,r),ta=!1;var d=t.memoizedState;a.state=d,ha(t,i,a,s),ca(),c=t.memoizedState,o||d!==c||ta?("function"===typeof u&&(uo(t,n,u,i),c=t.memoizedState),(l=ta||fo(t,n,l,i,d,c,r))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),a.props=i,a.state=c,a.context=r,i=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,ia(e,t),h=mo(n,r=t.memoizedProps),a.props=h,u=t.pendingProps,d=a.context,c=n.contextType,l=Di,"object"===typeof c&&null!==c&&(l=Es(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(r!==u||d!==l)&&go(t,a,i,l),ta=!1,d=t.memoizedState,a.state=d,ha(t,i,a,s),ca();var p=t.memoizedState;r!==u||d!==p||ta||null!==e&&null!==e.dependencies&&As(e.dependencies)?("function"===typeof o&&(uo(t,n,o,i),p=t.memoizedState),(h=ta||fo(t,n,h,i,d,p,l)||null!==e&&null!==e.dependencies&&As(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=l,i=h):("function"!==typeof a.componentDidUpdate||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return a=i,Do(e,t),i=0!==(128&t.flags),a||i?(a=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&i?(t.child=to(t,e.child,null,s),t.child=to(t,null,n,s)):Po(e,t,n,s),t.memoizedState=a.state,e=t.child):e=Ko(e,t,s),e}function Oo(e,t,n,i){return ps(),t.flags|=256,Po(e,t,n,i),t.child}var Wo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Vs()}}function Bo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mc),e}function Ho(e,t,n){var i,s=t.pendingProps,a=!1,o=0!==(128&t.flags);if((i=o)||(i=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),i&&(a=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if(as){if(a?ao(t):oo(),as){var l,c=ss;if(l=c){e:{for(l=c,c=os;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vu(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Qi?{id:$i,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},(l=Fi(18,null,null,0)).stateNode=c,l.return=t,t.child=l,is=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return mu(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=s.children,s=s.fallback,a?(oo(),c=Vo({mode:"hidden",children:c},a=t.mode),s=Bi(s,a,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(a=t.child).memoizedState=zo(n),a.childLanes=Bo(e,i,n),t.memoizedState=Wo,s):(ao(t),Uo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(ao(t),t.flags&=-257,t=Go(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),a=s.fallback,c=t.mode,s=Vo({mode:"visible",children:s.children},c),(a=Bi(a,c,n,null)).flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,to(t,e.child,null,n),(s=t.child).memoizedState=zo(n),s.childLanes=Bo(e,i,n),t.memoizedState=Wo,t=a);else if(ao(t),mu(c)){if(i=c.nextSibling&&c.nextSibling.dataset)var h=i.dgst;i=h,(s=Error(r(419))).stack="",s.digest=i,gs({value:s,source:null,stack:null}),t=Go(e,t,n)}else if(Co||ks(e,t,n,!1),i=0!==(n&e.childLanes),Co||i){if(null!==(i=ic)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:Pe(s))&(i.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Ri(e,s),Fc(i,e,s),Eo;"$?"===c.data||Xc(),t=Go(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=vu(c.nextSibling),is=t,as=!0,rs=null,os=!1,null!==e&&(Yi[Ki++]=$i,Yi[Ki++]=Ji,Yi[Ki++]=Qi,$i=e.id,Ji=e.overflow,Qi=t),(t=Uo(t,s.children)).flags|=4096);return t}return a?(oo(),a=s.fallback,c=t.mode,h=(l=e.child).sibling,(s=Oi(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==h?a=Oi(h,a):(a=Bi(a,c,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(l=c.cachePool)?(h=Ns._currentValue,l=l.parent!==h?{parent:h,pool:h}:l):l=Vs(),c={baseLanes:c.baseLanes|n,cachePool:l}),a.memoizedState=c,a.childLanes=Bo(e,i,n),t.memoizedState=Wo,s):(ao(t),e=(n=e.child).sibling,(n=Oi(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Uo(e,t){return(t=Vo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vo(e,t){return(e=Fi(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Go(e,t,n){return to(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),xs(e.return,t,n)}function Xo(e,t,n,i,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=s)}function Yo(e,t,n){var i=t.pendingProps,s=i.revealOrder,a=i.tail;if(Po(e,t,i.children,n),0!==(2&(i=co.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qo(e,n,t);else if(19===e.tag)qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(B(co,i),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ho(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Xo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ho(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Xo(t,!0,n,null,a);break;case"together":Xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ks(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Oi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!As(e))}function $o(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Co=!0;else{if(!Qo(e,n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),ys(0,Ns,e.memoizedState.cache),ps();break;case 27:case 5:Y(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:ys(0,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(ao(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ho(e,t,n):(ao(t),null!==(e=Ko(e,t,n))?e.sibling:null);ao(t);break;case 19:var s=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(ks(e,t,n,!1),i=0!==(n&t.childLanes)),s){if(i)return Yo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),B(co,co.current),i)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n);case 24:ys(0,Ns,e.memoizedState.cache)}return Ko(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,as&&0!==(1048576&t.flags)&&es(t,Xi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,"function"!==typeof i){if(void 0!==i&&null!==i){if((s=i.$$typeof)===S){t.tag=11,t=Mo(null,t,i,e,n);break e}if(s===_){t.tag=14,t=To(null,t,i,e,n);break e}}throw t=N(i)||i,Error(r(306,t,""))}ji(i)?(e=mo(i,e),t.tag=1,t=jo(null,t,i,e,n)):(t.tag=0,t=Io(null,t,i,e,n))}return t;case 0:return Io(e,t,t.type,t.pendingProps,n);case 1:return jo(e,t,i=t.type,s=mo(i,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(r(387));i=t.pendingProps;var a=t.memoizedState;s=a.element,ia(e,t),ha(t,i,null,n);var o=t.memoizedState;if(i=o.cache,ys(0,Ns,i),i!==a.cache&&Ss(t,[Ns],n,!0),ca(),i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Oo(e,t,i,n);break e}if(i!==s){gs(s=Ai(Error(r(424)),t)),t=Oo(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=vu(e.firstChild),is=t,as=!0,rs=null,os=!0,n=no(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===s){t=Ko(e,t,n);break e}Po(e,t,i,n)}t=t.child}return t;case 26:return Do(e,t),null===e?(n=Pu(t.type,null,t.pendingProps,null))?t.memoizedState=n:as||(n=t.type,e=t.pendingProps,(i=iu(V.current).createElement(n))[Ne]=t,i[Le]=e,eu(i,n,e),Ge(i),t.stateNode=i):t.memoizedState=Pu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&as&&(i=t.stateNode=wu(t.type,t.pendingProps,V.current),is=t,os=!0,s=ss,pu(t.type)?(bu=s,ss=vu(i.firstChild)):ss=s),Po(e,t,t.pendingProps.children,n),Do(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&as&&((s=i=ss)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[We])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===a)return e}if(null===(e=vu(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,os))?(t.stateNode=i,is=t,ss=vu(i.firstChild),os=!1,s=!0):s=!1),s||cs(t)),Y(t),s=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,ru(s,a)?i=null:null!==o&&ru(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=Ra(e,t,Da,null,null,n),Yu._currentValue=s),Do(e,t),Po(e,t,i,n),t.child;case 6:return null===e&&as&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vu(e.nextSibling)))return null}return e}(n,t.pendingProps,os))?(t.stateNode=n,is=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Ho(e,t,n);case 4:return q(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=to(t,null,i,n):Po(e,t,i,n),t.child;case 11:return Mo(e,t,t.type,t.pendingProps,n);case 7:return Po(e,t,t.pendingProps,n),t.child;case 8:case 12:return Po(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,ys(0,t.type,i.value),Po(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,_s(t),i=i(s=Es(s)),t.flags|=1,Po(e,t,i,n),t.child;case 14:return To(e,t,t.type,t.pendingProps,n);case 15:return Ro(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},null===e?((n=Vo(i,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Oi(e.child,i)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return No(e,t,n);case 24:return _s(t),i=Es(Ns),null===e?(null===(s=Hs())&&(s=ic,a=Ls(),s.pooledCache=a,a.refCount++,null!==a&&(s.pooledCacheLanes|=n),s=a),t.memoizedState={parent:i,cache:s},na(t),ys(0,Ns,s)):(0!==(e.lanes&n)&&(ia(e,t),ha(t,null,null,n),ca()),s=e.memoizedState,a=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),ys(0,Ns,i)):(i=a.cache,ys(0,Ns,i),i!==s.cache&&Ss(t,[Ns],n,!0))),Po(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Jo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bu(t)){if(null!==(t=io.current)&&((4194048&ac)===ac?null!==so:(62914560&ac)!==ac&&0===(536870912&ac)||t!==so))throw Js=Ys,qs;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=65011712&s.subtreeFlags,i|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function il(e,t,n){var i=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ws(Ns),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ds(t)?Jo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fs())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Jo(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Jo(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==i&&Jo(t),nl(t),t.flags&=-16777217),null;case 27:K(t),n=V.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Jo(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return nl(t),null}e=H.current,ds(t)?hs(t):(e=wu(s,i,n),t.stateNode=e,Jo(t))}return nl(t),null;case 5:if(K(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Jo(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return nl(t),null}if(e=H.current,ds(t))hs(t);else{switch(s=iu(V.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof i.is?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"===typeof i.is?s.createElement(n,{is:i.is}):s.createElement(n)}}e[Ne]=t,e[Le]=i;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(eu(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Jo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&Jo(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(r(166));if(e=V.current,ds(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(s=is))switch(s.tag){case 27:case 5:i=s.memoizedProps}e[Ne]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Qh(e.nodeValue,n)))||cs(t)}else(e=iu(e).createTextNode(i))[Ne]=t,t.stateNode=e}return nl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=ds(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(r(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(r(317));s[Ne]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=fs(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(s=i.alternate.memoizedState.cachePool.pool);var a=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(a=i.memoizedState.cachePool.pool),a!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return X(),null===e&&zh(t.stateNode.containerInfo),nl(t),null;case 10:return ws(t.type),nl(t),null;case 19:if(z(co),null===(s=t.memoizedState))return nl(t),null;if(i=0!==(128&t.flags),null===(a=s.rendering))if(i)tl(s,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=ho(e))){for(t.flags|=128,tl(s,!1),e=a.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Wi(n,e),n=n.sibling;return B(co,1&co.current|2),t.child}e=e.sibling}null!==s.tail&&te()>Sc&&(t.flags|=128,i=!0,tl(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ho(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!as)return nl(t),null}else 2*te()-s.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,i=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=s.last)?e.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=co.current,B(co,i?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),va(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&z(Bs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ws(Ns),nl(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ws(Ns),X(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(co),null;case 4:return X(),null;case 10:return ws(t.type),null;case 22:case 23:return lo(t),va(),null!==e&&z(Bs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ws(Ns),null;default:return null}}function al(e,t){switch(ns(t),t.tag){case 3:ws(Ns),X();break;case 26:case 27:case 5:K(t);break;case 4:X();break;case 13:lo(t);break;case 19:z(co);break;case 10:ws(t.type);break;case 22:case 23:lo(t),va(),null!==e&&z(Bs);break;case 24:ws(Ns)}}function rl(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var a=n.create,r=n.inst;i=a(),r.destroy=i}n=n.next}while(n!==s)}}catch(o){hh(t,t.return,o)}}function ol(e,t,n){try{var i=t.updateQueue,s=null!==i?i.lastEffect:null;if(null!==s){var a=s.next;i=a;do{if((i.tag&e)===e){var r=i.inst,o=r.destroy;if(void 0!==o){r.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(h){hh(s,l,h)}}}i=i.next}while(i!==a)}}catch(h){hh(t,t.return,h)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{da(t,n)}catch(i){hh(e,e.return,i)}}}function cl(e,t,n){n.props=mo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){hh(e,t,i)}}function hl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(s){hh(e,t,s)}}function ul(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(s){hh(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){hh(e,t,a)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){hh(e,e.return,s)}}function pl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,o=null,l=null,c=null,h=null,u=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":c=d;default:i.hasOwnProperty(f)||Jh(e,t,f,null,i,d)}}for(var p in i){var f=i[p];if(d=n[p],i.hasOwnProperty(p)&&(null!=f||null!=d))switch(p){case"type":a=f;break;case"name":s=f;break;case"checked":h=f;break;case"defaultChecked":u=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:f!==d&&Jh(e,t,p,f,i,d)}}return void mt(e,o,l,c,h,u,a,s);case"select":for(a in f=o=l=p=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":f=c;default:i.hasOwnProperty(a)||Jh(e,t,a,null,i,c)}for(s in i)if(a=i[s],c=n[s],i.hasOwnProperty(s)&&(null!=a||null!=c))switch(s){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&Jh(e,t,s,a,i,c)}return t=l,n=o,i=f,void(null!=p?yt(e,!!n,p,!1):!!i!==!!n&&(null!=t?yt(e,!!n,t,!0):yt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Jh(e,t,l,null,i,s)}for(o in i)if(s=i[o],a=n[o],i.hasOwnProperty(o)&&(null!=s||null!=a))switch(o){case"value":p=s;break;case"defaultValue":f=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(r(91));break;default:s!==a&&Jh(e,t,o,s,i,a)}return void wt(e,p,f);case"option":for(var g in n)if(p=n[g],n.hasOwnProperty(g)&&null!=p&&!i.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Jh(e,t,g,null,i,p);for(c in i)if(p=i[c],f=n[c],i.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Jh(e,t,c,p,i,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)p=n[m],n.hasOwnProperty(m)&&null!=p&&!i.hasOwnProperty(m)&&Jh(e,t,m,null,i,p);for(h in i)if(p=i[h],f=n[h],i.hasOwnProperty(h)&&p!==f&&(null!=p||null!=f))switch(h){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:Jh(e,t,h,p,i,f)}return;default:if(Et(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!i.hasOwnProperty(v)&&Zh(e,t,v,void 0,i,p);for(u in i)p=i[u],f=n[u],!i.hasOwnProperty(u)||p===f||void 0===p&&void 0===f||Zh(e,t,u,p,i,f);return}}for(var b in n)p=n[b],n.hasOwnProperty(b)&&null!=p&&!i.hasOwnProperty(b)&&Jh(e,t,b,null,i,p);for(d in i)p=i[d],f=n[d],!i.hasOwnProperty(d)||p===f||null==p&&null==f||Jh(e,t,d,p,i,f)}(i,e.type,n,t),i[Le]=t}catch(s){hh(e,e.return,s)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pu(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$h));else if(4!==i&&(27===i&&pu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function vl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&pu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);eu(t,i,n),t[Ne]=e,t[Le]=n}catch(a){hh(e,e.return,a)}}var yl=!1,wl=!1,xl=!1,Sl="function"===typeof WeakSet?WeakSet:Set,kl=null;function Al(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:jl(e,n),4&i&&rl(5,n);break;case 1:if(jl(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(r){hh(n,n.return,r)}else{var s=mo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){hh(n,n.return,o)}}64&i&&ll(n),512&i&&hl(n,n.return);break;case 3:if(jl(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{da(e,t)}catch(r){hh(n,n.return,r)}}break;case 27:null===t&&4&i&&bl(n);case 26:case 5:jl(e,n),null===t&&4&i&&dl(n),512&i&&hl(n,n.return);break;case 12:jl(e,n);break;case 13:jl(e,n),4&i&&Tl(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=fh.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||yl)){t=null!==t&&null!==t.memoizedState||wl,s=yl;var a=wl;yl=i,(wl=t)&&!a?Wl(e,n,0!==(8772&n.subtreeFlags)):jl(e,n),yl=s,wl=a}break;case 30:break;default:jl(e,n)}}function _l(e){var t=e.alternate;null!==t&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var El=null,Cl=!1;function Pl(e,t,n){for(n=n.child;null!==n;)Ml(e,t,n),n=n.sibling}function Ml(e,t,n){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(he,n)}catch(a){}switch(n.tag){case 26:wl||ul(n,t),Pl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||ul(n,t);var i=El,s=Cl;pu(n.type)&&(El=n.stateNode,Cl=!1),Pl(e,t,n),xu(n.stateNode),El=i,Cl=s;break;case 5:wl||ul(n,t);case 6:if(i=El,s=Cl,El=null,Pl(e,t,n),Cl=s,null!==(El=i))if(Cl)try{(9===El.nodeType?El.body:"HTML"===El.nodeName?El.ownerDocument.body:El).removeChild(n.stateNode)}catch(r){hh(n,t,r)}else try{El.removeChild(n.stateNode)}catch(r){hh(n,t,r)}break;case 18:null!==El&&(Cl?(fu(9===(e=El).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Cd(e)):fu(El,n.stateNode));break;case 4:i=El,s=Cl,El=n.stateNode.containerInfo,Cl=!0,Pl(e,t,n),El=i,Cl=s;break;case 0:case 11:case 14:case 15:wl||ol(2,n,t),wl||ol(4,n,t),Pl(e,t,n);break;case 1:wl||(ul(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&cl(n,t,i)),Pl(e,t,n);break;case 21:Pl(e,t,n);break;case 22:wl=(i=wl)||null!==n.memoizedState,Pl(e,t,n),wl=i;break;default:Pl(e,t,n)}}function Tl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Cd(e)}catch(n){hh(t,t.return,n)}}function Rl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){var i=gh.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}function Nl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(pu(l.type)){El=l.stateNode,Cl=!1;break e}break;case 5:El=l.stateNode,Cl=!1;break e;case 3:case 4:El=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===El)throw Error(r(160));Ml(a,o,s),El=null,Cl=!1,null!==(a=s.alternate)&&(a.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Dl(t,e),t=t.sibling}var Ll=null;function Dl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nl(t,e),Il(e),4&i&&(ol(3,e,e.return),rl(3,e),ol(5,e,e.return));break;case 1:Nl(t,e),Il(e),512&i&&(wl||null===n||ul(n,n.return)),64&i&&yl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var s=Ll;if(Nl(t,e),Il(e),512&i&&(wl||null===n||ul(n,n.return)),4&i){var a=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":(!(a=s.getElementsByTagName("title")[0])||a[We]||a[Ne]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=s.createElement(i),s.head.insertBefore(a,s.querySelector("head > title"))),eu(a,i,n),a[Ne]=e,Ge(a),i=a;break e;case"link":var o=Wu("link","href",s).get(i+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}eu(a=s.createElement(i),i,n),s.head.appendChild(a);break;case"meta":if(o=Wu("meta","content",s).get(i+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}eu(a=s.createElement(i),i,n),s.head.appendChild(a);break;default:throw Error(r(468,i))}a[Ne]=e,Ge(a),i=a}e.stateNode=i}else zu(s,e.type,e.stateNode);else e.stateNode=Du(s,i,e.memoizedProps);else a!==i?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===i?zu(s,e.type,e.stateNode):Du(s,i,e.memoizedProps)):null===i&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Nl(t,e),Il(e),512&i&&(wl||null===n||ul(n,n.return)),null!==n&&4&i&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Nl(t,e),Il(e),512&i&&(wl||null===n||ul(n,n.return)),32&e.flags){s=e.stateNode;try{St(s,"")}catch(f){hh(e,e.return,f)}}4&i&&null!=e.stateNode&&pl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&i&&(xl=!0);break;case 6:if(Nl(t,e),Il(e),4&i){if(null===e.stateNode)throw Error(r(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(f){hh(e,e.return,f)}}break;case 3:if(Ou=null,s=Ll,Ll=Au(t.containerInfo),Nl(t,e),Ll=s,Il(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Cd(t.containerInfo)}catch(f){hh(e,e.return,f)}xl&&(xl=!1,Fl(e));break;case 4:i=Ll,Ll=Au(e.stateNode.containerInfo),Nl(t,e),Il(e),Ll=i;break;case 12:default:Nl(t,e),Il(e);break;case 13:Nl(t,e),Il(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xc=te()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Rl(e,i)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,h=yl,u=wl;if(yl=h||s,wl=u||c,Nl(t,e),wl=u,yl=h,Il(e),8192&i)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||yl||wl||Ol(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,s)"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,p=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){hh(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(f){hh(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Rl(e,n))));break;case 19:Nl(t,e),Il(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Rl(e,i)));case 30:case 21:}}function Il(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(fl(i)){n=i;break}i=i.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var s=n.stateNode;vl(e,gl(e),s);break;case 5:var a=n.stateNode;32&n.flags&&(St(a,""),n.flags&=-33),vl(e,gl(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;ml(e,gl(e),o);break;default:throw Error(r(161))}}catch(l){hh(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function jl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Al(e,t.alternate,t),t=t.sibling}function Ol(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Ol(t);break;case 1:ul(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ol(t);break;case 27:xu(t.stateNode);case 26:case 5:ul(t,t.return),Ol(t);break;case 22:null===t.memoizedState&&Ol(t);break;default:Ol(t)}e=e.sibling}}function Wl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,s=e,a=t,r=a.flags;switch(a.tag){case 0:case 11:case 15:Wl(s,a,n),rl(4,a);break;case 1:if(Wl(s,a,n),"function"===typeof(s=(i=a).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){hh(i,i.return,c)}if(null!==(s=(i=a).updateQueue)){var o=i.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)ua(l[s],o)}catch(c){hh(i,i.return,c)}}n&&64&r&&ll(a),hl(a,a.return);break;case 27:bl(a);case 26:case 5:Wl(s,a,n),n&&null===i&&4&r&&dl(a),hl(a,a.return);break;case 12:Wl(s,a,n);break;case 13:Wl(s,a,n),n&&4&r&&Tl(s,a);break;case 22:null===a.memoizedState&&Wl(s,a,n),hl(a,a.return);break;case 30:break;default:Wl(s,a,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ds(n))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e))}function Hl(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ul(e,t,n,i),t=t.sibling}function Ul(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,n,i),2048&s&&rl(9,t);break;case 1:case 13:default:Hl(e,t,n,i);break;case 3:Hl(e,t,n,i),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e)));break;case 12:if(2048&s){Hl(e,t,n,i),e=t.stateNode;try{var a=t.memoizedProps,r=a.id,o=a.onPostCommit;"function"===typeof o&&o(r,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){hh(t,t.return,l)}}else Hl(e,t,n,i);break;case 23:break;case 22:a=t.stateNode,r=t.alternate,null!==t.memoizedState?2&a._visibility?Hl(e,t,n,i):Gl(e,t):2&a._visibility?Hl(e,t,n,i):(a._visibility|=2,Vl(e,t,n,i,0!==(10256&t.subtreeFlags))),2048&s&&zl(r,t);break;case 24:Hl(e,t,n,i),2048&s&&Bl(t.alternate,t)}}function Vl(e,t,n,i,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,r=t,o=n,l=i,c=r.flags;switch(r.tag){case 0:case 11:case 15:Vl(a,r,o,l,s),rl(8,r);break;case 23:break;case 22:var h=r.stateNode;null!==r.memoizedState?2&h._visibility?Vl(a,r,o,l,s):Gl(a,r):(h._visibility|=2,Vl(a,r,o,l,s)),s&&2048&c&&zl(r.alternate,r);break;case 24:Vl(a,r,o,l,s),s&&2048&c&&Bl(r.alternate,r);break;default:Vl(a,r,o,l,s)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:Gl(n,i),2048&s&&zl(i.alternate,i);break;case 24:Gl(n,i),2048&s&&Bl(i.alternate,i);break;default:Gl(n,i)}t=t.sibling}}var ql=8192;function Xl(e){if(e.subtreeFlags&ql)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Xl(e),e.flags&ql&&null!==e.memoizedState&&function(e,t,n){if(null===Hu)throw Error(r(475));var i=Hu;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Mu(n.href),a=e.querySelector(Tu(s));if(a)return null!==(e=a._p)&&"object"===typeof e&&"function"===typeof e.then&&(i.count++,i=Vu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=a,void Ge(a);a=e.ownerDocument||e,n=Ru(n),(s=Su.get(s))&&Fu(n,s),Ge(a=a.createElement("link"));var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eu(a,"link",n),t.instance=a}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(i.count++,t=Vu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:Xl(e);break;case 3:case 4:var t=Ll;Ll=Au(e.stateNode.containerInfo),Xl(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=ql,ql=16777216,Xl(e),ql=t):Xl(e))}}function Kl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];kl=i,Zl(i,e)}Kl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Ql(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Ql(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];kl=i,Zl(i,e)}Kl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Ds(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,kl=i;else e:for(n=e;null!==kl;){var s=(i=kl).sibling,a=i.return;if(_l(i),i===n){kl=null;break e}if(null!==s){s.return=a,kl=s;break e}kl=a}}}var ec={getCacheForType:function(e){var t=Es(Ns),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,ic=null,sc=null,ac=0,rc=0,oc=null,lc=!1,cc=!1,hc=!1,uc=0,dc=0,pc=0,fc=0,gc=0,mc=0,vc=0,bc=null,yc=null,wc=!1,xc=0,Sc=1/0,kc=null,Ac=null,_c=0,Ec=null,Cc=null,Pc=0,Mc=0,Tc=null,Rc=null,Nc=0,Lc=null;function Dc(){if(0!==(2&nc)&&0!==ac)return ac&-ac;if(null!==D.T){return 0!==js?js:Mh()}return Te()}function Ic(){0===mc&&(mc=0===(536870912&ac)||as?Se():536870912);var e=io.current;return null!==e&&(e.flags|=32),mc}function Fc(e,t,n){(e!==ic||2!==rc&&9!==rc)&&null===e.cancelPendingCommit||(Uc(e,0),zc(e,ac,mc,!1)),_e(e,n),0!==(2&nc)&&e===ic||(e===ic&&(0===(2&nc)&&(fc|=n),4===dc&&zc(e,ac,mc,!1)),Sh(e))}function jc(e,t,n){if(0!==(6&nc))throw Error(r(327));for(var i=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),s=i?function(e,t){var n=nc;nc|=2;var i=Gc(),s=qc();ic!==e||ac!==t?(kc=null,Sc=te()+500,Uc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==rc&&null!==sc){t=sc;var a=oc;t:switch(rc){case 1:rc=0,oc=null,Zc(e,t,a,1);break;case 2:case 9:if(Ks(a)){rc=0,oc=null,Jc(t);break}t=function(){2!==rc&&9!==rc||ic!==e||(rc=7),Sh(e)},a.then(t,t);break e;case 3:rc=7;break e;case 4:rc=5;break e;case 7:Ks(a)?(rc=0,oc=null,Jc(t)):(rc=0,oc=null,Zc(e,t,a,7));break;case 5:var o=null;switch(sc.tag){case 26:o=sc.memoizedState;case 5:case 27:var l=sc;if(!o||Bu(o)){rc=0,oc=null;var c=l.sibling;if(null!==c)sc=c;else{var h=l.return;null!==h?(sc=h,eh(h)):sc=null}break t}}rc=0,oc=null,Zc(e,t,a,5);break;case 6:rc=0,oc=null,Zc(e,t,a,6);break;case 8:Hc(),dc=6;break e;default:throw Error(r(462))}}Qc();break}catch(u){Vc(e,u)}return bs=vs=null,D.H=i,D.A=s,nc=n,null!==sc?0:(ic=null,ac=0,Pi(),dc)}(e,t):Yc(e,t,!0),a=i;;){if(0===s){cc&&!i&&zc(e,t,0,!1);break}if(n=e.current.alternate,!a||Wc(n)){if(2===s){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Uc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(hc&&!c){l.errorRecoveryDisabledLanes|=a,fc|=a,s=4;break e}a=yc,yc=s,null!==a&&(null===yc?yc=a:yc.push.apply(yc,a))}s=o}if(a=!1,2!==s)continue}}if(1===s){Uc(e,0),zc(e,t,0,!0);break}e:{switch(i=e,a=s){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:zc(i,t,mc,!lc);break e;case 2:yc=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(s=xc+300-te())){if(zc(i,t,mc,!lc),0!==ye(i,0,!0))break e;i.timeoutHandle=lu(Oc.bind(null,i,n,yc,kc,wc,t,mc,fc,vc,lc,a,2,-0,0),s)}else Oc(i,n,yc,kc,wc,t,mc,fc,vc,lc,a,0,-0,0)}break}s=Yc(e,t,!1),a=!1}Sh(e)}function Oc(e,t,n,i,s,a,o,l,c,h,u,d,p,f){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(Hu={stylesheets:null,count:0,unsuspend:Uu},Yl(t),null!==(d=function(){if(null===Hu)throw Error(r(475));var e=Hu;return e.stylesheets&&0===e.count&&qu(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&qu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(nh.bind(null,e,t,a,n,i,s,o,l,c,u,1,p,f)),void zc(e,a,o,!h);nh(e,t,a,n,i,s,o,l,c)}function Wc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var s=n[i],a=s.getSnapshot;s=s.value;try{if(!Kn(a(),s))return!1}catch(r){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,i){t&=~gc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var a=31-pe(s),r=1<<a;i[a]=-1,s&=~r}0!==n&&Ee(e,n,t)}function Bc(){return 0!==(6&nc)||(kh(0,!1),!1)}function Hc(){if(null!==sc){if(0===rc)var e=sc.return;else bs=vs=null,ja(e=sc),Yr=null,Kr=0,e=sc;for(;null!==e;)al(e.alternate,e),e=e.return;sc=null}}function Uc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc(),ic=e,sc=n=Oi(e.current,null),ac=t,rc=0,oc=null,lc=!1,cc=we(e,t),hc=!1,vc=mc=gc=fc=pc=dc=0,yc=bc=null,wc=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var s=31-pe(i),a=1<<s;t|=e[s],i&=~a}return uc=t,Pi(),n}function Vc(e,t){ya=null,D.H=Vr,t===Gs||t===Xs?(t=Zs(),rc=3):t===qs?(t=Zs(),rc=4):rc=t===Eo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===sc&&(dc=1,xo(e,Ai(t,e.current)))}function Gc(){var e=D.H;return D.H=Vr,null===e?Vr:e}function qc(){var e=D.A;return D.A=ec,e}function Xc(){dc=4,lc||(4194048&ac)!==ac&&null!==io.current||(cc=!0),0===(134217727&pc)&&0===(134217727&fc)||null===ic||zc(ic,ac,mc,!1)}function Yc(e,t,n){var i=nc;nc|=2;var s=Gc(),a=qc();ic===e&&ac===t||(kc=null,Uc(e,t)),t=!1;var r=dc;e:for(;;)try{if(0!==rc&&null!==sc){var o=sc,l=oc;switch(rc){case 8:Hc(),r=6;break e;case 3:case 2:case 9:case 6:null===io.current&&(t=!0);var c=rc;if(rc=0,oc=null,Zc(e,o,l,c),n&&cc){r=0;break e}break;default:c=rc,rc=0,oc=null,Zc(e,o,l,c)}}Kc(),r=dc;break}catch(h){Vc(e,h)}return t&&e.shellSuspendCounter++,bs=vs=null,nc=i,D.H=s,D.A=a,null===sc&&(ic=null,ac=0,Pi()),r}function Kc(){for(;null!==sc;)$c(sc)}function Qc(){for(;null!==sc&&!Z();)$c(sc)}function $c(e){var t=$o(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?eh(e):sc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fo(n,t,t.pendingProps,t.type,void 0,ac);break;case 11:t=Fo(n,t,t.pendingProps,t.type.render,t.ref,ac);break;case 5:ja(t);default:al(n,t),t=$o(n,t=sc=Wi(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?eh(e):sc=t}function Zc(e,t,n,i){bs=vs=null,ja(t),Yr=null,Kr=0;var s=t.return;try{if(function(e,t,n,i,s){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&ks(t,n,s,!0),null!==(n=io.current)){switch(n.tag){case 13:return null===so?Xc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Ys?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),uh(e,i,s)),!1;case 22:return n.flags|=65536,i===Ys?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),uh(e,i,s)),!1}throw Error(r(435,n.tag))}return uh(e,i,s),Xc(),!1}if(as)return null!==(t=io.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==ls&&gs(Ai(e=Error(r(422),{cause:i}),n))):(i!==ls&&gs(Ai(t=Error(r(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,i=Ai(i,n),oa(e,s=ko(e.stateNode,i,s)),4!==dc&&(dc=2)),!1;var a=Error(r(520),{cause:i});if(a=Ai(a,n),null===bc?bc=[a]:bc.push(a),4!==dc&&(dc=2),null===t)return!0;i=Ai(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,oa(n,e=ko(n.stateNode,i,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Ac||!Ac.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,_o(s=Ao(s),e,n,i),oa(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ac))return dc=1,xo(e,Ai(n,e.current)),void(sc=null)}catch(a){if(null!==s)throw sc=s,a;return dc=1,xo(e,Ai(n,e.current)),void(sc=null)}32768&t.flags?(as||1===i?e=!0:cc||0!==(536870912&ac)?e=!1:(lc=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=io.current)&&13===i.tag&&(i.flags|=16384))),th(t,e)):eh(t)}function eh(e){var t=e;do{if(0!==(32768&t.flags))return void th(t,lc);e=t.return;var n=il(t.alternate,t,uc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===dc&&(dc=5)}function th(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);dc=6,sc=null}function nh(e,t,n,i,s,a,o,l,c){e.cancelPendingCommit=null;do{oh()}while(0!==_c);if(0!==(6&nc))throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(a=t.lanes|t.childLanes,function(e,t,n,i,s,a){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=r&~n;0<n;){var h=31-pe(n),u=1<<h;o[h]=0,l[h]=-1;var d=c[h];if(null!==d)for(c[h]=null,h=0;h<d.length;h++){var p=d[h];null!==p&&(p.lane&=-536870913)}n&=~u}0!==i&&Ee(e,i,0),0!==a&&0===s&&0!==e.tag&&(e.suspendedLanes|=a&~(r&~t))}(e,n,a|=Ci,o,l,c),e===ic&&(sc=ic=null,ac=0),Cc=t,Ec=e,Pc=n,Mc=a,Tc=s,Rc=i,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,$(ae,function(){return lh(),null})):(e.callbackNode=null,e.callbackPriority=0),i=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||i){i=D.T,D.T=null,s=I.p,I.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,tu=nd,ti(e=ei(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(m){n=null;break e}var o=0,l=-1,c=-1,h=0,u=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++h===s&&(l=o),p===a&&++u===i&&(c=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:e,selectionRange:n},nd=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(a=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var g=mo(n.type,s,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(g,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(v){hh(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{nc=o,I.p=s,D.T=i}}_c=1,ih(),sh(),ah()}}function ih(){if(1===_c){_c=0;var e=Ec,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var i=I.p;I.p=2;var s=nc;nc|=4;try{Dl(t,e);var a=nu,r=ei(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(r!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&ti(o)){var c=l.start,h=l.end;if(void 0===h&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var u=o.ownerDocument||document,d=u&&u.defaultView||window;if(d.getSelection){var p=d.getSelection(),f=o.textContent.length,g=Math.min(l.start,f),m=void 0===l.end?g:Math.min(l.end,f);!p.extend&&g>m&&(r=m,m=g,g=r);var v=Jn(o,g),b=Jn(o,m);if(v&&b&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==b.node||p.focusOffset!==b.offset)){var y=u.createRange();y.setStart(v.node,v.offset),p.removeAllRanges(),g>m?(p.addRange(y),p.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),p.addRange(y))}}}}for(u=[],p=o;p=p.parentNode;)1===p.nodeType&&u.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<u.length;o++){var w=u[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nd=!!tu,nu=tu=null}finally{nc=s,I.p=i,D.T=n}}e.current=t,_c=2}}function sh(){if(2===_c){_c=0;var e=Ec,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var i=I.p;I.p=2;var s=nc;nc|=4;try{Al(e,t.alternate,t)}finally{nc=s,I.p=i,D.T=n}}_c=3}}function ah(){if(4===_c||3===_c){_c=0,ee();var e=Ec,t=Cc,n=Pc,i=Rc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?_c=5:(_c=0,Cc=Ec=null,rh(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Ac=null),Me(n),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(he,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==i){t=D.T,s=I.p,I.p=2,D.T=null;try{for(var a=e.onRecoverableError,r=0;r<i.length;r++){var o=i[r];a(o.value,{componentStack:o.stack})}}finally{D.T=t,I.p=s}}0!==(3&Pc)&&oh(),Sh(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Lc?Nc++:(Nc=0,Lc=e):Nc=0,kh(0,!1)}}function rh(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ds(t)))}function oh(e){return ih(),sh(),ah(),lh()}function lh(){if(5!==_c)return!1;var e=Ec,t=Mc;Mc=0;var n=Me(Pc),i=D.T,s=I.p;try{I.p=32>n?32:n,D.T=null,n=Tc,Tc=null;var a=Ec,o=Pc;if(_c=0,Cc=Ec=null,Pc=0,0!==(6&nc))throw Error(r(331));var l=nc;if(nc|=4,$l(a.current),Ul(a,a.current,o,n),nc=l,kh(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(he,a)}catch(c){}return!0}finally{I.p=s,D.T=i,rh(e,t)}}function ch(e,t,n){t=Ai(n,t),null!==(e=aa(e,t=ko(e.stateNode,t,2),2))&&(_e(e,2),Sh(e))}function hh(e,t,n){if(3===e.tag)ch(e,e,n);else for(;null!==t;){if(3===t.tag){ch(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Ac||!Ac.has(i))){e=Ai(n,e),null!==(i=aa(t,n=Ao(2),2))&&(_o(n,i,t,e),_e(i,2),Sh(i));break}}t=t.return}}function uh(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new tc;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(n)||(hc=!0,s.add(n),e=dh.bind(null,e,t,n),t.then(e,e))}function dh(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(ac&n)===n&&(4===dc||3===dc&&(62914560&ac)===ac&&300>te()-xc?0===(2&nc)&&Uc(e,0):gc|=n,vc===ac&&(vc=0)),Sh(e)}function ph(e,t){0===t&&(t=ke()),null!==(e=Ri(e,t))&&(_e(e,t),Sh(e))}function fh(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ph(e,n)}function gh(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==i&&i.delete(t),ph(e,n)}var mh=null,vh=null,bh=!1,yh=!1,wh=!1,xh=0;function Sh(e){e!==vh&&null===e.next&&(null===vh?mh=vh=e:vh=vh.next=e),yh=!0,bh||(bh=!0,uu(function(){0!==(6&nc)?$(ie,Ah):_h()}))}function kh(e,t){if(!wh&&yh){wh=!0;do{for(var n=!1,i=mh;null!==i;){if(!t)if(0!==e){var s=i.pendingLanes;if(0===s)var a=0;else{var r=i.suspendedLanes,o=i.pingedLanes;a=(1<<31-pe(42|e)+1)-1,a=201326741&(a&=s&~(r&~o))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Ph(i,a))}else a=ac,0===(3&(a=ye(i,i===ic?a:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||we(i,a)||(n=!0,Ph(i,a));i=i.next}}while(n);wh=!1}}function Ah(){_h()}function _h(){yh=bh=!1;var e=0;0!==xh&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ou&&(ou=e,!0);return ou=null,!1}()&&(e=xh),xh=0);for(var t=te(),n=null,i=mh;null!==i;){var s=i.next,a=Eh(i,t);0===a?(i.next=null,null===n?mh=s:n.next=s,null===s&&(vh=n)):(n=i,(0!==e||0!==(3&a))&&(yh=!0)),i=s}kh(e,!1)}function Eh(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var r=31-pe(a),o=1<<r,l=s[r];-1===l?0!==(o&n)&&0===(o&i)||(s[r]=xe(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=ac,n=ye(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===rc||9===rc)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&J(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&J(i),Me(n)){case 2:case 8:n=se;break;case 32:default:n=ae;break;case 268435456:n=oe}return i=Ch.bind(null,e),n=$(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&J(i),e.callbackPriority=2,e.callbackNode=null,2}function Ch(e,t){if(0!==_c&&5!==_c)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(oh()&&e.callbackNode!==n)return null;var i=ac;return 0===(i=ye(e,e===ic?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(jc(e,i,t),Eh(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ch.bind(null,e):null)}function Ph(e,t){if(oh())return null;jc(e,t,!0)}function Mh(){return 0===xh&&(xh=Se()),xh}function Th(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Mt(""+e)}function Rh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Nh=0;Nh<xi.length;Nh++){var Lh=xi[Nh];Si(Lh.toLowerCase(),"on"+(Lh[0].toUpperCase()+Lh.slice(1)))}Si(pi,"onAnimationEnd"),Si(fi,"onAnimationIteration"),Si(gi,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(mi,"onTransitionRun"),Si(vi,"onTransitionStart"),Si(bi,"onTransitionCancel"),Si(yi,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ih=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dh));function Fh(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var r=i.length-1;0<=r;r--){var o=i[r],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(h){vo(h)}s.currentTarget=null,a=l}else for(r=0;r<i.length;r++){if(l=(o=i[r]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(h){vo(h)}s.currentTarget=null,a=l}}}}function jh(e,t){var n=t[Ie];void 0===n&&(n=t[Ie]=new Set);var i=e+"__bubble";n.has(i)||(Bh(t,e,2,!1),n.add(i))}function Oh(e,t,n){var i=0;t&&(i|=4),Bh(n,e,i,t)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function zh(e){if(!e[Wh]){e[Wh]=!0,qe.forEach(function(t){"selectionchange"!==t&&(Ih.has(t)||Oh(t,!1,e),Oh(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wh]||(t[Wh]=!0,Oh("selectionchange",!1,t))}}function Bh(e,t,n,i){switch(cd(t)){case 2:var s=id;break;case 8:s=sd;break;default:s=ad}n=s.bind(null,t,n,e),s=void 0,!Wt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hh(e,t,n,i,s){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var r=i.tag;if(3===r||4===r){var o=i.stateNode.containerInfo;if(o===s)break;if(4===r)for(r=i.return;null!==r;){var c=r.tag;if((3===c||4===c)&&r.stateNode.containerInfo===s)return;r=r.return}for(;null!==o;){if(null===(r=Be(o)))return;if(5===(c=r.tag)||6===c||26===c||27===c){i=a=r;continue e}o=o.parentNode}}i=i.return}Ft(function(){var i=a,s=Rt(n),r=[];e:{var o=wi.get(e);if(void 0!==o){var c=Zt,h=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":h="focus",c=rn;break;case"focusout":h="blur",c=rn;break;case"beforeblur":case"afterblur":c=rn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case pi:case fi:case gi:c=on;break;case yi:c=bn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=yn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=mn;break;case"toggle":case"beforetoggle":c=wn}var u=0!==(4&t),d=!u&&("scroll"===e||"scrollend"===e),p=u?null!==o?o+"Capture":null:o;u=[];for(var f,g=i;null!==g;){var m=g;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===p||null!=(m=jt(g,p))&&u.push(Uh(g,m,f)),d)break;g=g.return}0<u.length&&(o=new c(o,h,null,n,s),r.push({event:o,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Tt||!(h=n.relatedTarget||n.fromElement)||!Be(h)&&!h[De])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=i,null!==(h=(h=n.relatedTarget||n.toElement)?Be(h):null)&&(d=l(h),u=h.tag,h!==d||5!==u&&27!==u&&6!==u)&&(h=null)):(c=null,h=i),c!==h)){if(u=sn,m="onMouseLeave",p="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=mn,m="onPointerLeave",p="onPointerEnter",g="pointer"),d=null==c?o:Ue(c),f=null==h?o:Ue(h),(o=new u(m,g+"leave",c,n,s)).target=d,o.relatedTarget=f,m=null,Be(s)===i&&((u=new u(p,g+"enter",h,n,s)).target=f,u.relatedTarget=d,m=u),d=m,c&&h)e:{for(p=h,g=0,f=u=c;f;f=Gh(f))g++;for(f=0,m=p;m;m=Gh(m))f++;for(;0<g-f;)u=Gh(u),g--;for(;0<f-g;)p=Gh(p),f--;for(;g--;){if(u===p||null!==p&&u===p.alternate)break e;u=Gh(u),p=Gh(p)}u=null}else u=null;null!==c&&qh(r,o,c,u,!1),null!==h&&null!==d&&qh(r,d,h,u,!0)}if("select"===(c=(o=i?Ue(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=On;else if(Nn(o))if(Wn)v=Yn;else{v=qn;var b=Gn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?i&&Et(i.elementType)&&(v=On):v=Xn;switch(v&&(v=v(e,i))?Ln(r,v,n,s):(b&&b(e,o,i),"focusout"===e&&i&&"number"===o.type&&null!=i.memoizedProps.value&&bt(o,"number",o.value)),b=i?Ue(i):window,e){case"focusin":(Nn(b)||"true"===b.contentEditable)&&(ii=b,si=i,ai=null);break;case"focusout":ai=si=ii=null;break;case"mousedown":ri=!0;break;case"contextmenu":case"mouseup":case"dragend":ri=!1,oi(r,n,s);break;case"selectionchange":if(ni)break;case"keydown":case"keyup":oi(r,n,s)}var y;if(Sn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Tn?Pn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(_n&&"ko"!==n.locale&&(Tn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Tn&&(y=Vt()):(Ht="value"in(Bt=s)?Bt.value:Bt.textContent,Tn=!0)),0<(b=Vh(i,w)).length&&(w=new cn(w,e,null,n,s),r.push({event:w,listeners:b}),y?w.data=y:null!==(y=Mn(n))&&(w.data=y))),(y=An?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(Cn=!0,En);case"textInput":return(e=t.data)===En&&Cn?null:e;default:return null}}(e,n):function(e,t){if(Tn)return"compositionend"===e||!Sn&&Pn(e,t)?(e=Vt(),Ut=Ht=Bt=null,Tn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Vh(i,"onBeforeInput")).length&&(b=new cn("onBeforeInput","beforeinput",null,n,s),r.push({event:b,listeners:w}),b.data=y)),function(e,t,n,i,s){if("submit"===t&&n&&n.stateNode===s){var a=Th((s[Le]||null).action),r=i.submitter;r&&null!==(t=(t=r[Le]||null)?Th(t.formAction):r.getAttribute("formAction"))&&(a=t,r=null);var o=new Zt("action","action",null,i,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==xh){var e=r?Rh(s,r):new FormData(s);Tr(n,{pending:!0,data:e,method:s.method,action:a},null,e)}}else"function"===typeof a&&(o.preventDefault(),e=r?Rh(s,r):new FormData(s),Tr(n,{pending:!0,data:e,method:s.method,action:a},a,e))},currentTarget:s}]})}}(r,e,i,n,s)}Fh(r,t)})}function Uh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vh(e,t){for(var n=t+"Capture",i=[];null!==e;){var s=e,a=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===a||(null!=(s=jt(e,n))&&i.unshift(Uh(e,s,a)),null!=(s=jt(e,t))&&i.push(Uh(e,s,a))),3===e.tag)return i;e=e.return}return[]}function Gh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qh(e,t,n,i,s){for(var a=t._reactName,r=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===i)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=jt(n,a))&&r.unshift(Uh(n,c,l)):s||null!=(c=jt(n,a))&&r.push(Uh(n,c,l))),n=n.return}0!==r.length&&e.push({event:t,listeners:r})}var Xh=/\r\n?/g,Yh=/\u0000|\uFFFD/g;function Kh(e){return("string"===typeof e?e:""+e).replace(Xh,"\n").replace(Yh,"")}function Qh(e,t){return t=Kh(t),Kh(e)===t}function $h(){}function Jh(e,t,n,i,s,a){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||St(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&St(e,""+i);break;case"className":nt(e,"class",i);break;case"tabIndex":nt(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,i);break;case"style":_t(e,i,a);break;case"data":if("object"!==t){nt(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Mt(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&Jh(e,t,"name",s.name,s,null),Jh(e,t,"formEncType",s.formEncType,s,null),Jh(e,t,"formMethod",s.formMethod,s,null),Jh(e,t,"formTarget",s.formTarget,s,null)):(Jh(e,t,"encType",s.encType,s,null),Jh(e,t,"method",s.method,s,null),Jh(e,t,"target",s.target,s,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Mt(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=$h);break;case"onScroll":null!=i&&jh("scroll",e);break;case"onScrollEnd":null!=i&&jh("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=Mt(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":jh("beforetoggle",e),jh("toggle",e),tt(e,"popover",i);break;case"xlinkActuate":it(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":it(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":it(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":it(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":it(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":it(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":it(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":it(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":it(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":tt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,i)}}function Zh(e,t,n,i,s,a){switch(n){case"style":_t(e,i,a);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"===typeof i?St(e,i):("number"===typeof i||"bigint"===typeof i)&&St(e,""+i);break;case"onScroll":null!=i&&jh("scroll",e);break;case"onScrollEnd":null!=i&&jh("scrollend",e);break;case"onClick":null!=i&&(e.onclick=$h);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Xe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(a=null!=(a=e[Le]||null)?a[n]:null)&&e.removeEventListener(t,a,s),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):tt(e,n,i):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s)))}}function eu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jh("error",e),jh("load",e);var i,s=!1,a=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Jh(e,t,i,o,n,null)}}return a&&Jh(e,t,"srcSet",n.srcSet,n,null),void(s&&Jh(e,t,"src",n.src,n,null));case"input":jh("invalid",e);var l=i=o=a=null,c=null,h=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(null!=u)switch(s){case"name":a=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":h=u;break;case"value":i=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(r(137,t));break;default:Jh(e,t,s,u,n,null)}}return vt(e,i,l,c,h,o,a,!1),void ut(e);case"select":for(a in jh("invalid",e),s=o=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Jh(e,t,a,l,n,null)}return t=i,n=o,e.multiple=!!s,void(null!=t?yt(e,!!s,t,!1):null!=n&&yt(e,!!s,n,!0));case"textarea":for(o in jh("invalid",e),i=a=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:Jh(e,t,o,l,n,null)}return xt(e,s,a,i),void ut(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Jh(e,t,c,s,n,null);return;case"dialog":jh("beforetoggle",e),jh("toggle",e),jh("cancel",e),jh("close",e);break;case"iframe":case"object":jh("load",e);break;case"video":case"audio":for(s=0;s<Dh.length;s++)jh(Dh[s],e);break;case"image":jh("error",e),jh("load",e);break;case"details":jh("toggle",e);break;case"embed":case"source":case"link":jh("error",e),jh("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&null!=(s=n[h]))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Jh(e,t,h,s,n,null)}return;default:if(Et(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(s=n[u])&&Zh(e,t,u,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Jh(e,t,l,s,n,null))}var tu=null,nu=null;function iu(e){return 9===e.nodeType?e:e.ownerDocument}function su(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function au(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ru(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ou=null;var lu="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,hu="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof hu?function(e){return hu.resolve(null).then(e).catch(du)}:lu;function du(e){setTimeout(function(){throw e})}function pu(e){return"head"===e}function fu(e,t){var n=t,i=0,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0<i&&8>i){n=i;var r=e.ownerDocument;if(1&n&&xu(r.documentElement),2&n&&xu(r.body),4&n)for(xu(n=r.head),r=n.firstChild;r;){var o=r.nextSibling,l=r.nodeName;r[We]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===r.rel.toLowerCase()||n.removeChild(r),r=o}}if(0===s)return e.removeChild(a),void Cd(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:i=n.charCodeAt(0)-48;else i=0;n=a}while(n);Cd(t)}function gu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gu(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function mu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bu=null;function yu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wu(e,t,n){switch(t=iu(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function xu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var Su=new Map,ku=new Set;function Au(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _u=I.d;I.d={f:function(){var e=_u.f(),t=Bc();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?Nr(t):_u.r(e)},D:function(e){_u.D(e),Cu("dns-prefetch",e,null)},C:function(e,t){_u.C(e,t),Cu("preconnect",e,t)},L:function(e,t,n){_u.L(e,t,n);var i=Eu;if(i&&e&&t){var s='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+gt(n.imageSizes)+'"]')):s+='[href="'+gt(e)+'"]';var a=s;switch(t){case"style":a=Mu(e);break;case"script":a=Nu(e)}Su.has(a)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Su.set(a,e),null!==i.querySelector(s)||"style"===t&&i.querySelector(Tu(a))||"script"===t&&i.querySelector(Lu(a))||(eu(t=i.createElement("link"),"link",e),Ge(t),i.head.appendChild(t)))}},m:function(e,t){_u.m(e,t);var n=Eu;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+gt(i)+'"][href="'+gt(e)+'"]',a=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Nu(e)}if(!Su.has(a)&&(e=d({rel:"modulepreload",href:e},t),Su.set(a,e),null===n.querySelector(s))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Lu(a)))return}eu(i=n.createElement("link"),"link",e),Ge(i),n.head.appendChild(i)}}},X:function(e,t){_u.X(e,t);var n=Eu;if(n&&e){var i=Ve(n).hoistableScripts,s=Nu(e),a=i.get(s);a||((a=n.querySelector(Lu(s)))||(e=d({src:e,async:!0},t),(t=Su.get(s))&&ju(e,t),Ge(a=n.createElement("script")),eu(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(s,a))}},S:function(e,t,n){_u.S(e,t,n);var i=Eu;if(i&&e){var s=Ve(i).hoistableStyles,a=Mu(e);t=t||"default";var r=s.get(a);if(!r){var o={loading:0,preload:null};if(r=i.querySelector(Tu(a)))o.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Su.get(a))&&Fu(e,n);var l=r=i.createElement("link");Ge(l),eu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Iu(r,t,i)}r={type:"stylesheet",instance:r,count:1,state:o},s.set(a,r)}}},M:function(e,t){_u.M(e,t);var n=Eu;if(n&&e){var i=Ve(n).hoistableScripts,s=Nu(e),a=i.get(s);a||((a=n.querySelector(Lu(s)))||(e=d({src:e,async:!0,type:"module"},t),(t=Su.get(s))&&ju(e,t),Ge(a=n.createElement("script")),eu(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(s,a))}}};var Eu="undefined"===typeof document?null:document;function Cu(e,t,n){var i=Eu;if(i&&"string"===typeof t&&t){var s=gt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),ku.has(s)||(ku.add(s),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(s)&&(eu(t=i.createElement("link"),"link",e),Ge(t),i.head.appendChild(t)))}}function Pu(e,t,n,i){var s,a,o,l,c=(c=V.current)?Au(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Mu(n.href),(i=(n=Ve(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Mu(n.href);var h=Ve(c).hoistableStyles,u=h.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,u),(h=c.querySelector(Tu(e)))&&!h._p&&(u.instance=h,u.state.loading=5),Su.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Su.set(e,n),h||(s=c,a=e,o=n,l=u.state,s.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=s.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),eu(a,"link",o),Ge(a),s.head.appendChild(a))))),t&&null===i)throw Error(r(528,""));return u}if(t&&null!==i)throw Error(r(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Nu(n),(i=(n=Ve(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Mu(e){return'href="'+gt(e)+'"'}function Tu(e){return'link[rel="stylesheet"]['+e+"]"}function Ru(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Nu(e){return'[src="'+gt(e)+'"]'}function Lu(e){return"script[async]"+e}function Du(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(i)return t.instance=i,Ge(i),i;var s=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(i=(e.ownerDocument||e).createElement("style")),eu(i,"style",s),Iu(i,n.precedence,e),t.instance=i;case"stylesheet":s=Mu(n.href);var a=e.querySelector(Tu(s));if(a)return t.state.loading|=4,t.instance=a,Ge(a),a;i=Ru(n),(s=Su.get(s))&&Fu(i,s),Ge(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eu(a,"link",i),t.state.loading|=4,Iu(a,n.precedence,e),t.instance=a;case"script":return a=Nu(n.src),(s=e.querySelector(Lu(a)))?(t.instance=s,Ge(s),s):(i=n,(s=Su.get(a))&&ju(i=d({},n),s),Ge(s=(e=e.ownerDocument||e).createElement("script")),eu(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Iu(i,n.precedence,e));return t.instance}function Iu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,a=s,r=0;r<i.length;r++){var o=i[r];if(o.dataset.precedence===t)a=o;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function ju(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ou=null;function Wu(e,t,n){if(null===Ou){var i=new Map,s=Ou=new Map;s.set(n,i)}else(i=(s=Ou).get(n))||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var a=n[s];if(!(a[We]||a[Ne]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var r=a.getAttribute(t)||"";r=e+r;var o=i.get(r);o?o.push(a):i.set(r,[a])}}return i}function zu(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Hu=null;function Uu(){}function Vu(){if(this.count--,0===this.count)if(this.stylesheets)qu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gu=null;function qu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gu=new Map,t.forEach(Xu,e),Gu=null,Vu.call(e))}function Xu(e,t){if(!(4&t.state.loading)){var n=Gu.get(e);if(n)var i=n.get(null);else{n=new Map,Gu.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var r=s[a];"LINK"!==r.nodeName&&"not all"===r.getAttribute("media")||(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}r=(s=t.instance).getAttribute("data-precedence"),(a=n.get(r)||i)===i&&n.set(null,s),n.set(r,s),this.count++,i=Vu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),a?a.parentNode.insertBefore(s,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Yu={$$typeof:x,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Ku(e,t,n,i,s,a,r,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Qu(e,t,n,i,s,a,r,o,l,c,h,u){return e=new Ku(e,t,n,r,o,l,c,u),t=1,!0===a&&(t|=24),a=Fi(3,null,null,t),e.current=a,a.stateNode=e,(t=Ls()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:t},na(a),e}function $u(e){return e?e=Di:Di}function Ju(e,t,n,i,s,a){s=$u(s),null===i.context?i.context=s:i.pendingContext=s,(i=sa(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(i.callback=a),null!==(n=aa(e,i,t))&&(Fc(n,0,t),ra(n,e,t))}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ed(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}function td(e){if(13===e.tag){var t=Ri(e,67108864);null!==t&&Fc(t,0,67108864),ed(e,67108864)}}var nd=!0;function id(e,t,n,i){var s=D.T;D.T=null;var a=I.p;try{I.p=2,ad(e,t,n,i)}finally{I.p=a,D.T=s}}function sd(e,t,n,i){var s=D.T;D.T=null;var a=I.p;try{I.p=8,ad(e,t,n,i)}finally{I.p=a,D.T=s}}function ad(e,t,n,i){if(nd){var s=rd(i);if(null===s)Hh(e,t,i,od,n),bd(e,i);else if(function(e,t,n,i,s){switch(t){case"focusin":return ud=yd(ud,e,t,n,i,s),!0;case"dragenter":return dd=yd(dd,e,t,n,i,s),!0;case"mouseover":return pd=yd(pd,e,t,n,i,s),!0;case"pointerover":var a=s.pointerId;return fd.set(a,yd(fd.get(a)||null,e,t,n,i,s)),!0;case"gotpointercapture":return a=s.pointerId,gd.set(a,yd(gd.get(a)||null,e,t,n,i,s)),!0}return!1}(s,e,t,n,i))i.stopPropagation();else if(bd(e,i),4&t&&-1<vd.indexOf(e)){for(;null!==s;){var a=He(s);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var r=be(a.pendingLanes);if(0!==r){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;r;){var l=1<<31-pe(r);o.entanglements[1]|=l,r&=~l}Sh(a),0===(6&nc)&&(Sc=te()+500,kh(0,!1))}}break;case 13:null!==(o=Ri(a,2))&&Fc(o,0,2),Bc(),ed(a,2)}if(null===(a=rd(i))&&Hh(e,t,i,od,n),a===s)break;s=a}null!==s&&i.stopPropagation()}else Hh(e,t,i,null,n)}}function rd(e){return ld(e=Rt(e))}var od=null;function ld(e){if(od=null,null!==(e=Be(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return od=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ie:return 2;case se:return 8;case ae:case re:return 32;case oe:return 268435456;default:return 32}default:return 32}}var hd=!1,ud=null,dd=null,pd=null,fd=new Map,gd=new Map,md=[],vd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bd(e,t){switch(e){case"focusin":case"focusout":ud=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":fd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gd.delete(t.pointerId)}}function yd(e,t,n,i,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=He(t))&&td(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function wd(e){var t=Be(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}(e.priority,function(){if(13===n.tag){var e=Dc();e=Pe(e);var t=Ri(n,e);null!==t&&Fc(t,0,e),ed(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=rd(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&td(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Tt=i,n.target.dispatchEvent(i),Tt=null,t.shift()}return!0}function Sd(e,t,n){xd(e)&&n.delete(t)}function kd(){hd=!1,null!==ud&&xd(ud)&&(ud=null),null!==dd&&xd(dd)&&(dd=null),null!==pd&&xd(pd)&&(pd=null),fd.forEach(Sd),gd.forEach(Sd)}function Ad(e,t){e.blockedOn===t&&(e.blockedOn=null,hd||(hd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,kd)))}var _d=null;function Ed(e){_d!==e&&(_d=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){_d===e&&(_d=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if("function"!==typeof i){if(null===ld(i||n))continue;break}var a=He(n);null!==a&&(e.splice(t,3),t-=3,Tr(a,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Cd(e){function t(t){return Ad(t,e)}null!==ud&&Ad(ud,e),null!==dd&&Ad(dd,e),null!==pd&&Ad(pd,e),fd.forEach(t),gd.forEach(t);for(var n=0;n<md.length;n++){var i=md[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<md.length&&null===(n=md[0]).blockedOn;)wd(n),null===n.blockedOn&&md.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var s=n[i],a=n[i+1],r=s[Le]||null;if("function"===typeof a)r||Ed(n);else if(r){var o=null;if(a&&a.hasAttribute("formAction")){if(s=a,r=a[Le]||null)o=r.formAction;else if(null!==ld(s))continue}else o=r.action;"function"===typeof o?n[i+1]=o:(n.splice(i,3),i-=3),Ed(n)}}}function Pd(e){this._internalRoot=e}function Md(e){this._internalRoot=e}Md.prototype.render=Pd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Ju(t.current,Dc(),e,t,null,null)},Md.prototype.unmount=Pd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Ju(e.current,2,null,e,null,null),Bc(),t[De]=null}},Md.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var n=0;n<md.length&&0!==t&&t<md[n].priority;n++);md.splice(n,0,e),0===n&&wd(e)}};var Td=s.version;if("19.1.1"!==Td)throw Error(r(527,Td,"19.1.1"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(i=s.return)){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return h(s),e;if(a===i)return h(s),t;a=a.sibling}throw Error(r(188))}if(n.return!==i.return)n=s,i=a;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,i=a;break}if(c===i){o=!0,i=s,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,i=s;break}if(c===i){o=!0,i=a,n=s;break}c=c.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Rd={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{he=Nd.inject(Rd),ue=Nd}catch(Dd){}}t.createRoot=function(e,t){if(!o(e))throw Error(r(299));var n=!1,i="",s=bo,a=yo,l=wo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qu(e,1,!1,null,0,n,i,s,a,l,0,null),e[De]=t.current,zh(e),new Pd(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(r(299));var i=!1,s="",a=bo,l=yo,c=wo,h=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(h=n.formState)),(t=Qu(e,1,!0,t,0,i,s,a,l,c,0,h)).context=$u(null),n=t.current,(s=sa(i=Pe(i=Dc()))).callback=null,aa(n,s,i),n=i,t.current.lanes=n,_e(t,n),Sh(t),e[De]=t.current,zh(e),new Md(t)},t.version="19.1.1"},27:function(e,t){!function(e){"use strict";class t{constructor(e,t){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=t,this.nowDrawingDensity=this.createdDensity,this.render=e}setDensity(e){this.createdDensity=e,this.nowDrawingDensity=e}setDrawingDensity(e){this.nowDrawingDensity=e}setPosition(e){this.state.position=e}setAngle(e){this.state.angle=e}setArea(e){this.state.area=e}setHardDrawingAngle(e){this.state.hardDrawingAngle=e}setHardAngle(e){this.state.hardAngle=e,this.state.hardDrawingAngle=e}setOrientation(e){this.orientation=e}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class n extends t{constructor(e,t,n){super(e,n),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=t}draw(e){const t=this.render.getContext(),n=this.render.convertToGlobal(this.state.position),i=this.render.getRect().pageWidth,s=this.render.getRect().height;t.save(),t.translate(n.x,n.y),t.beginPath();for(let a of this.state.area)null!==a&&(a=this.render.convertToGlobal(a),t.lineTo(a.x-n.x,a.y-n.y));t.rotate(this.state.angle),t.clip(),this.isLoad?t.drawImage(this.image,0,0,i,s):this.drawLoader(t,{x:0,y:0},i,s),t.restore()}simpleDraw(e){const t=this.render.getRect(),n=this.render.getContext(),i=t.pageWidth,s=t.height,a=1===e?t.left+t.pageWidth:t.left,r=t.top;this.isLoad?n.drawImage(this.image,a,r,i,s):this.drawLoader(n,{x:a,y:r},i,s)}drawLoader(e,t,n,i){e.beginPath(),e.strokeStyle="rgb(200, 200, 200)",e.fillStyle="rgb(255, 255, 255)",e.lineWidth=1,e.rect(t.x+1,t.y+1,n-1,i-1),e.stroke(),e.fill();const s={x:t.x+n/2,y:t.y+i/2};e.beginPath(),e.lineWidth=10,e.arc(s.x,s.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),e.stroke(),e.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class i{constructor(e,t){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=t,this.app=e,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let e=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([e]),e++);for(let t=e;t<this.pages.length;t+=2)t<this.pages.length-1?this.landscapeSpread.push([t,t+1]):(this.landscapeSpread.push([t]),this.pages[t].setDensity("hard"))}getSpread(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(e){const t=this.getSpread();for(let n=0;n<t.length;n++)if(e===t[n][0]||e===t[n][1])return n;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(e){if(e>=0&&e<this.pages.length)return this.pages[e];throw new Error("Invalid page number")}nextBy(e){const t=this.pages.indexOf(e);return t<this.pages.length-1?this.pages[t+1]:null}prevBy(e){const t=this.pages.indexOf(e);return t>0?this.pages[t-1]:null}getFlippingPage(e){const t=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===e?this.pages[t].newTemporaryCopy():this.pages[t-1];{const n=0===e?this.getSpread()[t+1]:this.getSpread()[t-1];return 1===n.length||0===e?this.pages[n[0]]:this.pages[n[1]]}}getBottomPage(e){const t=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===e?this.pages[t+1]:this.pages[t-1];{const n=0===e?this.getSpread()[t+1]:this.getSpread()[t-1];return 1===n.length?this.pages[n[0]]:0===e?this.pages[n[1]]:this.pages[n[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e&&(e=this.currentPageIndex),e<0||e>=this.pages.length)return;const t=this.getSpreadIndexByPage(e);null!==t&&(this.currentSpreadIndex=t,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(e){if(!(e>=0&&e<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=e}showSpread(){const e=this.getSpread()[this.currentSpreadIndex];2===e.length?(this.render.setLeftPage(this.pages[e[0]]),this.render.setRightPage(this.pages[e[1]])):"landscape"===this.render.getOrientation()&&e[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[e[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[e[0]])),this.currentPageIndex=e[0],this.app.updatePageIndex(this.currentPageIndex)}}class s extends i{constructor(e,t,n){super(e,t),this.imagesHref=n}load(){for(const e of this.imagesHref){const t=new n(this.render,e,"soft");t.load(),this.pages.push(t)}this.createSpread()}}class a{static GetDistanceBetweenTwoPoint(e,t){return null===e||null===t?1/0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static GetSegmentLength(e){return a.GetDistanceBetweenTwoPoint(e[0],e[1])}static GetAngleBetweenTwoLine(e,t){const n=e[0].y-e[1].y,i=t[0].y-t[1].y,s=e[1].x-e[0].x,a=t[1].x-t[0].x;return Math.acos((n*i+s*a)/(Math.sqrt(n*n+s*s)*Math.sqrt(i*i+a*a)))}static PointInRect(e,t){return null===t?null:t.x>=e.left&&t.x<=e.width+e.left&&t.y>=e.top&&t.y<=e.top+e.height?t:null}static GetRotatedPoint(e,t,n){return{x:e.x*Math.cos(n)+e.y*Math.sin(n)+t.x,y:e.y*Math.cos(n)-e.x*Math.sin(n)+t.y}}static LimitPointToCircle(e,t,n){if(a.GetDistanceBetweenTwoPoint(e,n)<=t)return n;const i=e.x,s=e.y,r=n.x,o=n.y;let l=Math.sqrt(Math.pow(t,2)*Math.pow(i-r,2)/(Math.pow(i-r,2)+Math.pow(s-o,2)))+i;n.x<0&&(l*=-1);let c=(l-i)*(s-o)/(i-r)+s;return i-r+s===0&&(c=t),{x:l,y:c}}static GetIntersectBetweenTwoSegment(e,t,n){return a.PointInRect(e,a.GetIntersectBeetwenTwoLine(t,n))}static GetIntersectBeetwenTwoLine(e,t){const n=e[0].y-e[1].y,i=t[0].y-t[1].y,s=e[1].x-e[0].x,a=t[1].x-t[0].x,r=e[0].x*e[1].y-e[1].x*e[0].y,o=t[0].x*t[1].y-t[1].x*t[0].y,l=n*o-i*r,c=s*o-a*r,h=-(r*a-o*s)/(n*a-i*s),u=-(n*o-i*r)/(n*a-i*s);if(isFinite(h)&&isFinite(u))return{x:h,y:u};if(Math.abs(l-c)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(e,t){const n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y),s=Math.max(n,i),a=[e];function r(e,t,n,i,s){return t>e?e+s*(n/i):t<e?e-s*(n/i):e}for(let o=1;o<=s;o+=1)a.push({x:r(e.x,t.x,n,s,o),y:r(e.y,t.y,i,s,o)});return a}}class r extends t{constructor(e,t,n){super(e,n),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=t,this.element.classList.add("stf__item"),this.element.classList.add("--"+n)}newTemporaryCopy(){return"hard"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new r(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(e){const t=e||this.nowDrawingDensity,n=this.render.convertToGlobal(this.state.position),i=this.render.getRect().pageWidth,s=this.render.getRect().height;this.element.classList.remove("--simple");const a="\n            display: block;\n            z-index: ".concat(this.element.style.zIndex,";\n            left: 0;\n            top: 0;\n            width: ").concat(i,"px;\n            height: ").concat(s,"px;\n        ");"hard"===t?this.drawHard(a):this.drawSoft(n,a)}drawHard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=this.render.getRect().left+this.render.getRect().width/2,n=this.state.hardDrawingAngle,i=e+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?"transform-origin: ".concat(this.render.getRect().pageWidth,"px 0; \n                   transform: translate3d(0, 0, 0) rotateY(").concat(n,"deg);"):"transform-origin: 0 0; \n                   transform: translate3d(".concat(t,"px, 0, 0) rotateY(").concat(n,"deg);"));this.element.style.cssText=i}drawSoft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="polygon( ";for(const s of this.state.area)if(null!==s){let e=1===this.render.getDirection()?{x:-s.x+this.state.position.x,y:s.y-this.state.position.y}:{x:s.x-this.state.position.x,y:s.y-this.state.position.y};e=a.GetRotatedPoint(e,{x:0,y:0},this.state.angle),n+=e.x+"px "+e.y+"px, "}n=n.slice(0,-2),n+=")";const i=t+"transform-origin: 0 0; clip-path: ".concat(n,"; -webkit-clip-path: ").concat(n,";")+(this.render.isSafari()&&0===this.state.angle?"transform: translate(".concat(e.x,"px, ").concat(e.y,"px);"):"transform: translate3d(".concat(e.x,"px, ").concat(e.y,"px, 0) rotate(").concat(this.state.angle,"rad);"));this.element.style.cssText=i}simpleDraw(e){const t=this.render.getRect(),n=t.pageWidth,i=t.height,s=1===e?t.left+t.pageWidth:t.left,a=t.top;this.element.classList.add("--simple"),this.element.style.cssText="\n            position: absolute; \n            display: block; \n            height: ".concat(i,"px; \n            left: ").concat(s,"px; \n            top: ").concat(a,"px; \n            width: ").concat(n,"px; \n            z-index: ").concat(this.render.getSettings().startZIndex+1,";")}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(e){super.setOrientation(e),this.element.classList.remove("--left","--right"),this.element.classList.add(1===e?"--right":"--left")}setDrawingDensity(e){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+e),super.setDrawingDensity(e)}}class o extends i{constructor(e,t,n,i){super(e,t),this.element=n,this.pagesElement=i}load(){for(const e of this.pagesElement){const t=new r(this.render,e,"hard"===e.dataset.density?"hard":"soft");t.load(),this.pages.push(t)}this.createSpread()}}class l{constructor(e,t,n,i){this.direction=e,this.corner=t,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(n,10),this.pageHeight=parseInt(i,10)}calc(e){try{return this.position=this.calcAngleAndPosition(e),this.calculateIntersectPoint(this.position),!0}catch(e){return!1}}getFlippingClipArea(){const e=[];let t=!1;return e.push(this.rect.topLeft),e.push(this.topIntersectPoint),null===this.sideIntersectPoint?t=!0:(e.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(t=!1)),e.push(this.bottomIntersectPoint),(t||"bottom"===this.corner)&&e.push(this.rect.bottomLeft),e}getBottomClipArea(){const e=[];return e.push(this.topIntersectPoint),"top"===this.corner?e.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&e.push({x:this.pageWidth,y:0}),e.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?a.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&e.push(this.sideIntersectPoint):"top"===this.corner&&e.push({x:this.pageWidth,y:this.pageHeight}),e.push(this.bottomIntersectPoint),e.push(this.topIntersectPoint),e}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const e=a.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?e:Math.PI-e}calcAngleAndPosition(e){let t=e;if(this.updateAngleAndGeometry(t),t="top"===this.corner?this.checkPositionAtCenterLine(t,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(t,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(t.x-this.pageWidth)<1&&Math.abs(t.y)<1)throw new Error("Point is too small");return t}updateAngleAndGeometry(e){this.angle=this.calculateAngle(e),this.rect=this.getPageRect(e)}calculateAngle(e){const t=this.pageWidth-e.x+1,n="bottom"===this.corner?this.pageHeight-e.y:e.y;let i=2*Math.acos(t/Math.sqrt(n*n+t*t));n<0&&(i=-i);const s=Math.PI-i;if(!isFinite(i)||s>=0&&s<.003)throw new Error("The G point is too small");return"bottom"===this.corner&&(i=-i),i}getPageRect(e){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],e):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],e)}getRectFromBasePoint(e,t){return{topLeft:this.getRotatedPoint(e[0],t),topRight:this.getRotatedPoint(e[1],t),bottomLeft:this.getRotatedPoint(e[2],t),bottomRight:this.getRotatedPoint(e[3],t)}}getRotatedPoint(e,t){return{x:e.x*Math.cos(this.angle)+e.y*Math.sin(this.angle)+t.x,y:e.y*Math.cos(this.angle)-e.x*Math.sin(this.angle)+t.y}}calculateIntersectPoint(e){const t={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};"top"===this.corner?(this.topIntersectPoint=a.GetIntersectBetweenTwoSegment(t,[e,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=a.GetIntersectBetweenTwoSegment(t,[e,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=a.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=a.GetIntersectBetweenTwoSegment(t,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=a.GetIntersectBetweenTwoSegment(t,[e,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=a.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(e,t,n){let i=e;const s=a.LimitPointToCircle(t,this.pageWidth,i);i!==s&&(i=s,this.updateAngleAndGeometry(i));const r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let o=this.rect.bottomRight,l=this.rect.topLeft;if("bottom"===this.corner&&(o=this.rect.topRight,l=this.rect.bottomLeft),o.x<=0){const e=a.LimitPointToCircle(n,r,l);e!==i&&(i=e,this.updateAngleAndGeometry(i))}return i}getSegmentToShadowLine(){const e=this.getShadowStartPoint();return[e,e!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class c{constructor(e,t){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=e,this.app=t}fold(e){this.setState("user_fold"),null===this.calc&&this.start(e),this.do(this.render.convertToPage(e))}flip(e){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(e))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(e))return;const t=this.getBoundsRect();this.setState("flipping");const n=t.height/10,i="bottom"===this.calc.getCorner()?t.height-n:n,s="bottom"===this.calc.getCorner()?t.height:0;this.calc.calc({x:t.pageWidth-n,y:i}),this.animateFlippingTo({x:t.pageWidth-n,y:i},{x:-t.pageWidth,y:s},!0)}start(e){this.reset();const t=this.render.convertToBook(e),n=this.getBoundsRect(),i=this.getDirectionByPoint(t),s=t.y>=n.height/2?"bottom":"top";if(!this.checkDirection(i))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(i),this.bottomPage=this.app.getPageCollection().getBottomPage(i),"landscape"===this.render.getOrientation())if(1===i){const e=this.app.getPageCollection().nextBy(this.flippingPage);null!==e&&this.flippingPage.getDensity()!==e.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),e.setDrawingDensity("hard"))}else{const e=this.app.getPageCollection().prevBy(this.flippingPage);null!==e&&this.flippingPage.getDensity()!==e.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),e.setDrawingDensity("hard"))}return this.render.setDirection(i),this.calc=new l(i,s,n.pageWidth.toString(10),n.height.toString(10)),!0}catch(e){return!1}}do(e){if(null!==this.calc&&this.calc.calc(e)){const e=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*e)/100):this.flippingPage.setHardAngle(-90*(200-2*e)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),e,this.calc.getDirection())}}flipToPage(e,t){const n=this.app.getPageCollection().getCurrentSpreadIndex(),i=this.app.getPageCollection().getSpreadIndexByPage(e);try{i>n&&(this.app.getPageCollection().setCurrentSpreadIndex(i-1),this.flipNext(t)),i<n&&(this.app.getPageCollection().setCurrentSpreadIndex(i+1),this.flipPrev(t))}catch(e){}}flipNext(e){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===e?1:this.render.getRect().height-2})}flipPrev(e){this.flip({x:10,y:"top"===e?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const e=this.calc.getPosition(),t=this.getBoundsRect(),n="bottom"===this.calc.getCorner()?t.height:0;e.x<=0?this.animateFlippingTo(e,{x:-t.pageWidth,y:n},!0):this.animateFlippingTo(e,{x:t.pageWidth,y:n},!1)}showCorner(e){if(!this.checkState("read","fold_corner"))return;const t=this.getBoundsRect(),n=t.pageWidth;if(this.isPointOnCorners(e))if(null===this.calc){if(!this.start(e))return;this.setState("fold_corner"),this.calc.calc({x:n-1,y:1});const i=50,s="bottom"===this.calc.getCorner()?t.height-1:1,a="bottom"===this.calc.getCorner()?t.height-i:i;this.animateFlippingTo({x:n-1,y:s},{x:n-i,y:a},!1,!1)}else this.do(this.render.convertToPage(e));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=a.GetCordsFromTwoPoint(e,t),r=[];for(const a of s)r.push(()=>this.do(a));const o=this.getAnimationDuration(s.length);this.render.startAnimation(r,o,()=>{this.calc&&(n&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),i&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(e){this.state!==e&&(this.app.updateState(e),this.state=e)}getDirectionByPoint(e){const t=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(e.x-t.pageWidth<=t.width/5)return 1}else if(e.x<t.width/2)return 1;return 0}getAnimationDuration(e){const t=this.app.getSettings().flippingTime;return e>=1e3?t:e/1e3*t}checkDirection(e){return 0===e?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)if(this.state===i)return!0;return!1}isPointOnCorners(e){const t=this.getBoundsRect(),n=t.pageWidth,i=Math.sqrt(Math.pow(n,2)+Math.pow(t.height,2))/5,s=this.render.convertToBook(e);return s.x>0&&s.y>0&&s.x<t.width&&s.y<t.height&&(s.x<i||s.x>t.width-i)&&(s.y<i||s.y>t.height-i)}}class h{constructor(e,t){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=t,this.app=e;const n=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==n.exec(window.navigator.userAgent)}render(e){if(null!==this.animation){const t=Math.round((e-this.animation.startedAt)/this.animation.durationFrame);t<this.animation.frames.length?this.animation.frames[t]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=e,this.drawFrame()}start(){this.update();const e=t=>{this.render(t),requestAnimationFrame(e)};requestAnimationFrame(e)}startAnimation(e,t,n){this.finishAnimation(),this.animation={frames:e,duration:t,durationFrame:t/e.length,onAnimateEnd:n,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const e=this.calculateBoundsRect();this.orientation!==e&&(this.orientation=e,this.app.updateOrientation(e))}calculateBoundsRect(){let e="landscape";const t=this.getBlockWidth(),n=t/2,i=this.getBlockHeight()/2,s=this.setting.width/this.setting.height;let a=this.setting.width,r=this.setting.height,o=n-a;return"stretch"===this.setting.size?(t<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(e="portrait"),a="portrait"===e?this.getBlockWidth():this.getBlockWidth()/2,a>this.setting.maxWidth&&(a=this.setting.maxWidth),r=a/s,r>this.getBlockHeight()&&(r=this.getBlockHeight(),a=r*s),o="portrait"===e?n-a/2-a:n-a):t<2*a&&this.app.getSettings().usePortrait&&(e="portrait",o=n-a/2-a),this.boundsRect={left:o,top:i-r/2,width:2*a,height:r,pageWidth:a},e}setShadowData(e,t,n,i){if(!this.app.getSettings().drawShadow)return;const s=100*this.getSettings().maxShadowOpacity;this.shadow={pos:e,angle:t,width:3*this.getRect().pageWidth/4*n/100,opacity:(100-n)*s/100/100,direction:i,progress:2*n}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(e){this.pageRect=e}setDirection(e){this.direction=e}setRightPage(e){null!==e&&e.setOrientation(1),this.rightPage=e}setLeftPage(e){null!==e&&e.setOrientation(0),this.leftPage=e}setBottomPage(e){null!==e&&e.setOrientation(1===this.direction?0:1),this.bottomPage=e}setFlippingPage(e){null!==e&&e.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1),this.flippingPage=e}convertToBook(e){const t=this.getRect();return{x:e.x-t.left,y:e.y-t.top}}isSafari(){return this.safari}convertToPage(e,t){t||(t=this.direction);const n=this.getRect();return{x:0===t?e.x-n.left-n.width/2:n.width/2-e.x+n.left,y:e.y-n.top}}convertToGlobal(e,t){if(t||(t=this.direction),null==e)return null;const n=this.getRect();return{x:0===t?e.x+n.left+n.width/2:n.width/2-e.x+n.left,y:e.y+n.top}}convertRectToGlobal(e,t){return t||(t=this.direction),{topLeft:this.convertToGlobal(e.topLeft,t),topRight:this.convertToGlobal(e.topRight,t),bottomLeft:this.convertToGlobal(e.bottomLeft,t),bottomRight:this.convertToGlobal(e.bottomRight,t)}}}class u extends h{constructor(e,t,n){super(e,t),this.canvas=n,this.ctx=n.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const e=this.getRect();"portrait"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(e.left+e.pageWidth,e.top,e.width,e.height),this.ctx.clip())}drawBookShadow(){const e=this.getRect();this.ctx.save(),this.ctx.beginPath();const t=e.width/20;this.ctx.rect(e.left,e.top,e.width,e.height);const n={x:e.left+e.width/2-t/2,y:0};this.ctx.translate(n.x,n.y);const i=this.ctx.createLinearGradient(0,0,t,0);i.addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),i.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),i.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),i.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),i.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,t,2*e.height),this.ctx.restore()}drawOuterShadow(){const e=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(e.left,e.top,e.width,e.height);const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(t.x,t.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const n=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),n.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,this.shadow.width,2*e.height),this.ctx.restore()}drawInnerShadow(){const e=this.getRect();this.ctx.save(),this.ctx.beginPath();const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),n=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(n.topLeft.x,n.topLeft.y),this.ctx.lineTo(n.topRight.x,n.topRight.y),this.ctx.lineTo(n.bottomRight.x,n.bottomRight.y),this.ctx.lineTo(n.bottomLeft.x,n.bottomLeft.y),this.ctx.translate(t.x,t.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=3*this.shadow.width/4,s=this.ctx.createLinearGradient(0,0,i,0);0===this.shadow.direction?(this.ctx.translate(-i,-100),s.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),s.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),s.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),s.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),s.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),s.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),s.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),s.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,i,2*e.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class d{constructor(e,t,n){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=e=>{if(this.checkTarget(e.target)){const t=this.getMousePos(e.clientX,e.clientY);this.app.startUserTouch(t),e.preventDefault()}},this.onTouchStart=e=>{if(this.checkTarget(e.target)&&e.changedTouches.length>0){const t=e.changedTouches[0],n=this.getMousePos(t.clientX,t.clientY);this.touchPoint={point:n,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(n)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||e.preventDefault()}},this.onMouseUp=e=>{const t=this.getMousePos(e.clientX,e.clientY);this.app.userStop(t)},this.onMouseMove=e=>{const t=this.getMousePos(e.clientX,e.clientY);this.app.userMove(t,!1)},this.onTouchMove=e=>{if(e.changedTouches.length>0){const t=e.changedTouches[0],n=this.getMousePos(t.clientX,t.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-n.x)>10||"read"!==this.app.getState())&&e.cancelable&&this.app.userMove(n,!0),"read"!==this.app.getState()&&e.preventDefault()):this.app.userMove(n,!0)}},this.onTouchEnd=e=>{if(e.changedTouches.length>0){const t=e.changedTouches[0],n=this.getMousePos(t.clientX,t.clientY);let i=!1;if(null!==this.touchPoint){const e=n.x-this.touchPoint.point.x,t=Math.abs(n.y-this.touchPoint.point.y);Math.abs(e)>this.swipeDistance&&t<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(e>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),i=!0),this.touchPoint=null}this.app.userStop(n,i)}},this.parentElement=e,e.classList.add("stf__parent"),e.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=e.querySelector(".stf__wrapper"),this.app=t;const i=this.app.getSettings().usePortrait?1:2;e.style.minWidth=n.minWidth*i+"px",e.style.minHeight=n.minHeight+"px","fixed"===n.size&&(e.style.minWidth=n.width*i+"px",e.style.minHeight=n.height+"px"),n.autoSize&&(e.style.width="100%",e.style.maxWidth=2*n.maxWidth+"px"),e.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=n.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(e){this.wrapper.classList.remove("--portrait","--landscape"),"portrait"===e?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(e,t){const n=this.distElement.getBoundingClientRect();return{x:e-n.left,y:t-n.top}}checkTarget(e){return!this.app.getSettings().clickEventForward||!["a","button"].includes(e.tagName.toLowerCase())}}class p extends d{constructor(e,t,n,i){super(e,t,n),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=e.querySelector(".stf__block"),this.items=i;for(const s of i)this.distElement.appendChild(s);this.setHandlers()}clear(){for(const e of this.items)this.parentElement.appendChild(e)}updateItems(e){this.removeHandlers(),this.distElement.innerHTML="";for(const t of e)this.distElement.appendChild(t);this.items=e,this.setHandlers()}update(){this.app.getRender().update()}}class f extends d{constructor(e,t,n){super(e,t,n),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=e.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const e=getComputedStyle(this.canvas),t=parseInt(e.getPropertyValue("width"),10),n=parseInt(e.getPropertyValue("height"),10);this.canvas.width=t,this.canvas.height=n}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class g extends h{constructor(e,t,n){super(e,t),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=n,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>'),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const e=this.getRect(),t=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let n=(100-t)*(2.5*e.pageWidth)/100+20;n>e.pageWidth&&(n=e.pageWidth);let i="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+5).toString(10),";\n            width: ").concat(n,"px;\n            height: ").concat(e.height,"px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity*t/100,") 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ").concat(e.left+e.width/2,"px;\n            transform-origin: 0 0;\n        ");i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=i}drawHardOuterShadow(){const e=this.getRect();let t=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*e.pageWidth)/100+20;t>e.pageWidth&&(t=e.pageWidth);let n="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+4).toString(10),";\n            width: ").concat(t,"px;\n            height: ").concat(e.height,"px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%, rgba(0, 0, 0, 0) 100%);\n            left: ").concat(e.left+e.width/2,"px;\n            transform-origin: 0 0;\n        ");n+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=n}drawInnerShadow(){const e=this.getRect(),t=3*this.shadow.width/4,n=0===this.getDirection()?t:0,i=0===this.getDirection()?"to left":"to right",s=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,o=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let l="polygon( ";for(const h of o){let e=1===this.getDirection()?{x:-h.x+this.shadow.pos.x,y:h.y-this.shadow.pos.y}:{x:h.x-this.shadow.pos.x,y:h.y-this.shadow.pos.y};e=a.GetRotatedPoint(e,{x:n,y:100},r),l+=e.x+"px "+e.y+"px, "}l=l.slice(0,-2),l+=")";const c="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(t,"px;\n            height: ").concat(2*e.height,"px;\n            background: linear-gradient(").concat(i,",\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ").concat(n,"px 100px;\n            transform: translate3d(").concat(s.x-n,"px, ").concat(s.y-100,"px, 0) rotate(").concat(r,"rad);\n            clip-path: ").concat(l,";\n            -webkit-clip-path: ").concat(l,";\n        ");this.innerShadow.style.cssText=c}drawOuterShadow(){const e=this.getRect(),t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),n=this.shadow.angle+3*Math.PI/2,i=1===this.getDirection()?this.shadow.width:0,s=0===this.getDirection()?"to right":"to left",r=[{x:0,y:0},{x:e.pageWidth,y:0},{x:e.pageWidth,y:e.height},{x:0,y:e.height}];let o="polygon( ";for(const c of r)if(null!==c){let e=1===this.getDirection()?{x:-c.x+this.shadow.pos.x,y:c.y-this.shadow.pos.y}:{x:c.x-this.shadow.pos.x,y:c.y-this.shadow.pos.y};e=a.GetRotatedPoint(e,{x:i,y:100},n),o+=e.x+"px "+e.y+"px, "}o=o.slice(0,-2),o+=")";const l="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(this.shadow.width,"px;\n            height: ").concat(2*e.height,"px;\n            background: linear-gradient(").concat(s,", rgba(0, 0, 0, ").concat(this.shadow.opacity,"), rgba(0, 0, 0, 0));\n            transform-origin: ").concat(i,"px 100px;\n            transform: translate3d(").concat(t.x-i,"px, ").concat(t.y-100,"px, 0) rotate(").concat(n,"rad);\n            clip-path: ").concat(o,";\n            -webkit-clip-path: ").concat(o,";\n        ");this.outerShadow.style.cssText=l}drawLeftPage(){"portrait"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const e=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;"portrait"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(e))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&("soft"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const e of this.app.getPageCollection().getPages())e!==this.leftPage&&e!==this.rightPage&&e!==this.flippingPage&&e!==this.bottomPage&&(e.getElement().style.cssText="display: none"),e.getTemporaryCopy()!==this.flippingPage&&e.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class m{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(e){const t=this._default;if(Object.assign(t,e),"stretch"!==t.size&&"fixed"!==t.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(t.width<=0||t.height<=0)throw new Error("Invalid width or height");if(t.flippingTime<=0)throw new Error("Invalid flipping time");return"stretch"===t.size?(t.minWidth<=0&&(t.minWidth=100),t.maxWidth<t.minWidth&&(t.maxWidth=2e3),t.minHeight<=0&&(t.minHeight=100),t.maxHeight<t.minHeight&&(t.maxHeight=2e3)):(t.minWidth=t.width,t.maxWidth=t.width,t.minHeight=t.height,t.maxHeight=t.height),t}}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}"),e.PageFlip=class extends class{constructor(){this.events=new Map}on(e,t){return this.events.has(e)?this.events.get(e).push(t):this.events.set(e,[t]),this}off(e){this.events.delete(e)}trigger(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.events.has(e))for(const i of this.events.get(e))i({data:n,object:t})}}{constructor(e,t){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new m).getSettings(t),this.block=e}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(e){this.ui=new f(this.block,this,this.setting);const t=this.ui.getCanvas();this.render=new u(this,this.setting,t),this.flipController=new c(this.render,this),this.pages=new s(this,this.render,e),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(e){this.ui=new p(this.block,this,this.setting,e),this.render=new g(this,this.setting,this.ui.getDistElement()),this.flipController=new c(this.render,this),this.pages=new o(this,this.render,this.ui.getDistElement(),e),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(e){const t=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new s(this,this.render,e),this.pages.load(),this.pages.show(t),this.trigger("update",this,{page:t,mode:this.render.getOrientation()})}updateFromHtml(e){const t=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,this.ui.getDistElement(),e),this.pages.load(),this.ui.updateItems(e),this.render.reload(),this.pages.show(t),this.trigger("update",this,{page:t,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(e){this.pages.show(e)}flipNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipNext(e)}flipPrev(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipPrev(e)}flip(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";this.flipController.flipToPage(e,t)}updateState(e){this.trigger("changeState",this,e)}updatePageIndex(e){this.trigger("flip",this,e)}updateOrientation(e){this.ui.setOrientationStyle(e),this.update(),this.trigger("changeOrientation",this,e)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(e){return this.pages.getPage(e)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(e){this.mousePosition=e,this.isUserTouch=!0,this.isUserMove=!1}userMove(e,t){this.isUserTouch||t||!this.setting.showPageCorners?this.isUserTouch&&a.GetDistanceBetweenTwoPoint(this.mousePosition,e)>5&&(this.isUserMove=!0,this.flipController.fold(e)):this.flipController.showCorner(e)}userStop(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isUserTouch&&(this.isUserTouch=!1,t||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(e)))}},Object.defineProperty(e,"__esModule",{value:!0})}(t)},43:(e,t,n)=>{"use strict";e.exports=n(288)},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=y.prototype=new b;w.constructor=y,g(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function A(e,t,i,s,a,r){return i=r.ref,{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(){}function M(e,t,s,a,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,h=!1;if(null===e)h=!0;else switch(o){case"bigint":case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case n:case i:h=!0;break;case d:return M((h=e._init)(e._payload),t,s,a,r)}}if(h)return r=r(e),h=""===a?"."+C(e,0):a,x(r)?(s="",null!=h&&(s=h.replace(E,"$&/")+"/"),M(r,t,s,"",function(e){return e})):null!=r&&(_(r)&&(l=r,c=s+(null==r.key||e&&e.key===r.key?"":(""+r.key).replace(E,"$&/")+"/")+h,r=A(l.type,c,void 0,0,0,l.props)),t.push(r)),1;h=0;var u,f=""===a?".":a+":";if(x(e))for(var g=0;g<e.length;g++)h+=M(a=e[g],t,s,o=f+C(a,g),r);else if("function"===typeof(g=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(e=g.call(e),g=0;!(a=e.next()).done;)h+=M(a=a.value,t,s,o=f+C(a,g++),r);else if("object"===o){if("function"===typeof e.then)return M(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(P,P):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,a,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return h}function T(e,t,n){if(null==e)return e;var i=[],s=0;return M(e,i,"","",function(e){return t.call(n,e,s++)}),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function L(){}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=r,t.PureComponent=y,t.StrictMode=a,t.Suspense=h,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key;if(null!=t)for(a in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!k.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(i[a]=t[a]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var r=Array(a),o=0;o<a;o++)r[o]=arguments[o+2];i.children=r}return A(e.type,s,void 0,0,0,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var i,s={},a=null;if(null!=t)for(i in void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(s[i]=t[i]);var r=arguments.length-2;if(1===r)s.children=n;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(i in r=e.defaultProps)void 0===s[i]&&(s[i]=r[i]);return A(e,a,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var i=e(),s=S.S;null!==s&&s(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(L,N)}catch(a){N(a)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var i=S.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.1"},291:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/funciones.814144315f3c53b0edc3.png"},301:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/ciclos.d761d610d3ae8b68d976.png"},346:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/Conceptos.a66e9ae29403cc557560.png"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},428:(e,t,n)=>{var i={"./Conceptos.png":346,"./archivos.jpg":917,"./ciclos.png":301,"./funciones.png":291,"./matrices.jpg":778,"./registros.jpg":654,"./vectores.jpg":635};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id=428},440:e=>{"use strict";var t=function(){};e.exports=t},579:(e,t,n)=>{"use strict";e.exports=n(799)},635:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/vectores.ef230c54c35662e959ee.jpg"},654:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/registros.eee4833be64e6f57c58f.jpg"},672:(e,t,n)=>{"use strict";var i=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(s(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=r.p;try{if(l.T=null,r.p=2,e)return e()}finally{l.T=t,r.p=n,r.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&r.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:a}):"script"===n&&r.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);r.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},t.requestFormReset=function(e){r.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},778:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/matrices.7f4d3a5f053ddac26814.jpg"},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function s(e,t,i){var s=null;if(void 0!==i&&(s=""+i),void 0!==t.key&&(s=""+t.key),"key"in t)for(var a in i={},t)"key"!==a&&(i[a]=t[a]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=s,t.jsxs=s},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<a(s,t)))break e;e[i]=t,e[n]=s,n=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,r=s>>>1;i<r;){var o=2*(i+1)-1,l=e[o],c=o+1,h=e[c];if(0>a(l,n))c<s&&0>a(h,l)?(e[i]=h,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<s&&0>a(h,n)))break e;e[i]=h,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],u=1,d=null,p=3,f=!1,g=!1,m=!1,v=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(h);null!==t;){if(null===t.callback)s(h);else{if(!(t.startTime<=e))break;s(h),t.sortIndex=t.expirationTime,n(c,t)}t=i(h)}}function S(e){if(m=!1,x(e),!g)if(null!==i(c))g=!0,A||(A=!0,k());else{var t=i(h);null!==t&&N(S,t.startTime-e)}}var k,A=!1,_=-1,E=5,C=-1;function P(){return!!v||!(t.unstable_now()-C<E)}function M(){if(v=!1,A){var e=t.unstable_now();C=e;var n=!0;try{e:{g=!1,m&&(m=!1,y(_),_=-1),f=!0;var a=p;try{t:{for(x(e),d=i(c);null!==d&&!(d.expirationTime>e&&P());){var r=d.callback;if("function"===typeof r){d.callback=null,p=d.priorityLevel;var o=r(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){d.callback=o,x(e),n=!0;break t}d===i(c)&&s(c),x(e)}else s(c);d=i(c)}if(null!==d)n=!0;else{var l=i(h);null!==l&&N(S,l.startTime-e),n=!1}}break e}finally{d=null,p=a,f=!1}n=void 0}}finally{n?k():A=!1}}}if("function"===typeof w)k=function(){w(M)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,R=T.port2;T.port1.onmessage=M,k=function(){R.postMessage(null)}}else k=function(){b(M,0)};function N(e,n){_=b(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,a){var r=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?r+a:r:a=r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>r?(e.sortIndex=a,n(h,e),null===i(c)&&e===i(h)&&(m?(y(_),_=-1):m=!0,N(S,a-r))):(e.sortIndex=o,n(c,e),g||f||(g=!0,A||(A=!0,k()))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},917:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/archivos.94024ae1d79276cdb8bc.jpg"},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{"use strict";var e={};n.r(e),n.d(e,{EA:()=>mc,Tm:()=>Kh,YE:()=>Bh});var t=n(43),i=n(391);function s(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function o(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const h=["sri"],u=["page"],d=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var m="popstate";function v(){return A(function(e,t){let{pathname:n,search:i,hash:s}=e.location;return x("",{pathname:n,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:S(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?k(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function k(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function A(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:a=!1}=i,r=s.history,o="POP",l=null,h=u();function u(){return(r.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-h;h=e,l&&l({action:o,location:f.location,delta:t})}function p(e){return _(e)}null==h&&(h=0,r.replaceState(c(c({},r.state),{},{idx:h}),""));let f={get action(){return o},get location(){return e(s,r)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(m,d),l=e,()=>{s.removeEventListener(m,d),l=null}},createHref:e=>t(s,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let i=x(f.location,e,t);n&&n(i,e),h=u()+1;let c=w(i,h),d=f.createHref(i);try{r.pushState(c,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;s.location.assign(d)}a&&l&&l({action:o,location:f.location,delta:1})},replace:function(e,t){o="REPLACE";let i=x(f.location,e,t);n&&n(i,e),h=u();let s=w(i,h),c=f.createHref(i);r.replaceState(s,"",c),a&&l&&l({action:o,location:f.location,delta:0})},go:e=>r.go(e)};return f}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),b(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:S(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function E(e,t){return C(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function C(e,t,n,i){let s=H(("string"===typeof t?k(t):t).pathname||"/",n);if(null==s)return null;let a=P(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let r=null;for(let o=0;null==r&&o<a.length;++o){let e=B(s);r=O(a[o],e,i)}return r}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(i)&&r)return;b(l.relativePath.startsWith(i),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(i.length)}let c=X([i,l.relativePath]),h=n.concat(l);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(e.children,t,h,c,r)),(null!=e.path||e.index)&&t.push({path:c,score:j(c,e.index),routesMeta:h})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of M(e.path))a(e,t,!0,i);else a(e,t)}),t}function M(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===i.length)return s?[a,""]:[a];let r=M(i.join("/")),o=[];return o.push(...r.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...r),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var T=/^:[\w-]+$/,R=3,N=2,L=1,D=10,I=-2,F=e=>"*"===e;function j(e,t){let n=e.split("/"),i=n.length;return n.some(F)&&(i+=I),t&&(i+=N),n.filter(e=>!F(e)).reduce((e,t)=>e+(T.test(t)?R:""===t?L:D),i)}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,s={},a="/",r=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===a?t:t.slice(a.length)||"/",h=W({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!h&&l&&n&&!i[i.length-1].route.index&&(h=W({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!h)return null;Object.assign(s,h.params),r.push({params:s,pathname:X([a,h.pathname]),pathnameBase:Y(X([a,h.pathnameBase])),route:u}),"/"!==h.pathnameBase&&(a=X([a,h.pathnameBase]))}return r}function W(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=z(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],r=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:i.reduce((e,t,n)=>{let{paramName:i,isOptional:s}=t;if("*"===i){let e=o[n]||"";r=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:r,pattern:e}}function z(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function B(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return y(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function U(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function V(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function G(e){let t=V(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function q(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=k(e):(i=c({},e),b(!i.pathname||!i.pathname.includes("?"),U("?","pathname","search",i)),b(!i.pathname||!i.pathname.includes("#"),U("#","pathname","hash",i)),b(!i.search||!i.search.includes("#"),U("#","search","hash",i)));let a,r=""===e||""===i.pathname,o=r?"/":i.pathname;if(null==o)a=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:s=""}="string"===typeof e?k(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:K(i),hash:Q(s)}}(i,a),h=o&&"/"!==o&&o.endsWith("/"),u=(r||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!u||(l.pathname+="/"),l}var X=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var J=["POST","PUT","PATCH","DELETE"],Z=(new Set(J),["GET",...J]);new Set(Z),Symbol("ResetLoaderData");var ee=t.createContext(null);ee.displayName="DataRouter";var te=t.createContext(null);te.displayName="DataRouterState";var ne=t.createContext(!1);var ie=t.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var se=t.createContext(new Map);se.displayName="Fetchers";var ae=t.createContext(null);ae.displayName="Await";var re=t.createContext(null);re.displayName="Navigation";var oe=t.createContext(null);oe.displayName="Location";var le=t.createContext({outlet:null,matches:[],isDataRoute:!1});le.displayName="Route";var ce=t.createContext(null);ce.displayName="RouteError";function he(){return null!=t.useContext(oe)}function ue(){return b(he(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(oe).location}var de="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pe(e){t.useContext(re).static||t.useLayoutEffect(e)}function fe(){let{isDataRoute:e}=t.useContext(le);return e?function(){let{router:e}=ke("useNavigate"),n=_e("useNavigate"),i=t.useRef(!1);pe(()=>{i.current=!0});let s=t.useCallback(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(i.current,de),i.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,c({fromRouteId:n},s)))},[e,n]);return s}():function(){b(he(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(ee),{basename:n,navigator:i}=t.useContext(re),{matches:s}=t.useContext(le),{pathname:a}=ue(),r=JSON.stringify(G(s)),o=t.useRef(!1);pe(()=>{o.current=!0});let l=t.useCallback(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(o.current,de),!o.current)return;if("number"===typeof t)return void i.go(t);let l=q(t,JSON.parse(r),a,"path"===s.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:X([n,l.pathname])),(s.replace?i.replace:i.push)(l,s.state,s)},[n,i,r,a,e]);return l}()}t.createContext(null);function ge(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=t.useContext(le),{pathname:s}=ue(),a=JSON.stringify(G(i));return t.useMemo(()=>q(e,JSON.parse(a),s,"path"===n),[e,a,s,n])}function me(e,n,i,s,a){b(he(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=t.useContext(re),{matches:o}=t.useContext(le),l=o[o.length-1],h=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";Pe(u,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,g=ue();if(n){var m;let e="string"===typeof n?k(n):n;b("/"===d||(null===(m=e.pathname)||void 0===m?void 0:m.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=g;let v=f.pathname||"/",w=v;if("/"!==d){let e=d.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=E(e,{pathname:w});y(p||null!=x,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),y(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let S=xe(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},h,e.params),pathname:X([d,r.encodeLocation?r.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:X([d,r.encodeLocation?r.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,i,s,a);return n&&S?t.createElement(oe.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},S):S}function ve(){let e=Ee(),n=$(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},r={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:r},"ErrorBoundary")," or"," ",t.createElement("code",{style:r},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),i?t.createElement("pre",{style:a},i):null,o)}var be=t.createElement(ve,null),ye=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?t.createElement(le.Provider,{value:this.props.routeContext},t.createElement(ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function we(e){let{routeContext:n,match:i,children:s}=e,a=t.useContext(ee);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),t.createElement(le.Provider,{value:n},s)}function xe(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!i)return null;if(i.errors)e=i.matches;else{if(0!==n.length||i.initialized||!(i.matches.length>0))return null;e=i.matches}}let a=e,r=null===i||void 0===i?void 0:i.errors;if(null!=r){let e=a.findIndex(e=>e.route.id&&void 0!==(null===r||void 0===r?void 0:r[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(r).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let o=!1,l=-1;if(i)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:n}=i,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){o=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}return a.reduceRight((e,c,h)=>{let u,d=!1,p=null,f=null;i&&(u=r&&c.route.id?r[c.route.id]:void 0,p=c.route.errorElement||be,o&&(l<0&&0===h?(Pe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):l===h&&(d=!0,f=c.route.hydrateFallbackElement||null)));let g=n.concat(a.slice(0,h+1)),m=()=>{let n;return n=u?p:d?f:c.route.Component?t.createElement(c.route.Component,null):c.route.element?c.route.element:e,t.createElement(we,{match:c,routeContext:{outlet:e,matches:g,isDataRoute:null!=i},children:n})};return i&&(c.route.ErrorBoundary||c.route.errorElement||0===h)?t.createElement(ye,{location:i.location,revalidation:i.revalidation,component:p,error:u,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:s}):m()},null)}function Se(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ke(e){let n=t.useContext(ee);return b(n,Se(e)),n}function Ae(e){let n=t.useContext(te);return b(n,Se(e)),n}function _e(e){let n=function(e){let n=t.useContext(le);return b(n,Se(e)),n}(e),i=n.matches[n.matches.length-1];return b(i.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),i.route.id}function Ee(){var e;let n=t.useContext(ce),i=Ae("useRouteError"),s=_e("useRouteError");return void 0!==n?n:null===(e=i.errors)||void 0===e?void 0:e[s]}var Ce={};function Pe(e,t,n){t||Ce[e]||(Ce[e]=!0,y(!1,n))}var Me={};function Te(e,t){e||Me[t]||(Me[t]=!0,console.warn(t))}t.memo(function(e){let{routes:t,future:n,state:i,unstable_onError:s}=e;return me(t,void 0,i,s,n)});function Re(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ne(e){let{basename:n="/",children:i=null,location:s,navigationType:a="POP",navigator:r,static:o=!1}=e;b(!he(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=t.useMemo(()=>({basename:l,navigator:r,static:o,future:{}}),[l,r,o]);"string"===typeof s&&(s=k(s));let{pathname:h="/",search:u="",hash:d="",state:p=null,key:f="default"}=s,g=t.useMemo(()=>{let e=H(h,l);return null==e?null:{location:{pathname:e,search:u,hash:d,state:p,key:f},navigationType:a}},[l,h,u,d,p,f,a]);return y(null!=g,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(h).concat(u).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:t.createElement(re.Provider,{value:c},t.createElement(oe.Provider,{children:i,value:g}))}function Le(e){let{children:t,location:n}=e;return me(De(t),n)}t.Component;function De(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let a=[...n,s];if(e.type===t.Fragment)return void i.push.apply(i,De(e.props.children,a));b(e.type===Re,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let r={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(r.children=De(e.props.children,a)),i.push(r)}),i}var Ie="get",Fe="application/x-www-form-urlencoded";function je(e){return null!=e&&"string"===typeof e.tagName}var Oe=null;var We=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ze(e){return null==e||We.has(e)?e:(y(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Fe,'"')),null)}function Be(e,t){let n,i,s,a,r;if(je(o=e)&&"form"===o.tagName.toLowerCase()){let r=e.getAttribute("action");i=r?H(r,t):null,n=e.getAttribute("method")||Ie,s=ze(e.getAttribute("enctype"))||Fe,a=new FormData(e)}else if(function(e){return je(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return je(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let r=e.form;if(null==r)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||r.getAttribute("action");if(i=o?H(o,t):null,n=e.getAttribute("formmethod")||r.getAttribute("method")||Ie,s=ze(e.getAttribute("formenctype"))||ze(r.getAttribute("enctype"))||Fe,a=new FormData(r,e),!function(){if(null===Oe)try{new FormData(document.createElement("form"),0),Oe=!1}catch(e){Oe=!0}return Oe}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";a.append("".concat(e,"x"),"0"),a.append("".concat(e,"y"),"0")}else t&&a.append(t,i)}}else{if(je(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ie,i=null,s=Fe,r=e}var o;return a&&"text/plain"===s&&(r=a,a=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:a,body:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function He(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ue(e,t,n){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===i.pathname?i.pathname="_root.".concat(n):t&&"/"===H(i.pathname,t)?i.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):i.pathname="".concat(i.pathname.replace(/\/$/,""),".").concat(n),i}async function Ve(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ge(e){return null!=e&&"string"===typeof e.page}function qe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Xe(e,t,n,i,s,a){let r=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>r(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(r(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){var c;let i=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function Ye(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map(e=>{let i=t.routes[e.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1),[...new Set(i)];var i}function Ke(e,t){let n=new Set,i=new Set(t);return e.reduce((e,s)=>{if(t&&!Ge(s)&&"script"===s.as&&s.href&&i.has(s.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(s));return n.has(a)||(n.add(a),e.push({key:a,link:s})),e},[])}function Qe(e,t){return"lazy"===e.mode&&!0===t}function $e(){let e=t.useContext(ee);return He(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Je(){let e=t.useContext(te);return He(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ze=t.createContext(void 0);function et(){let e=t.useContext(Ze);return He(e,"You must render this element inside a <HydratedRouter> element"),e}function tt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function nt(e,t,n){if(n&&!rt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}Ze.displayName="FrameworkContext";function it(e){let{page:n}=e,i=s(e,u),{router:a}=$e(),r=t.useMemo(()=>E(a.routes,n,a.basename),[a.routes,n,a.basename]);return r?t.createElement(at,c({page:n,matches:r},i)):null}function st(e){let{manifest:n,routeModules:i}=et(),[s,a]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,n){return Ke((await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await Ve(i,n);return e.links?e.links():[]}return[]}))).flat(1).filter(qe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,n,i).then(e=>{t||a(e)}),()=>{t=!0}},[e,n,i]),s}function at(e){let{page:n,matches:i}=e,a=s(e,d),r=ue(),{manifest:o,routeModules:l}=et(),{basename:h}=$e(),{loaderData:u,matches:p}=Je(),f=t.useMemo(()=>Xe(n,i,p,o,r,"data"),[n,i,p,o,r]),g=t.useMemo(()=>Xe(n,i,p,o,r,"assets"),[n,i,p,o,r]),m=t.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let e=new Set,t=!1;if(i.forEach(n=>{var i;let s=o.routes[n.route.id];s&&s.hasLoader&&(!f.some(e=>e.route.id===n.route.id)&&n.route.id in u&&null!==(i=l[n.route.id])&&void 0!==i&&i.shouldRevalidate||s.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let s=Ue(n,h,"data");return t&&e.size>0&&s.searchParams.set("_routes",i.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[s.pathname+s.search]},[h,u,r,o,f,i,n,l]),v=t.useMemo(()=>Ye(g,o),[g,o]),b=st(g);return t.createElement(t.Fragment,null,m.map(e=>t.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},a))),v.map(e=>t.createElement("link",c({key:e,rel:"modulepreload",href:e},a))),b.map(e=>{let{key:n,link:i}=e;return t.createElement("link",c({key:n,nonce:a.nonce},i))}))}var rt=!1;function ot(e){let{manifest:n,serverHandoffString:i,isSpaMode:a,renderMeta:r,routeDiscovery:o,ssr:l}=et(),{router:u,static:d,staticContext:p}=$e(),{matches:f}=Je(),g=t.useContext(ne),m=Qe(o,l);r&&(r.didRenderScripts=!0);let v=nt(f,null,a);t.useEffect(()=>{0},[]);let b=t.useMemo(()=>{var a;if(g)return null;let r=p?"window.__reactRouterContext = ".concat(i,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=d?"".concat(null!==n.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(m?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(v.map((e,t)=>{let i="route".concat(t),s=n.routes[e.route.id];He(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:a,clientLoaderModule:r,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,h=[...a?[{module:a,varName:"".concat(i,"_clientAction")}]:[],...r?[{module:r,varName:"".concat(i,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===h.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[h.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(i," = {").concat(h.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(m?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=s(e,h),a=new Set(t.state.matches.map(e=>e.route.id)),r=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(r.pop();r.length>0;)o.push("/".concat(r.join("/"))),r.pop();o.forEach(e=>{let n=E(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let l=[...a].reduce((e,t)=>Object.assign(e,{[t]:i.routes[t]}),{});return c(c({},i),{},{routes:l,sri:!!n||void 0})}(n,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:r},type:void 0})),t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:"module",async:!0})))},[]),y=rt||g?[]:(n.entry.imports.concat(Ye(v,n,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let x="object"===typeof n.sri?n.sri:{};return Te(!g,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),rt||g?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,m?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:x[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:x[n.entry.module],suppressHydrationWarning:!0}),y.map(n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:x[n],suppressHydrationWarning:!0})),b)}function lt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}t.Component;function ct(e){let{error:n,isOutsideRemixApp:i}=e;console.error(n);let s,a=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if($(n))return t.createElement(ht,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),a);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(ht,{title:"Application Error!",isOutsideRemixApp:i},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),a)}function ht(e){var n;let{title:i,renderScripts:s,isOutsideRemixApp:a,children:r}=e,{routeModules:o}=et();return null!==o.root&&void 0!==n&&n.Layout&&!a?r:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,i)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},r,s?t.createElement(ot,null):null)))}var ut="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ut&&(window.__reactRouterVersion="7.9.2")}catch(Bb){}function dt(e){let{basename:n,children:i,window:s}=e,a=t.useRef();null==a.current&&(a.current=v({window:s,v5Compat:!0}));let r=a.current,[o,l]=t.useState({action:r.action,location:r.location}),c=t.useCallback(e=>{t.startTransition(()=>l(e))},[l]);return t.useLayoutEffect(()=>r.listen(c),[r,c]),t.createElement(Ne,{basename:n,children:i,location:o.location,navigationType:o.action,navigator:r})}var pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=t.forwardRef(function(e,n){let i,{onClick:a,discover:r="render",prefetch:o="none",relative:l,reloadDocument:h,replace:u,state:d,target:f,to:g,preventScrollReset:m,viewTransition:v}=e,w=s(e,p),{basename:x}=t.useContext(re),k="string"===typeof g&&pt.test(g),A=!1;if("string"===typeof g&&k&&(i=g,ut))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),n=H(t.pathname,x);t.origin===e.origin&&null!=n?g=n+t.search+t.hash:A=!0}catch(Bb){y(!1,'<Link to="'.concat(g,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let _=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(he(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=t.useContext(re),{hash:a,pathname:r,search:o}=ge(e,{relative:n}),l=r;return"/"!==i&&(l="/"===r?i:X([i,r])),s.createHref({pathname:l,search:o,hash:a})}(g,{relative:l}),[E,C,P]=function(e,n){let i=t.useContext(Ze),[s,a]=t.useState(!1),[r,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:h,onMouseLeave:u,onTouchStart:d}=n,p=t.useRef(null);t.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(s){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[s]);let f=()=>{a(!0)},g=()=>{a(!1),o(!1)};return i?"intent"!==e?[r,p,{}]:[r,p,{onFocus:tt(l,f),onBlur:tt(c,g),onMouseEnter:tt(h,f),onMouseLeave:tt(u,g),onTouchStart:tt(d,f)}]:[!1,p,{}]}(o,w),M=function(e){let{target:n,replace:i,state:s,preventScrollReset:a,relative:r,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=fe(),c=ue(),h=ge(e,{relative:r});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:S(c)===S(h);l(e,{replace:n,state:s,preventScrollReset:a,relative:r,viewTransition:o})}},[c,l,h,i,s,n,e,a,r,o])}(g,{replace:u,state:d,target:f,preventScrollReset:m,relative:l,viewTransition:v});let T=t.createElement("a",c(c(c({},w),P),{},{href:i||_,onClick:A||h?a:function(e){a&&a(e),e.defaultPrevented||M(e)},ref:lt(n,C),target:f,"data-discover":k||"render"!==r?void 0:"true"}));return E&&!k?t.createElement(t.Fragment,null,T,t.createElement(it,{page:_})):T});ft.displayName="Link",t.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:a=!1,className:r="",end:o=!1,style:l,to:h,viewTransition:u,children:d}=e,p=s(e,f),g=ge(h,{relative:p.relative}),m=ue(),v=t.useContext(te),{navigator:y,basename:w}=t.useContext(re),x=null!=v&&function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.useContext(ie);b(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=vt("useViewTransitionState"),a=ge(e,{relative:n});if(!i.isTransitioning)return!1;let r=H(i.currentLocation.pathname,s)||i.currentLocation.pathname,o=H(i.nextLocation.pathname,s)||i.nextLocation.pathname;return null!=W(a.pathname,o)||null!=W(a.pathname,r)}(g)&&!0===u,S=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,k=m.pathname,A=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(k=k.toLowerCase(),A=A?A.toLowerCase():null,S=S.toLowerCase()),A&&w&&(A=H(A,w)||A);const _="/"!==S&&S.endsWith("/")?S.length-1:S.length;let E,C=k===S||!o&&k.startsWith(S)&&"/"===k.charAt(_),P=null!=A&&(A===S||!o&&A.startsWith(S)&&"/"===A.charAt(S.length)),M={isActive:C,isPending:P,isTransitioning:x},T=C?i:void 0;E="function"===typeof r?r(M):[r,C?"active":null,P?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof l?l(M):l;return t.createElement(ft,c(c({},p),{},{"aria-current":T,className:E,ref:n,style:R,to:h,viewTransition:u}),"function"===typeof d?d(M):d)}).displayName="NavLink";var gt=t.forwardRef((e,n)=>{let{discover:i="render",fetcherKey:a,navigate:r,reloadDocument:o,replace:l,state:h,method:u=Ie,action:d,onSubmit:p,relative:f,preventScrollReset:m,viewTransition:v}=e,y=s(e,g),w=wt(),x=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=t.useContext(re),s=t.useContext(le);b(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),r=c({},ge(e||".",{relative:n})),o=ue();if(null==e){r.search=o.search;let e=new URLSearchParams(r.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();r.search=n?"?".concat(n):""}}e&&"."!==e||!a.route.index||(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(r.pathname="/"===r.pathname?i:X([i,r.pathname]));return S(r)}(d,{relative:f}),k="get"===u.toLowerCase()?"get":"post",A="string"===typeof d&&pt.test(d);return t.createElement("form",c(c({ref:n,method:k,action:x,onSubmit:o?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;w(t||e.currentTarget,{fetcherKey:a,method:n,navigate:r,replace:l,state:h,relative:f,preventScrollReset:m,viewTransition:v})}},y),{},{"data-discover":A||"render"!==i?void 0:"true"}))});function mt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function vt(e){let n=t.useContext(ee);return b(n,mt(e)),n}gt.displayName="Form";var bt=0,yt=()=>"__".concat(String(++bt),"__");function wt(){let{router:e}=vt("useSubmit"),{basename:n}=t.useContext(re),i=_e("useRouteId");return t.useCallback(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:r,encType:o,formData:l,body:c}=Be(t,n);if(!1===s.navigate){let t=s.fetcherKey||yt();await e.fetch(t,i,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||r,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||r,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:i,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,n,i])}const xt=n.p+"static/media/Logo.bfecde693e9e89839234.png";var St=n(579);function kt(){const e=fe();return(0,St.jsx)("img",{src:xt,alt:"Logo LPP",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",border:"3px solid #2196f3",background:"white",marginRight:16,cursor:"pointer"},onClick:()=>e("/"),title:"Ir a inicio"})}function At(e){let{label:t,to:n,onClick:i,active:s,extraClass:a,navRef:r}=e;return(0,St.jsx)("a",{href:n,onClick:i,className:"navitem"+(s?" navitem-active":"")+(a?" "+a:""),ref:r,children:t})}const _t=["children","color"];function Et(e){let{children:t,color:n="primary"}=e,i=s(e,_t);const a={primary:"#0074D9",orange:"#FF851B",white:"#fff"};return(0,St.jsx)("button",c(c({style:{background:a[n]||a.primary,color:"white"===n?"#0074D9":"#fff",border:"none",borderRadius:6,padding:"8px 20px",fontWeight:"bold",cursor:"pointer",margin:4}},i),{},{children:t}))}function Ct(e){let{open:n,onClose:i}=e;const[s,a]=(0,t.useState)(!0),[r,o]=(0,t.useState)({usuarioOEmail:"",password:"",remember:!1}),[l,h]=(0,t.useState)({nombre:"",email:"",password:"",terms:!1}),[u,d]=(0,t.useState)("");if(!n)return null;const p=e=>{const{name:t,value:n,type:i,checked:s}=e.target;o(e=>c(c({},e),{},{[t]:"checkbox"===i?s:n}))},f=e=>{const{name:t,value:n,type:i,checked:s}=e.target;h(e=>c(c({},e),{},{[t]:"checkbox"===i?s:n}))};return(0,St.jsx)("div",{className:"modal-bg",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #0d1628 80%, #338dff22 100%)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px) saturate(120%)"},children:(0,St.jsxs)("div",{className:"wrapper",style:{display:"flex",background:"linear-gradient(135deg, #0d1628 80%, #338dff22 100%)",border:"2.5px solid #338dff44",borderRadius:24,boxShadow:"0 8px 32px #004aad88, 0 1.5px 8px #0002",minWidth:320,maxWidth:420,width:"96vw",padding:0,overflow:"hidden",position:"relative",margin:0,justifyContent:"center",alignItems:"center"},children:[(0,St.jsx)("button",{className:"icon-close",onClick:i,tabIndex:0,"aria-label":"Cerrar ventana",onKeyDown:e=>("Enter"===e.key||" "===e.key)&&i(),type:"button",children:(0,St.jsx)("ion-icon",{name:"close",children:"x"})}),(0,St.jsxs)("div",{className:"form-slider",style:{width:"100%",display:"flex",flexDirection:"row",transition:"transform 0.5s cubic-bezier(.4,2,.6,1)",transform:s?"translateX(0)":"translateX(-100%)"},children:[(0,St.jsxs)("div",{className:"form-box login",style:{minWidth:"100%",maxWidth:"100%",transition:"opacity 0.3s",opacity:s?1:.3,pointerEvents:s?"auto":"none"},children:[(0,St.jsx)("h2",{children:"Iniciar Sesi\xf3n"}),u&&s&&(0,St.jsx)("div",{className:"error-message",children:u}),(0,St.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d(""),r.usuarioOEmail&&r.password)try{const e=await async function(e){let{usuarioOEmail:t,password:n}=e;return(await fetch("http://localhost:4000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})})).json()}(r);e.error?d(e.error):e.token?(localStorage.setItem("token",e.token),d("\xa1Inicio de sesi\xf3n exitoso!"),setTimeout(()=>{d(""),i&&i()},1200)):d("Error desconocido al iniciar sesi\xf3n")}catch(t){d("Error de conexi\xf3n con el servidor")}else d("Todos los campos son obligatorios")},autoComplete:"on",children:[(0,St.jsxs)("div",{className:"input-box",children:[(0,St.jsx)("span",{className:"icon",children:(0,St.jsx)("ion-icon",{name:"mail"})}),(0,St.jsx)("input",{type:"text",name:"usuarioOEmail",required:!0,value:r.usuarioOEmail,onChange:p,autoComplete:"username"}),(0,St.jsx)("label",{children:"Usuario o correo"})]}),(0,St.jsxs)("div",{className:"input-box",children:[(0,St.jsx)("span",{className:"icon",children:(0,St.jsx)("ion-icon",{name:"lock-closed"})}),(0,St.jsx)("input",{type:"password",name:"password",required:!0,value:r.password,onChange:p,autoComplete:"current-password"}),(0,St.jsx)("label",{children:"Contrase\xf1a"})]}),(0,St.jsxs)("div",{className:"remember-forgot",children:[(0,St.jsxs)("label",{children:[(0,St.jsx)("input",{type:"checkbox",name:"remember",checked:r.remember,onChange:p})," Recu\xe9rdame"]}),(0,St.jsx)("a",{href:"#",children:"\xbfOlvidaste tu contrase\xf1a?"})]}),(0,St.jsx)("button",{type:"submit",className:"btn",children:"Iniciar Sesi\xf3n"}),(0,St.jsx)("div",{className:"login-register",children:(0,St.jsxs)("p",{children:["\xbfA\xfan no tienes una cuenta? ",(0,St.jsx)("a",{href:"#",className:"register-link",onClick:e=>{e.preventDefault(),a(!1)},children:"Reg\xedstrate"})]})})]})]}),(0,St.jsxs)("div",{className:"form-box register",style:{minWidth:"100%",maxWidth:"100%",transition:"opacity 0.3s",opacity:s?.3:1,pointerEvents:s?"none":"auto"},children:[(0,St.jsx)("h2",{children:"Registrarse"}),u&&!s&&(0,St.jsx)("div",{className:"error-message",children:u}),(0,St.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d(""),l.nombre&&l.email&&l.password)try{const e=await async function(e){let{nombre:t,email:n,password:i}=e;return(await fetch("http://localhost:4000/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:n,password:i})})).json()}(l);e.error?d(e.error):(d("\xa1Registro exitoso! Ahora puedes iniciar sesi\xf3n."),setTimeout(()=>{a(!0),d("")},1200),h({nombre:"",email:"",password:"",terms:!1}))}catch(t){d("Error de conexi\xf3n con el servidor")}else d("Todos los campos son obligatorios")},autoComplete:"on",children:[(0,St.jsxs)("div",{className:"input-box",children:[(0,St.jsx)("span",{className:"icon",children:(0,St.jsx)("ion-icon",{name:"person"})}),(0,St.jsx)("input",{type:"text",name:"nombre",required:!0,value:l.nombre,onChange:f}),(0,St.jsx)("label",{children:"Nombre de Usuario"})]}),(0,St.jsxs)("div",{className:"input-box",children:[(0,St.jsx)("span",{className:"icon",children:(0,St.jsx)("ion-icon",{name:"mail"})}),(0,St.jsx)("input",{type:"email",name:"email",required:!0,value:l.email,onChange:f,autoComplete:"email"}),(0,St.jsx)("label",{children:"Correo"})]}),(0,St.jsxs)("div",{className:"input-box",children:[(0,St.jsx)("span",{className:"icon",children:(0,St.jsx)("ion-icon",{name:"lock-closed"})}),(0,St.jsx)("input",{type:"password",name:"password",required:!0,minLength:6,value:l.password,onChange:f,autoComplete:"new-password"}),(0,St.jsx)("label",{children:"Contrase\xf1a (m\xednimo 6 caracteres)"})]}),(0,St.jsx)("div",{className:"remember-forgot",children:(0,St.jsxs)("label",{children:[(0,St.jsx)("input",{type:"checkbox",name:"terms",required:!0,checked:l.terms,onChange:f})," Acepto los t\xe9rminos y condiciones"]})}),(0,St.jsx)("button",{type:"submit",className:"btn",children:"Registrarse"}),(0,St.jsx)("div",{className:"login-register",children:(0,St.jsxs)("p",{children:["\xbfYa tienes una cuenta? ",(0,St.jsx)("a",{href:"#",className:"login-link",onClick:e=>{e.preventDefault(),a(!0)},children:"Inicia Sesi\xf3n"})]})})]})]})]})]})})}const Pt=[{label:"Temas",to:"/temas"},{label:"Galeria",to:"/galeria"},{label:"Retos LPP",to:"/retos"},{label:"Creadores",to:"/creadores"}];const Mt=function(){const e=!!localStorage.getItem("token"),[n,i]=t.useState(!1),[s,a]=t.useState(!1),r=(0,t.useRef)(null);t.useEffect(()=>{e&&!sessionStorage.getItem("libroLPPAnim")&&(a(!0),sessionStorage.setItem("libroLPPAnim","1"),setTimeout(()=>a(!1),1e4))},[e]);const[o,l]=t.useState(null);return t.useEffect(()=>{if(s&&r.current){const e=r.current.getBoundingClientRect();l(e)}},[s]),(0,St.jsxs)(St.Fragment,{children:[(0,St.jsxs)("nav",{className:"navbar",children:[(0,St.jsxs)("div",{className:"navbar-left",children:[(0,St.jsx)(kt,{}),e&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(At,{label:"Libro + LPP",to:"/libro",navRef:r}),(0,St.jsx)(At,{label:"Retos LPP",to:"/retos"})]}),Pt.filter(e=>"Retos LPP"!==e.label).map(e=>(0,St.jsx)(At,{label:e.label,to:e.to},e.to))]}),e?(0,St.jsx)(Et,{color:"orange",onClick:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("libroLPPAnim"),window.location.href="/"},children:"Cerrar sesi\xf3n"}):(0,St.jsx)(Et,{color:"orange",onClick:()=>i(!0),children:"Acceder"})]}),s&&o&&(0,St.jsxs)("div",{className:"libro-overlay-anim",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999,pointerEvents:"none"},children:[(0,St.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.55)",transition:"background 0.7s",animation:"libroOverlayFade 10s linear forwards"}}),(0,St.jsx)("div",{style:{position:"absolute",top:o.top-8,left:o.left-8,width:o.width+16,height:o.height+16,borderRadius:12,boxShadow:"0 0 0 9999px rgba(0,0,0,0.55)",border:"3px solid #ffb300",background:"rgba(255,255,255,0.08)",transition:"all 0.7s",animation:"libroOverlayFocus 5s cubic-bezier(.4,2,.6,1) forwards",pointerEvents:"none"}})]}),(0,St.jsx)(Ct,{open:n,onClose:()=>i(!1)})]})};function Tt(){return(0,St.jsx)("footer",{className:"footer-main",children:(0,St.jsxs)("div",{className:"footer-content",children:[(0,St.jsx)("div",{className:"footer-logo",children:(0,St.jsx)(kt,{})}),(0,St.jsxs)("div",{className:"footer-info",children:[(0,St.jsx)("div",{className:"footer-title",children:"Logic Loop"}),(0,St.jsx)("div",{className:"footer-copyright",children:"\xa9 2025 Logic Loop. Todos los derechos reservados."}),(0,St.jsxs)("div",{className:"footer-links",children:[(0,St.jsx)("a",{href:"/terminos",target:"_blank",rel:"noopener noreferrer",children:"T\xe9rminos y condiciones"}),(0,St.jsx)("span",{className:"footer-sep",children:"|"}),(0,St.jsx)("a",{href:"/privacidad",target:"_blank",rel:"noopener noreferrer",children:"Pol\xedtica de privacidad"})]})]})]})})}const Rt=[{title:"\xbfQu\xe9 es LPP y por qu\xe9 aprenderlo?",alt:"\xbfQu\xe9 es LPP?",text:"El Lenguaje de Programaci\xf3n para Principiantes (LPP) es una herramienta pedag\xf3gica dise\xf1ada para introducir a estudiantes \u2014especialmente en colegios y primeros semestres universitarios\u2014 al pensamiento l\xf3gico y computacional. No se trata de un lenguaje de programaci\xf3n profesional como Python o Java, sino de un pseudoc\xf3digo estructurado que sigue reglas sencillas y claras. Esto permite que los alumnos se concentren en comprender la l\xf3gica de los algoritmos sin distraerse con la complejidad de la sintaxis de lenguajes avanzados.\n\nEn otras palabras, LPP funciona como un \u201cpuente\u201d que facilita el paso del pensamiento natural al pensamiento algor\xedtmico."},{title:"\xbfC\xf3mo puedo empezar con LPP?",alt:"\xbfC\xf3mo empezar con LPP?",text:"Para iniciarse en LPP, no se requiere experiencia previa en programaci\xf3n. El camino recomendado es:\n\n\u2022 Familiarizarse con la sintaxis b\xe1sica: comandos simples como Escribir, Leer, Si\u2026Entonces, Mientras o Para que representan las estructuras m\xe1s comunes en cualquier lenguaje real.\n\u2022 Resolver peque\xf1os problemas cotidianos: por ejemplo, dise\xf1ar un algoritmo que calcule el promedio de tres n\xfameros, que muestre si un n\xfamero es par o impar, o que imprima una tabla de multiplicar.\n\u2022 Usar plataformas interactivas (como LPP-Curso): que validan el c\xf3digo, corrigen errores y permiten practicar en un entorno amigable.\n\u2022 Dar el salto progresivo a lenguajes formales: una vez adquirida la l\xf3gica, la transici\xf3n a C, Python o Java se vuelve mucho m\xe1s natural."},{title:"\xbfCu\xe1l es el objetivo central de LPP?",alt:"Objetivo de LPP",text:"El objetivo central de LPP es formar en pensamiento algor\xedtmico y resoluci\xf3n de problemas, m\xe1s que ense\xf1ar un lenguaje en s\xed mismo.\n\nCon LPP se busca que los estudiantes:\n\u2022 Aprendan a descomponer un problema grande en pasos peque\xf1os.\n\u2022 Reconozcan las estructuras de control fundamentales (condicionales, ciclos, secuencias).\n\u2022 Desarrollen habilidades de an\xe1lisis l\xf3gico que podr\xe1n aplicar luego en cualquier disciplina tecnol\xf3gica.\n\nEn este sentido, LPP se convierte en una herramienta para entrenar la mente en procesos ordenados y sistem\xe1ticos, una competencia clave en la era digital."},{title:"\xbfQu\xe9 recursos ofrece LPP para el aprendizaje?",img:"/assets/lpp-recursos.png",alt:"Recursos de LPP",text:"LPP aporta varios elementos que enriquecen el proceso educativo:\n\n\u2022 Simplicidad sint\xe1ctica: sus instrucciones son f\xe1ciles de leer, casi como frases en espa\xf1ol, lo que reduce la barrera de entrada.\n\u2022 Ambiente controlado de pr\xe1ctica: los errores son comprensibles y est\xe1n pensados para guiar al aprendiz, no para frustrarlo.\n\u2022 Variedad de ejercicios progresivos: desde ejemplos b\xe1sicos hasta problemas m\xe1s complejos que retan al estudiante a pensar de manera abstracta.\n\u2022 Validadores y entornos gr\xe1ficos: como LPP-Curso, que ofrecen retroalimentaci\xf3n inmediata, ejercicios guiados, galer\xedas de ejemplos y m\xf3dulos para trabajar en comunidad.\n\u2022 Transversalidad educativa: LPP no se limita a inform\xe1tica; se puede aplicar en matem\xe1ticas, f\xedsica, l\xf3gica o resoluci\xf3n de problemas cotidianos.\n\nEn resumen, LPP no busca crear programadores expertos de inmediato, sino despertar en los estudiantes el h\xe1bito de pensar como un programador: anal\xedtico, l\xf3gico y orientado a soluciones."}];function Nt(){const[e,n]=(0,t.useState)(0);return(0,St.jsxs)("div",{className:"lpp-carousel-container",children:[(0,St.jsx)("button",{className:"lpp-carousel-arrow left",onClick:()=>n(e=>0===e?Rt.length-1:e-1),"aria-label":"Anterior",children:"\u2190"}),(0,St.jsx)("div",{className:"lpp-carousel-track",children:Rt.map((t,n)=>{let i="lpp-carousel-card";return n===e?i+=" active":n===(e-1+Rt.length)%Rt.length?i+=" prev":n===(e+1)%Rt.length?i+=" next":i+=" hidden",(0,St.jsx)("div",{className:i,children:(0,St.jsxs)("div",{className:"lpp-card-content",children:[(0,St.jsx)("h3",{children:t.title}),(0,St.jsx)("p",{children:t.text.split("\n").map((e,t)=>(0,St.jsxs)("span",{children:[e,(0,St.jsx)("br",{})]},t))})]})},t.title)})}),(0,St.jsx)("button",{className:"lpp-carousel-arrow right",onClick:()=>n(e=>e===Rt.length-1?0:e+1),"aria-label":"Siguiente",children:"\u2192"})]})}function Lt(){return(0,St.jsxs)("div",{className:"home-landing",children:[(0,St.jsx)("h1",{className:"home-title",children:"Bienvenido a LPP-Curso"}),(0,St.jsxs)("p",{className:"home-desc",children:["Plataforma interactiva para aprender y practicar pseudoc\xf3digo LPP.",(0,St.jsx)("br",{}),"Accede a temas, galer\xeda, creadores y mucho m\xe1s tras iniciar sesi\xf3n."]}),(0,St.jsxs)("section",{className:"lpp-intro-section",style:{marginTop:48},children:[(0,St.jsx)("h2",{style:{fontSize:"2rem",fontWeight:700,color:"var(--azul-claro, #004aad)",marginBottom:24,textAlign:"center",letterSpacing:"0.01em"},children:"\xbfLPP? \xbfC\xf3mo empiezo con esto?"}),(0,St.jsx)(Nt,{})]})]})}function Dt(e){let{onZoomIn:n,onZoomOut:i,onZoomReset:s,onFitWidth:a,onFitHeight:r,onFitAuto:o,fitMode:l,onPrevPage:c,onNextPage:h,onGoToPage:u,currentPage:d,totalPages:p,onToggleThumbnails:f,thumbnailsVisible:g,onReadSelection:m,currentZoom:v,onZoomTo:b,onToggleFullscreen:y,isFullscreen:w,onToggleAutoplay:x,isAutoplay:S,searchQuery:k,onSearchQueryChange:A,onSearchPrev:_,onSearchNext:E,searchInfo:C,onToggleBookmark:P,isBookmarked:M}=e;const[T,R]=(0,t.useState)(v||100);(0,t.useEffect)(()=>{void 0!==v&&R(v)},[v]);return(0,St.jsx)("nav",{className:"libro-controls","aria-label":"Controles del libro interactivo",children:(0,St.jsxs)("div",{className:"libro-controls-row",children:[(0,St.jsxs)("div",{className:"controls-group",children:[(0,St.jsx)("button",{onClick:i,"aria-label":"Alejar",title:"Alejar",className:"control-btn",disabled:T<=50,children:(0,St.jsx)("span",{className:"icon",children:"\u2212"})}),(0,St.jsxs)("div",{className:"zoom-display",children:[(0,St.jsxs)("select",{value:T,onChange:e=>(e=>{if(R(e),b)return void b(e);if(100===e)return void(null===s||void 0===s||s());const t=e-(v||100),a=Math.abs(t)/25;if(t>0)for(let i=0;i<a;i++)setTimeout(()=>null===n||void 0===n?void 0:n(),30*i);else if(t<0)for(let n=0;n<a;n++)setTimeout(()=>null===i||void 0===i?void 0:i(),30*n)})(Number(e.target.value)),"aria-label":"Nivel de zoom",className:"zoom-select",children:[(0,St.jsx)("option",{value:50,children:"50%"}),(0,St.jsx)("option",{value:75,children:"75%"}),(0,St.jsx)("option",{value:100,children:"100%"}),(0,St.jsx)("option",{value:125,children:"125%"}),(0,St.jsx)("option",{value:150,children:"150%"}),(0,St.jsx)("option",{value:175,children:"175%"}),(0,St.jsx)("option",{value:200,children:"200%"}),(0,St.jsx)("option",{value:250,children:"250%"}),(0,St.jsx)("option",{value:300,children:"300%"})]}),(0,St.jsxs)("span",{className:"zoom-text",children:[T,"%"]})]}),(0,St.jsx)("button",{onClick:n,"aria-label":"Acercar",title:"Acercar",className:"control-btn",disabled:T>=300,children:(0,St.jsx)("span",{className:"icon",children:"+"})}),(0,St.jsx)("button",{onClick:s,"aria-label":"Restablecer zoom",title:"Restablecer zoom al 100%",className:"control-btn",children:(0,St.jsx)("span",{className:"icon",children:"\u2b6e"})})]}),(0,St.jsx)("div",{className:"controls-separator"}),(0,St.jsx)("div",{className:"controls-separator"}),(0,St.jsxs)("div",{className:"controls-group",children:[(0,St.jsx)("button",{onClick:c,"aria-label":"P\xe1gina anterior",title:"P\xe1gina anterior",className:"control-btn",disabled:d<=1,children:(0,St.jsx)("span",{className:"icon",children:"\u2039"})}),(0,St.jsxs)("div",{className:"page-navigation",children:[(0,St.jsx)("input",{type:"number",min:"1",max:p,value:d,onChange:e=>{const t=Number(e.target.value);t>=1&&t<=p&&(null===u||void 0===u||u(t))},onBlur:e=>{let t=Number(e.target.value);t<1&&(t=1),t>p&&(t=p),null===u||void 0===u||u(t)},"aria-label":"N\xfamero de p\xe1gina",className:"page-input"}),(0,St.jsxs)("span",{className:"page-count",children:["de ",p]})]}),(0,St.jsx)("button",{onClick:h,"aria-label":"P\xe1gina siguiente",title:"P\xe1gina siguiente",className:"control-btn",disabled:d>=p,children:(0,St.jsx)("span",{className:"icon",children:"\u203a"})})]}),(0,St.jsx)("div",{className:"controls-separator"}),(0,St.jsxs)("div",{className:"controls-group",children:[y&&(0,St.jsx)("button",{onClick:y,"aria-label":w?"Salir de pantalla completa":"Pantalla completa",title:w?"Salir de pantalla completa":"Pantalla completa",className:"control-btn ".concat(w?"active":""),"aria-pressed":w,children:(0,St.jsx)("span",{className:"icon",children:"\u26f6"})}),A&&(0,St.jsxs)("div",{className:"search-container",children:[(0,St.jsx)("input",{type:"text",className:"search-input",placeholder:"Buscar en el libro...",value:k||"",onChange:e=>A(e.target.value)}),(0,St.jsx)("button",{className:"control-btn",type:"button",onClick:_,title:"Resultado anterior","aria-label":"Resultado anterior",children:(0,St.jsx)("span",{className:"icon",children:"\u2191"})}),(0,St.jsx)("button",{className:"control-btn",type:"button",onClick:E,title:"Siguiente resultado","aria-label":"Siguiente resultado",children:(0,St.jsx)("span",{className:"icon",children:"\u2193"})}),C&&(0,St.jsxs)("span",{className:"search-info",children:[C.current+1,"/",C.total]})]}),P&&(0,St.jsx)("button",{onClick:P,"aria-label":M?"Quitar marcador":"Agregar marcador",title:M?"Quitar marcador":"Agregar marcador",className:"control-btn ".concat(M?"active":""),children:(0,St.jsx)("span",{className:"icon",children:M?"\u2605":"\u2606"})}),f&&(0,St.jsx)("button",{onClick:f,"aria-label":g?"Ocultar miniaturas":"Mostrar miniaturas",title:g?"Ocultar miniaturas":"Mostrar miniaturas",className:"control-btn ".concat(g?"active":""),children:(0,St.jsx)("span",{className:"icon",children:"\ud83d\udcd1"})}),(0,St.jsx)("button",{onClick:m,"aria-label":"Leer texto seleccionado",title:"Leer texto seleccionado en voz alta",className:"control-btn",children:(0,St.jsx)("span",{className:"icon",children:"\ud83d\udd0a"})}),x&&(0,St.jsx)("button",{onClick:x,"aria-label":S?"Detener reproducci\xf3n autom\xe1tica":"Reproducci\xf3n autom\xe1tica",title:S?"Detener reproducci\xf3n autom\xe1tica":"Reproducci\xf3n autom\xe1tica",className:"control-btn ".concat(S?"active":""),children:(0,St.jsx)("span",{className:"icon",children:S?"\u23f8":"\u25b6"})})]})]})})}var It=n(27);const Ft=t.forwardRef((e,n)=>{const i=(0,t.useRef)(null),s=(0,t.useRef)([]),a=(0,t.useRef)(),[r,o]=(0,t.useState)([]);(0,t.useImperativeHandle)(n,()=>({pageFlip:()=>a.current}));const l=(0,t.useCallback)(()=>{a.current&&a.current.clear()},[]),c=(0,t.useCallback)(()=>{const e=a.current;e&&(e.off("flip"),e.off("changeOrientation"),e.off("changeState"),e.off("init"),e.off("update"))},[]);return(0,t.useEffect)(()=>{if(s.current=[],e.children){const n=t.Children.map(e.children,e=>t.cloneElement(e,{ref:e=>{e&&s.current.push(e)}}));e.renderOnlyPageLengthChange&&r.length===n.length||(n.length<r.length&&l(),o(n))}},[e.children]),(0,t.useEffect)(()=>{r.length>0&&s.current.length>0&&(c(),i.current&&!a.current&&(a.current=new It.PageFlip(i.current,e)),a.current.getFlipController()?a.current.updateFromHtml(s.current):a.current.loadFromHTML(s.current),(()=>{const t=a.current;t&&(e.onFlip&&t.on("flip",t=>e.onFlip(t)),e.onChangeOrientation&&t.on("changeOrientation",t=>e.onChangeOrientation(t)),e.onChangeState&&t.on("changeState",t=>e.onChangeState(t)),e.onInit&&t.on("init",t=>e.onInit(t)),e.onUpdate&&t.on("update",t=>e.onUpdate(t)))})())},[r]),t.createElement("div",{ref:i,className:e.className,style:e.style},r)}),jt=t.memo(Ft);function Ot(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(s){t[i]=s,e.apply(n,t)}})}function Wt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zt(e,t){Wt(e,t),t.add(e)}function Bt(e,t,n){Wt(e,t),t.set(e,n)}function Ht(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Ut(e,t,n){return n(Ht(e,t))}function Vt(e,t){return e.get(Ht(e,t))}function Gt(e,t,n){return e.set(Ht(e,t),n),n}function qt(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return qt=function(e){this.s=e,this.n=e.next},qt.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new qt(e)}var Xt,Yt,Kt,Qt,$t,Jt,Zt,en,tn,nn,sn,an,rn,on,ln;const cn="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),hn=[.001,0,0,.001,0,0],un=1.35,dn=1,pn=2,fn=4,gn=16,mn=32,vn=64,bn=128,yn=256,wn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xn="pdfjs_internal_editor_",Sn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},kn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},An=0,_n=1,En=2,Cn=3,Pn=3,Mn=4,Tn={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Rn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Nn=1,Ln=2,Dn=3,In=4,Fn=5,jn={ERRORS:0,WARNINGS:1,INFOS:5},On={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Wn=0,zn=1,Bn=2,Hn=3;let Un=jn.WARNINGS;function Vn(e){Number.isInteger(e)&&(Un=e)}function Gn(){return Un}function qn(e){Un>=jn.INFOS&&console.log("Info: ".concat(e))}function Xn(e){Un>=jn.WARNINGS&&console.log("Warning: ".concat(e))}function Yn(e){throw new Error(e)}function Kn(e,t){e||Yn(t)}function Qn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(s){}}const i=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function $n(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(e);return i?(i.hash=t,i.href):n&&Qn(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function Jn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const Zn=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class ei extends Zn{constructor(e,t){super(e,"PasswordException"),this.code=t}}class ti extends Zn{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class ni extends Zn{constructor(e){super(e,"InvalidPDFException")}}class ii extends Zn{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class si extends Zn{constructor(e){super(e,"FormatError")}}class ai extends Zn{constructor(e){super(e,"AbortException")}}function ri(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||Yn("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let s=0;s<t;s+=n){const a=Math.min(s+n,t),r=e.subarray(s,a);i.push(String.fromCharCode.apply(null,r))}return i.join("")}function oi(e){"string"!==typeof e&&Yn("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}class li{static get isLittleEndian(){return Jn(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return Jn(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return Jn(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return Jn(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return Jn(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Jn(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ci=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class hi{static makeHexColor(e,t,n){return"#".concat(ci[e]).concat(ci[t]).concat(ci[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[n],s=e[n+1];e[n]=i*t[0]+s*t[2]+t[4],e[n+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[0],s=t[1],a=t[2],r=t[3],o=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],h=e[n+c+1];e[n+c]=t*i+h*a+o,e[n+c+1]=t*s+h*r+l}}static applyInverseTransform(e,t){const n=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const i=t[0],s=t[1],a=t[2],r=t[3],o=t[4],l=t[5],c=e[0],h=e[1],u=e[2],d=e[3];let p=i*c+o,f=p,g=i*u+o,m=g,v=r*h+l,b=v,y=r*d+l,w=y;if(0!==s||0!==a){const e=s*c,t=s*u,n=a*h,i=a*d;p+=n,m+=n,g+=i,f+=i,v+=e,w+=e,y+=t,b+=t}n[0]=Math.min(n[0],p,g,f,m),n[1]=Math.min(n[1],v,y,b,w),n[2]=Math.max(n[2],p,g,f,m),n[3]=Math.max(n[3],v,y,b,w)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],s=e[2],a=e[3],r=n**2+i**2,o=n*s+i*a,l=s**2+a**2,c=(r+l)/2,h=Math.sqrt(c**2-(r*l-o**2));t[0]=Math.sqrt(c+h||1),t[1]=Math.sqrt(c-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[n,s,i,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,n,i,s,a,r,o,l){l[0]=Math.min(l[0],e,r),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,r),l[3]=Math.max(l[3],t,o),Ht(hi,this,di).call(this,e,n,s,r,t,i,a,o,3*(3*(n-s)-e+r),6*(e-2*n+s),3*(n-e),l),Ht(hi,this,di).call(this,e,n,s,r,t,i,a,o,3*(3*(i-a)-t+o),6*(t-2*i+a),3*(i-t),l)}}function ui(e,t,n,i,s,a,r,o,l,c){if(l<=0||l>=1)return;const h=1-l,u=l*l,d=u*l,p=h*(h*(h*e+3*l*t)+3*u*n)+d*i,f=h*(h*(h*s+3*l*a)+3*u*r)+d*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}function di(e,t,n,i,s,a,r,o,l,c,h,u){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&Ht(Xt,this,ui).call(this,e,t,n,i,s,a,r,o,-h/c,u));const d=c**2-4*h*l;if(d<0)return;const p=Math.sqrt(d),f=2*l;Ht(Xt,this,ui).call(this,e,t,n,i,s,a,r,o,(-c+p)/f,u),Ht(Xt,this,ui).call(this,e,t,n,i,s,a,r,o,(-c-p)/f,u)}Xt=hi;let pi=null,fi=null;function gi(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),ri(e)}const mi="pdfjs_internal_id_";function vi(e,t,n){return Math.min(Math.max(e,t),n)}function bi(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(ri(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(t=>{t(e(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});const yi="http://www.w3.org/2000/svg";class wi{}async function xi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Ci(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)i(new Error(s.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(s.response)}n(s.responseText)}},s.send(null)})}Yt=wi,o(wi,"CSS",96),o(wi,"PDF",72),o(wi,"PDF_TO_CSS_UNITS",Yt.CSS/Yt.PDF);class Si{constructor(e){let{viewBox:t,userUnit:n,scale:i,rotation:s,offsetX:a=0,offsetY:r=0,dontFlip:o=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=i,this.rotation=s,this.offsetX=a,this.offsetY=r,i*=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let h,u,d,p,f,g,m,v;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,u=0,d=0,p=1;break;case 90:h=0,u=1,d=1,p=0;break;case 270:h=0,u=-1,d=-1,p=0;break;case 0:h=1,u=0,d=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,p=-p),0===h?(f=Math.abs(c-t[1])*i+a,g=Math.abs(l-t[0])*i+r,m=(t[3]-t[1])*i,v=(t[2]-t[0])*i):(f=Math.abs(l-t[0])*i+a,g=Math.abs(c-t[1])*i+r,m=(t[2]-t[0])*i,v=(t[3]-t[1])*i),this.transform=[h*i,u*i,d*i,p*i,f-h*i*l-d*i*c,g-u*i*l-p*i*c],this.width=m,this.height=v}get rawDims(){const e=this.viewBox;return Jn(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Si({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return hi.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];hi.applyTransform(t,this.transform);const n=[e[2],e[3]];return hi.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return hi.applyInverseTransform(n,this.transform),n}}class ki extends Zn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function Ai(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function _i(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class Ei{constructor(){o(this,"started",Object.create(null)),o(this,"times",[])}time(e){e in this.started&&Xn("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||Xn("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:s}of this.times)e.push("".concat(n.padEnd(t)," ").concat(s-i,"ms\n"));return e.join("")}}function Ci(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function Pi(e){e.preventDefault()}function Mi(e){e.preventDefault(),e.stopPropagation()}class Ti{static toDateObject(e){if(!e||"string"!==typeof e)return null;Ht(Ti,this,Ri)._||(Ri._=Ht(Ti,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=Ht(Ti,this,Ri)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let r=parseInt(t[5],10);r=r>=0&&r<=59?r:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===l?(a+=c,r+=h):"+"===l&&(a-=c,r-=h),new Date(Date.UTC(n,i,s,a,r,o))}}var Ri={_:void 0};function Ni(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Xn('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function Li(e){const{a:t,b:n,c:i,d:s,e:a,f:r}=e.getTransform();return[t,n,i,s,a,r]}function Di(e){const{a:t,b:n,c:i,d:s,e:a,f:r}=e.getTransform().invertSelf();return[t,n,i,s,a,r]}function Ii(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof Si){const{pageWidth:i,pageHeight:s}=t.rawDims,{style:a}=e,r=li.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(s,"px"),c=r?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),h=r?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(a.width=h,a.height=c):(a.width=c,a.height=h)}i&&e.setAttribute("data-main-rotation",t.rotation)}class Fi{constructor(){const{pixelRatio:e}=Fi;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=1/0,r=1/0,o=1/0;(n=Fi.capPixels(n,s))>0&&(a=Math.sqrt(n/(e*t))),-1!==i&&(r=i/e,o=i/t);const l=Math.min(a,r,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const ji=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Oi=new WeakMap,Wi=new WeakMap,zi=new WeakMap,Bi=new WeakMap,Hi=new WeakMap,Ui=new WeakMap,Vi=new WeakSet;class Gi{constructor(e){zt(this,Vi),Bt(this,Oi,null),Bt(this,Wi,null),Bt(this,zi,void 0),Bt(this,Bi,null),Bt(this,Hi,null),Bt(this,Ui,null),Gt(zi,this,e),$i._||($i._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=Gt(Oi,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=Vt(zi,this)._uiManager._signal;e.addEventListener("contextmenu",Pi,{signal:t}),e.addEventListener("pointerdown",qi,{signal:t});const n=Gt(Bi,this,document.createElement("div"));n.className="buttons",e.append(n);const i=Vt(zi,this).toolbarPosition;if(i){const{style:t}=e,n="ltr"===Vt(zi,this)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return e}get div(){return Vt(Oi,this)}hide(){var e;Vt(Oi,this).classList.add("hidden"),null===(e=Vt(Wi,this))||void 0===e||e.hideDropdown()}show(){var e;Vt(Oi,this).classList.remove("hidden"),null===(e=Vt(Hi,this))||void 0===e||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=Vt(zi,this),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",$i._[e]),Ht(Vi,this,Ki).call(this,n),n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),Vt(Bi,this).append(n)}async addAltText(e){const t=await e.render();Ht(Vi,this,Ki).call(this,t),Vt(Bi,this).append(t,Ut(Vi,this,Qi)),Gt(Hi,this,e)}addColorPicker(e){Gt(Wi,this,e);const t=e.renderButton();Ht(Vi,this,Ki).call(this,t),Vt(Bi,this).append(t,Ut(Vi,this,Qi))}async addEditSignatureButton(e){const t=Gt(Ui,this,await e.renderEditButton(Vt(zi,this)));Ht(Vi,this,Ki).call(this,t),Vt(Bi,this).append(t,Ut(Vi,this,Qi))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton()}}updateEditSignatureButton(e){Vt(Ui,this)&&(Vt(Ui,this).title=e)}remove(){var e;Vt(Oi,this).remove(),null===(e=Vt(Wi,this))||void 0===e||e.destroy(),Gt(Wi,this,null)}}function qi(e){e.stopPropagation()}function Xi(e){Vt(zi,this)._focusEventsAllowed=!1,Mi(e)}function Yi(e){Vt(zi,this)._focusEventsAllowed=!0,Mi(e)}function Ki(e){const t=Vt(zi,this)._uiManager._signal;e.addEventListener("focusin",Ht(Vi,this,Xi).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",Ht(Vi,this,Yi).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Pi,{signal:t})}function Qi(e){const t=document.createElement("div");return t.className="divider",t}var $i={_:null},Ji=new WeakMap,Zi=new WeakMap,es=new WeakMap,ts=new WeakSet;class ns{constructor(e){zt(this,ts),Bt(this,Ji,null),Bt(this,Zi,null),Bt(this,es,void 0),Gt(es,this,e)}show(e,t,n){const[i,s]=Ht(ts,this,ss).call(this,t,n),{style:a}=Vt(Zi,this)||Gt(Zi,this,Ht(ts,this,is).call(this));e.append(Vt(Zi,this)),a.insetInlineEnd="".concat(100*i,"%"),a.top="calc(".concat(100*s,"% + var(--editor-toolbar-vert-offset))")}hide(){Vt(Zi,this).remove()}}function is(){const e=Gt(Zi,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Pi,{signal:Vt(es,this)._signal});const t=Gt(Ji,this,document.createElement("div"));return t.className="buttons",e.append(t),Ht(ts,this,as).call(this),e}function ss(e,t){let n=0,i=0;for(const s of e){const e=s.y+s.height;if(e<n)continue;const a=s.x+(t?s.width:0);e>n?(i=a,n=e):t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,n]}function as(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=Vt(es,this)._signal;e.addEventListener("contextmenu",Pi,{signal:n}),e.addEventListener("click",()=>{Vt(es,this).highlightSelection("floating_button")},{signal:n}),Vt(Ji,this).append(e)}function rs(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}var os=new WeakMap;class ls{constructor(){Bt(this,os,0)}get id(){var e,t;return"".concat(xn).concat((Gt(os,this,(e=Vt(os,this),t=e++,e)),t))}}var cs=new WeakMap,hs=new WeakMap,us=new WeakMap,ds=new WeakSet;class ps{constructor(){zt(this,ds),Bt(this,cs,gi()),Bt(this,hs,0),Bt(this,us,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return Jn(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:s}=e;return Ht(ds,this,fs).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(s),e)}async getFromUrl(e){return Ht(ds,this,fs).call(this,e,e)}async getFromBlob(e,t){const n=await t;return Ht(ds,this,fs).call(this,e,n)}async getFromId(e){Vt(us,this)||Gt(us,this,new Map);const t=Vt(us,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,i,s;Vt(us,this)||Gt(us,this,new Map);let a=Vt(us,this).get(e);if(null!==(s=a)&&void 0!==s&&s.bitmap)return a.refCounter+=1,a;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),a={bitmap:r.transferToImageBitmap(),id:"image_".concat(Vt(cs,this),"_").concat((Gt(hs,this,(n=Vt(hs,this),i=n++,n)),i)),refCounter:1,isSvg:!1},Vt(us,this).set(e,a),Vt(us,this).set(a.id,a),a}getSvgUrl(e){const t=Vt(us,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;Vt(us,this)||Gt(us,this,new Map);const n=Vt(us,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(i.width,i.height);e.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=e.convertToBlob()}null===(t=i.close)||void 0===t||t.call(i),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(Vt(cs,this),"_"))}}async function fs(e,t){var n;Vt(us,this)||Gt(us,this,new Map);let i=Vt(us,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var s,a;let e;if(i||(i={bitmap:null,id:"image_".concat(Vt(cs,this),"_").concat((Gt(hs,this,(s=Vt(hs,this),a=s++,s)),a)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await xi(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=Kt._isSVGFittingCanvas,n=new FileReader,s=new Image,a=new Promise((e,a)=>{s.onload=()=>{i.bitmap=s,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;s.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},s.onerror=n.onerror=a});n.readAsDataURL(e),await a}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(Bb){Xn(Bb),i=null}return Vt(us,this).set(e,i),i&&Vt(us,this).set(i.id,i),i}Kt=ps;var gs=new WeakMap,ms=new WeakMap,vs=new WeakMap,bs=new WeakMap;class ys{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;Bt(this,gs,[]),Bt(this,ms,!1),Bt(this,vs,void 0),Bt(this,bs,-1),Gt(vs,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:s,type:a=NaN,overwriteIfSameType:r=!1,keepUndo:o=!1}=e;if(s&&t(),Vt(ms,this))return;const l={cmd:t,undo:n,post:i,type:a};if(-1===Vt(bs,this))return Vt(gs,this).length>0&&(Vt(gs,this).length=0),Gt(bs,this,0),void Vt(gs,this).push(l);if(r&&Vt(gs,this)[Vt(bs,this)].type===a)return o&&(l.undo=Vt(gs,this)[Vt(bs,this)].undo),void(Vt(gs,this)[Vt(bs,this)]=l);const c=Vt(bs,this)+1;c===Vt(vs,this)?Vt(gs,this).splice(0,1):(Gt(bs,this,c),c<Vt(gs,this).length&&Vt(gs,this).splice(c)),Vt(gs,this).push(l)}undo(){if(-1===Vt(bs,this))return;Gt(ms,this,!0);const{undo:e,post:t}=Vt(gs,this)[Vt(bs,this)];e(),null===t||void 0===t||t(),Gt(ms,this,!1),Gt(bs,this,Vt(bs,this)-1)}redo(){if(Vt(bs,this)<Vt(gs,this).length-1){Gt(bs,this,Vt(bs,this)+1),Gt(ms,this,!0);const{cmd:e,post:t}=Vt(gs,this)[Vt(bs,this)];e(),null===t||void 0===t||t(),Gt(ms,this,!1)}}hasSomethingToUndo(){return-1!==Vt(bs,this)}hasSomethingToRedo(){return Vt(bs,this)<Vt(gs,this).length-1}cleanType(e){if(-1!==Vt(bs,this)){for(let t=Vt(bs,this);t>=0;t--)if(Vt(gs,this)[t].type!==e)return Vt(gs,this).splice(t+1,Vt(bs,this)-t),void Gt(bs,this,t);Vt(gs,this).length=0,Gt(bs,this,-1)}}destroy(){Gt(gs,this,null)}}var ws=new WeakSet;class xs{constructor(e){zt(this,ws),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=li.platform;for(const[n,i,s={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:s}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:s}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(Ht(ws,this,Ss).call(this,t));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:r=null}}=n;r&&!r(e,t)||(i.bind(e,...a,t)(),s||Mi(t))}}function Ss(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class ks{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,Ni(i))}t.remove()}(e),Jn(this,"_colors",e)}convert(e){const t=Ni(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((e,n)=>e===t[n]))return ks._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?hi.makeHexColor(...t):e}}o(ks,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var As=new WeakMap,_s=new WeakMap,Es=new WeakMap,Cs=new WeakMap,Ps=new WeakMap,Ms=new WeakMap,Ts=new WeakMap,Rs=new WeakMap,Ns=new WeakMap,Ls=new WeakMap,Ds=new WeakMap,Is=new WeakMap,Fs=new WeakMap,js=new WeakMap,Os=new WeakMap,Ws=new WeakMap,zs=new WeakMap,Bs=new WeakMap,Hs=new WeakMap,Us=new WeakMap,Vs=new WeakMap,Gs=new WeakMap,qs=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Ks=new WeakMap,Qs=new WeakMap,$s=new WeakMap,Js=new WeakMap,Zs=new WeakMap,ea=new WeakMap,ta=new WeakMap,na=new WeakMap,ia=new WeakMap,sa=new WeakMap,aa=new WeakMap,ra=new WeakMap,oa=new WeakMap,la=new WeakMap,ca=new WeakMap,ha=new WeakMap,ua=new WeakMap,da=new WeakMap,pa=new WeakMap,fa=new WeakMap,ga=new WeakSet;class ma{static get _keyboardManager(){const e=ma.prototype,t=e=>Vt(ua,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Jn(this,"_keyboardManager",new xs([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&Vt(ua,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&Vt(ua,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,n,i,s,a,r,l,c,h,u,d,p,f,g){zt(this,ga),Bt(this,As,new AbortController),Bt(this,_s,null),Bt(this,Es,new Map),Bt(this,Cs,new Map),Bt(this,Ps,null),Bt(this,Ms,null),Bt(this,Ts,null),Bt(this,Rs,new ys),Bt(this,Ns,null),Bt(this,Ls,null),Bt(this,Ds,0),Bt(this,Is,new Set),Bt(this,Fs,null),Bt(this,js,null),Bt(this,Os,new Set),o(this,"_editorUndoBar",null),Bt(this,Ws,!1),Bt(this,zs,!1),Bt(this,Bs,!1),Bt(this,Hs,null),Bt(this,Us,null),Bt(this,Vs,null),Bt(this,Gs,null),Bt(this,qs,!1),Bt(this,Xs,null),Bt(this,Ys,new ls),Bt(this,Ks,!1),Bt(this,Qs,!1),Bt(this,$s,null),Bt(this,Js,null),Bt(this,Zs,null),Bt(this,ea,null),Bt(this,ta,null),Bt(this,na,Sn.NONE),Bt(this,ia,new Set),Bt(this,sa,null),Bt(this,aa,null),Bt(this,ra,null),Bt(this,oa,null),Bt(this,la,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),Bt(this,ca,[0,0]),Bt(this,ha,null),Bt(this,ua,null),Bt(this,da,null),Bt(this,pa,null),Bt(this,fa,null);const m=this._signal=Vt(As,this).signal;Gt(ua,this,e),Gt(da,this,t),Gt(pa,this,n),Gt(Ps,this,i),Gt(aa,this,s),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:m}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),a._on("setpreference",this.onSetPreference.bind(this),{signal:m}),a._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:m}),Ht(ga,this,Sa).call(this),Ht(ga,this,Ma).call(this),Ht(ga,this,_a).call(this),Gt(Ms,this,r.annotationStorage),Gt(Hs,this,r.filterFactory),Gt(ra,this,l),Gt(Gs,this,c||null),Gt(Ws,this,h),Gt(zs,this,u),Gt(Bs,this,d),Gt(ta,this,p||null),this.viewParameters={realScale:wi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=!1!==g}destroy(){var e,t,n,i,s,a,r,o;null===(e=Vt(fa,this))||void 0===e||e.resolve(),Gt(fa,this,null),null===(t=Vt(As,this))||void 0===t||t.abort(),Gt(As,this,null),this._signal=null;for(const l of Vt(Cs,this).values())l.destroy();Vt(Cs,this).clear(),Vt(Es,this).clear(),Vt(Os,this).clear(),null===(n=Vt(ea,this))||void 0===n||n.clear(),Gt(_s,this,null),Vt(ia,this).clear(),Vt(Rs,this).destroy(),null===(i=Vt(Ps,this))||void 0===i||i.destroy(),null===(s=Vt(aa,this))||void 0===s||s.destroy(),null===(a=Vt(Xs,this))||void 0===a||a.hide(),Gt(Xs,this,null),null===(r=Vt(Zs,this))||void 0===r||r.destroy(),Gt(Zs,this,null),Vt(Us,this)&&(clearTimeout(Vt(Us,this)),Gt(Us,this,null)),Vt(ha,this)&&(clearTimeout(Vt(ha,this)),Gt(ha,this,null)),null===(o=this._editorUndoBar)||void 0===o||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return Vt(ta,this)}get useNewAltTextFlow(){return Vt(zs,this)}get useNewAltTextWhenAddingImage(){return Vt(Bs,this)}get hcmFilter(){return Jn(this,"hcmFilter",Vt(ra,this)?Vt(Hs,this).addHCMFilter(Vt(ra,this).foreground,Vt(ra,this).background):"none")}get direction(){return Jn(this,"direction",getComputedStyle(Vt(ua,this)).direction)}get highlightColors(){return Jn(this,"highlightColors",Vt(Gs,this)?new Map(Vt(Gs,this).split(",").map(e=>((e=e.split("=").map(e=>e.trim()))[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return Jn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),Gt(Ls,this,e)}setMainHighlightColorPicker(e){Gt(Zs,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=Vt(Ps,this))||void 0===t||t.editAltText(this,e,n)}getSignature(e){var t;null===(t=Vt(aa,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return Vt(aa,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)Gt(Bs,this,n)}onPageChanging(e){let{pageNumber:t}=e;Gt(Ds,this,t-1)}focusMainContainer(){Vt(ua,this).focus()}findParent(e,t){for(const n of Vt(Cs,this).values()){const{x:i,y:s,width:a,height:r}=n.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=s&&t<=s+r)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Vt(da,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){Vt(Os,this).add(e)}removeShouldRescale(e){Vt(Os,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*wi.PDF_TO_CSS_UNITS;for(const i of Vt(Os,this))i.onScaleChanging();null===(t=Vt(Ls,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:a}=t,r=t.toString(),o=Ht(ga,this,va).call(this,t).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;t.empty();const c=Ht(ga,this,ba).call(this,o),h=Vt(na,this)===Sn.NONE,u=()=>{null===c||void 0===c||c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:a,text:r}),h&&this.showAllEditors("highlight",!0,!0)};h?this.switchToMode(Sn.HIGHLIGHT,u):u()}addToAnnotationStorage(e){e.isEmpty()||!Vt(Ms,this)||Vt(Ms,this).has(e.id)||Vt(Ms,this).setValue(e.id,e)}a11yAlert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Vt(pa,this);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Vt(qs,this)&&(Gt(qs,this,!1),Ht(ga,this,xa).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of Vt(ia,this))if(t.div.contains(e)){Gt(Js,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!Vt(Js,this))return;const[e,t]=Vt(Js,this);Gt(Js,this,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){Ht(ga,this,_a).call(this),Ht(ga,this,Ca).call(this)}removeEditListeners(){Ht(ga,this,Ea).call(this),Ht(ga,this,Pa).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of Vt(js,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of Vt(js,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=Vt(_s,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of Vt(ia,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const e of Vt(js,this))if(e.isHandlingMimeForPasting(a.type))return void e.paste(a,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){return void Xn('paste: "'.concat(s.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const a of n){const t=await i.deserialize(a);if(!t)return;e.push(t)}const t=()=>{for(const t of e)Ht(ga,this,Da).call(this,t);Ht(ga,this,ja).call(this,e)},s=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:s,mustExec:!0})}catch(s){Xn('paste: "'.concat(s.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),Vt(na,this)===Sn.NONE||this.isEditorHandlingKeyboard||ma._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,Vt(qs,this)&&(Gt(qs,this,!1),Ht(ga,this,xa).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(Ht(ga,this,ka).call(this),Ht(ga,this,Ca).call(this),Ht(ga,this,Ta).call(this,{isEditing:Vt(na,this)!==Sn.NONE,isEmpty:Ht(ga,this,Fa).call(this),hasSomethingToUndo:Vt(Rs,this).hasSomethingToUndo(),hasSomethingToRedo:Vt(Rs,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(Ht(ga,this,Aa).call(this),Ht(ga,this,Pa).call(this),Ht(ga,this,Ta).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!Vt(js,this)){Gt(js,this,e);for(const e of Vt(js,this))Ht(ga,this,Ra).call(this,e.defaultPropertiesToUpdate)}}getId(){return Vt(Ys,this).id}get currentLayer(){return Vt(Cs,this).get(Vt(Ds,this))}getLayer(e){return Vt(Cs,this).get(e)}get currentPageIndex(){return Vt(Ds,this)}addLayer(e){Vt(Cs,this).set(e.pageIndex,e),Vt(Ks,this)?e.enable():e.disable()}removeLayer(e){Vt(Cs,this).delete(e.pageIndex)}async updateMode(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Vt(na,this)!==e&&(!Vt(fa,this)||(await Vt(fa,this).promise,Vt(fa,this)))){var a,r;if(Gt(fa,this,Promise.withResolvers()),null===(t=Vt(Ls,this))||void 0===t||t.commitOrRemove(),Gt(na,this,e),e===Sn.NONE)return this.setEditingState(!1),Ht(ga,this,La).call(this),null===(a=this._editorUndoBar)||void 0===a||a.hide(),void Vt(fa,this).resolve();if(e===Sn.SIGNATURE)await(null===(r=Vt(aa,this))||void 0===r?void 0:r.loadSignatures());this.setEditingState(!0),await Ht(ga,this,Na).call(this),this.unselectAll();for(const t of Vt(Cs,this).values())t.updateMode(e);if(!n)return i&&this.addNewEditorFromKeyboard(),void Vt(fa,this).resolve();for(const e of Vt(Es,this).values())e.annotationElementId===n||e.id===n?(this.setSelected(e),s&&e.enterInEditMode()):e.unselect();Vt(fa,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==Vt(na,this)&&this._eventBus.dispatch("switchannotationeditormode",c({source:this},e))}updateParams(e,t){var n;if(Vt(js,this)){switch(e){case kn.CREATE:return void this.currentLayer.addNewEditor(t);case kn.HIGHLIGHT_DEFAULT_COLOR:null===(n=Vt(Zs,this))||void 0===n||n.updateColor(t);break;case kn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Vt(oa,this)||Gt(oa,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(const n of Vt(ia,this))n.updateParams(e,t);for(const n of Vt(js,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const s of Vt(Es,this).values())s.editorType===e&&s.show(t);(null===(n=null===(i=Vt(oa,this))||void 0===i?void 0:i.get(kn.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&Ht(ga,this,Ra).call(this,[[kn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Vt(Qs,this)!==e){Gt(Qs,this,e);for(const t of Vt(Cs,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of Vt(Es,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return Vt(Es,this).get(e)}addEditor(e){Vt(Es,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(Vt(Us,this)&&clearTimeout(Vt(Us,this)),Gt(Us,this,setTimeout(()=>{this.focusMainContainer(),Gt(Us,this,null)},0))),Vt(Es,this).delete(e.id),e.annotationElementId)&&(null===(t=Vt(ea,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&Vt(Is,this).has(e.annotationElementId))||(null===(n=Vt(Ms,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){Vt(Is,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return Vt(Is,this).has(e)}removeDeletedAnnotationElement(e){Vt(Is,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){Vt(_s,this)!==e&&(Gt(_s,this,e),e&&Ht(ga,this,Ra).call(this,e.propertiesToUpdate))}updateUI(e){Ut(ga,this,Ia)===e&&Ht(ga,this,Ra).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){Ht(ga,this,Ra).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(Vt(ia,this).has(e))return Vt(ia,this).delete(e),e.unselect(),void Ht(ga,this,Ta).call(this,{hasSelectedEditor:this.hasSelection});Vt(ia,this).add(e),e.select(),Ht(ga,this,Ra).call(this,e.propertiesToUpdate),Ht(ga,this,Ta).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),null===(t=Vt(Ls,this))||void 0===t||t.commitOrRemove();for(const n of Vt(ia,this))n!==e&&n.unselect();Vt(ia,this).clear(),Vt(ia,this).add(e),e.select(),Ht(ga,this,Ra).call(this,e.propertiesToUpdate),Ht(ga,this,Ta).call(this,{hasSelectedEditor:!0})}isSelected(e){return Vt(ia,this).has(e)}get firstSelectedEditor(){return Vt(ia,this).values().next().value}unselect(e){e.unselect(),Vt(ia,this).delete(e),Ht(ga,this,Ta).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==Vt(ia,this).size}get isEnterHandled(){return 1===Vt(ia,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;Vt(Rs,this).undo(),Ht(ga,this,Ta).call(this,{hasSomethingToUndo:Vt(Rs,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ht(ga,this,Fa).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){Vt(Rs,this).redo(),Ht(ga,this,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Vt(Rs,this).hasSomethingToRedo(),isEmpty:Ht(ga,this,Fa).call(this)})}addCommands(e){Vt(Rs,this).add(e),Ht(ga,this,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ht(ga,this,Fa).call(this)})}cleanUndoStack(e){Vt(Rs,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...Vt(ia,this)],i=()=>{for(const e of n)Ht(ga,this,Da).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(i,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:i,mustExec:!0})}commitOrRemove(){var e;null===(e=Vt(_s,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return Vt(_s,this)||this.hasSelection}selectAll(){for(const e of Vt(ia,this))e.commit();Ht(ga,this,ja).call(this,Vt(Es,this).values())}unselectAll(){var e;if((!Vt(_s,this)||(Vt(_s,this).commitOrRemove(),Vt(na,this)===Sn.NONE))&&(null===(e=Vt(Ls,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of Vt(ia,this))e.unselect();Vt(ia,this).clear(),Ht(ga,this,Ta).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;Vt(ca,this)[0]+=e,Vt(ca,this)[1]+=t;const[n,i]=Vt(ca,this),s=[...Vt(ia,this)];Vt(ha,this)&&clearTimeout(Vt(ha,this)),Gt(ha,this,setTimeout(()=>{Gt(ha,this,null),Vt(ca,this)[0]=Vt(ca,this)[1]=0,this.addCommands({cmd:()=>{for(const e of s)Vt(Es,this).has(e.id)&&(e.translateInPage(n,i),e.translationDone())},undo:()=>{for(const e of s)Vt(Es,this).has(e.id)&&(e.translateInPage(-n,-i),e.translationDone())},mustExec:!1})},1e3));for(const a of s)a.translateInPage(e,t),a.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Gt(Fs,this,new Map);for(const e of Vt(ia,this))Vt(Fs,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Vt(Fs,this))return!1;this.disableUserSelect(!1);const e=Vt(Fs,this);Gt(Fs,this,null);let t=!1;for(const[{x:i,y:s,pageIndex:a},r]of e)r.newX=i,r.newY=s,r.newPageIndex=a,t||(t=i!==r.savedX||s!==r.savedY||a!==r.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(Vt(Es,this).has(e.id)){const s=Vt(Cs,this).get(i);s?e._setParentAndPosition(s,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:s,newPageIndex:a}]of e)n(t,i,s,a)},undo:()=>{for(const[t,{savedX:i,savedY:s,savedPageIndex:a}]of e)n(t,i,s,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(Vt(Fs,this))for(const n of Vt(Fs,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===Vt(ia,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return Vt(_s,this)===e}getActive(){return Vt(_s,this)}getMode(){return Vt(na,this)}get imageManager(){return Jn(this,"imageManager",new ps)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:a}=e.getBoundingClientRect();let r;switch(e.getAttribute("data-main-rotation")){case"90":r=(e,t,r,o)=>({x:(t-i)/a,y:1-(e+r-n)/s,width:o/a,height:r/s});break;case"180":r=(e,t,r,o)=>({x:1-(e+r-n)/s,y:1-(t+o-i)/a,width:r/s,height:o/a});break;case"270":r=(e,t,r,o)=>({x:1-(t+o-i)/a,y:(e-n)/s,width:o/a,height:r/s});break;default:r=(e,t,r,o)=>({x:(e-n)/s,y:(t-i)/a,width:r/s,height:o/a})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:s}of e.getClientRects())0!==i&&0!==s&&o.push(r(t,n,i,s))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(Vt(Ts,this)||Gt(Ts,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=Vt(Ts,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=Vt(Ts,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=Vt(Ms,this).getRawValue(n);i&&(Vt(na,this)!==Sn.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var i;const s=null===(i=Vt(ea,this))||void 0===i?void 0:i.get(e);s&&(s.setCanvas(t,n),Vt(ea,this).delete(e))}addMissingCanvas(e,t){(Vt(ea,this)||Gt(ea,this,new Map)).set(e,t)}}function va(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function ba(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of Vt(Cs,this).values())if(n.hasTextLayer(e))return n;return null}function ya(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=Ht(ga,this,va).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(Vt(Xs,this)||Gt(Xs,this,new ns(this)),Vt(Xs,this).show(t,n,"ltr"===this.direction))}function wa(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(Vt(sa,this))null===(n=Vt(Xs,this))||void 0===n||n.hide(),Gt(sa,this,null),Ht(ga,this,Ta).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===Vt(sa,this))return;const s=Ht(ga,this,va).call(this,t).closest(".textLayer");var a;if(s){if(null===(e=Vt(Xs,this))||void 0===e||e.hide(),Gt(sa,this,i),Ht(ga,this,Ta).call(this,{hasSelectedText:!0}),(Vt(na,this)===Sn.HIGHLIGHT||Vt(na,this)===Sn.NONE)&&(Vt(na,this)===Sn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Gt(qs,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=Vt(na,this)===Sn.HIGHLIGHT?Ht(ga,this,ba).call(this,s):null;null===e||void 0===e||e.toggleDrawing();const t=new AbortController,n=this.combinedSignal(t),i=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&Ht(ga,this,xa).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}}else Vt(sa,this)&&(null===(a=Vt(Xs,this))||void 0===a||a.hide(),Gt(sa,this,null),Ht(ga,this,Ta).call(this,{hasSelectedText:!1}))}function xa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Vt(na,this)===Sn.HIGHLIGHT?this.highlightSelection(e):Vt(Ws,this)&&Ht(ga,this,ya).call(this)}function Sa(){document.addEventListener("selectionchange",Ht(ga,this,wa).bind(this),{signal:this._signal})}function ka(){if(Vt(Vs,this))return;Gt(Vs,this,new AbortController);const e=this.combinedSignal(Vt(Vs,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function Aa(){var e;null===(e=Vt(Vs,this))||void 0===e||e.abort(),Gt(Vs,this,null)}function _a(){if(Vt($s,this))return;Gt($s,this,new AbortController);const e=this.combinedSignal(Vt($s,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function Ea(){var e;null===(e=Vt($s,this))||void 0===e||e.abort(),Gt($s,this,null)}function Ca(){if(Vt(Ns,this))return;Gt(Ns,this,new AbortController);const e=this.combinedSignal(Vt(Ns,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function Pa(){var e;null===(e=Vt(Ns,this))||void 0===e||e.abort(),Gt(Ns,this,null)}function Ma(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function Ta(e){Object.entries(e).some(e=>{let[t,n]=e;return Vt(la,this)[t]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Vt(la,this),e)}),Vt(na,this)===Sn.HIGHLIGHT&&!1===e.hasSelectedEditor&&Ht(ga,this,Ra).call(this,[[kn.HIGHLIGHT_FREE,!0]]))}function Ra(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function Na(){if(!Vt(Ks,this)){Gt(Ks,this,!0);const e=[];for(const t of Vt(Cs,this).values())e.push(t.enable());await Promise.all(e);for(const t of Vt(Es,this).values())t.enable()}}function La(){if(this.unselectAll(),Vt(Ks,this)){Gt(Ks,this,!1);for(const e of Vt(Cs,this).values())e.disable();for(const e of Vt(Es,this).values())e.disable()}}function Da(e){const t=Vt(Cs,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function Ia(e){let t=null;for(t of Vt(ia,e));return t}function Fa(){if(0===Vt(Es,this).size)return!0;if(1===Vt(Es,this).size)for(const e of Vt(Es,this).values())return e.isEmpty();return!1}function ja(e){for(const t of Vt(ia,this))t.unselect();Vt(ia,this).clear();for(const t of e)t.isEmpty()||(Vt(ia,this).add(t),t.select());Ht(ga,this,Ta).call(this,{hasSelectedEditor:this.hasSelection})}o(ma,"TRANSLATE_SMALL",1),o(ma,"TRANSLATE_BIG",10);var Oa=new WeakMap,Wa=new WeakMap,za=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,Ua=new WeakMap,Va=new WeakMap,Ga=new WeakMap,qa=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,Ka=new WeakMap,Qa=new WeakSet;class $a{constructor(e){zt(this,Qa),Bt(this,Oa,null),Bt(this,Wa,!1),Bt(this,za,null),Bt(this,Ba,null),Bt(this,Ha,null),Bt(this,Ua,null),Bt(this,Va,!1),Bt(this,Ga,null),Bt(this,qa,null),Bt(this,Xa,null),Bt(this,Ya,null),Bt(this,Ka,!1),Gt(qa,this,e),Gt(Ka,this,e._uiManager.useNewAltTextFlow),er._||(er._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=$a._l10n)&&void 0!==t||($a._l10n=e)}async render(){const e=Gt(za,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=Gt(Ba,this,document.createElement("span"));e.append(t),Vt(Ka,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",er._.missing),t.setAttribute("data-l10n-id",er._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=Vt(qa,this)._uiManager._signal;e.addEventListener("contextmenu",Pi,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const i=e=>{e.preventDefault(),Vt(qa,this)._uiManager.editAltText(Vt(qa,this)),Vt(Ka,this)&&Vt(qa,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Ut(Qa,this,Ja)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(Gt(Va,this,!0),i(t))},{signal:n}),await Ht(Qa,this,Za).call(this),e}finish(){Vt(za,this)&&(Vt(za,this).focus({focusVisible:Vt(Va,this)}),Gt(Va,this,!1))}isEmpty(){return Vt(Ka,this)?null===Vt(Oa,this):!Vt(Oa,this)&&!Vt(Wa,this)}hasData(){return Vt(Ka,this)?null!==Vt(Oa,this)||!!Vt(Xa,this):this.isEmpty()}get guessedText(){return Vt(Xa,this)}async setGuessedText(e){null===Vt(Oa,this)&&(Gt(Xa,this,e),Gt(Ya,this,await $a._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),Ht(Qa,this,Za).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!Vt(Ka,this)||Vt(Oa,this))return null===(t=Vt(Ga,this))||void 0===t||t.remove(),void Gt(Ga,this,null);if(!Vt(Ga,this)){const e=Gt(Ga,this,document.createElement("div"));e.className="noAltTextBadge",Vt(qa,this).div.append(e)}Vt(Ga,this).classList.toggle("hidden",!e)}serialize(e){let t=Vt(Oa,this);return e||Vt(Xa,this)!==t||(t=Vt(Ya,this)),{altText:t,decorative:Vt(Wa,this),guessedText:Vt(Xa,this),textWithDisclaimer:Vt(Ya,this)}}get data(){return{altText:Vt(Oa,this),decorative:Vt(Wa,this)}}set data(e){let{altText:t,decorative:n,guessedText:i,textWithDisclaimer:s,cancel:a=!1}=e;i&&(Gt(Xa,this,i),Gt(Ya,this,s)),Vt(Oa,this)===t&&Vt(Wa,this)===n||(a||(Gt(Oa,this,t),Gt(Wa,this,n)),Ht(Qa,this,Za).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Vt(za,this)&&(!e&&Vt(Ua,this)&&(clearTimeout(Vt(Ua,this)),Gt(Ua,this,null)),Vt(za,this).disabled=!e)}shown(){Vt(qa,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Ut(Qa,this,Ja)}})}destroy(){var e,t;null===(e=Vt(za,this))||void 0===e||e.remove(),Gt(za,this,null),Gt(Ba,this,null),Gt(Ha,this,null),null===(t=Vt(Ga,this))||void 0===t||t.remove(),Gt(Ga,this,null)}}function Ja(e){return(Vt(Oa,e)?"added":null===Vt(Oa,e)&&e.guessedText&&"review")||"missing"}async function Za(){const e=Vt(za,this);if(!e)return;if(Vt(Ka,this)){var t,n;if(e.classList.toggle("done",!!Vt(Oa,this)),e.setAttribute("data-l10n-id",er._[Ut(Qa,this,Ja)]),null===(t=Vt(Ba,this))||void 0===t||t.setAttribute("data-l10n-id",er._["".concat(Ut(Qa,this,Ja),"-label")]),!Vt(Oa,this))return void(null===(n=Vt(Ha,this))||void 0===n||n.remove())}else{var i;if(!Vt(Oa,this)&&!Vt(Wa,this))return e.classList.remove("done"),void(null===(i=Vt(Ha,this))||void 0===i||i.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=Vt(Ha,this);if(!s){Gt(Ha,this,s=document.createElement("span")),s.className="tooltip",s.setAttribute("role","tooltip"),s.id="alt-text-tooltip-".concat(Vt(qa,this).id);const t=100,n=Vt(qa,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(Vt(Ua,this)),Gt(Ua,this,null)},{once:!0}),e.addEventListener("mouseenter",()=>{Gt(Ua,this,setTimeout(()=>{Gt(Ua,this,null),Vt(Ha,this).classList.add("show"),Vt(qa,this)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:n}),e.addEventListener("mouseleave",()=>{var e;Vt(Ua,this)&&(clearTimeout(Vt(Ua,this)),Gt(Ua,this,null)),null===(e=Vt(Ha,this))||void 0===e||e.classList.remove("show")},{signal:n})}Vt(Wa,this)?s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.removeAttribute("data-l10n-id"),s.textContent=Vt(Oa,this)),s.parentNode||e.append(s);const a=Vt(qa,this).getElementForAltText();null===a||void 0===a||a.setAttribute("aria-describedby",s.id)}var er={_:null};o($a,"_l10n",null);var tr=new WeakMap,nr=new WeakMap,ir=new WeakMap,sr=new WeakMap,ar=new WeakMap,rr=new WeakMap,or=new WeakMap,lr=new WeakMap,cr=new WeakMap,hr=new WeakMap,ur=new WeakMap,dr=new WeakMap,pr=new WeakSet;class fr{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:r=null,signal:o}=e;zt(this,pr),Bt(this,tr,void 0),Bt(this,nr,!1),Bt(this,ir,null),Bt(this,sr,void 0),Bt(this,ar,void 0),Bt(this,rr,void 0),Bt(this,or,void 0),Bt(this,lr,null),Bt(this,cr,void 0),Bt(this,hr,null),Bt(this,ur,void 0),Bt(this,dr,null),Gt(tr,this,t),Gt(ir,this,i),Gt(sr,this,n),Gt(ar,this,s),Gt(rr,this,a),Gt(or,this,r),Gt(ur,this,new AbortController),Gt(cr,this,AbortSignal.any([o,Vt(ur,this).signal])),t.addEventListener("touchstart",Ht(pr,this,gr).bind(this),{passive:!1,signal:Vt(cr,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Fi.pixelRatio}destroy(){var e,t;null===(e=Vt(ur,this))||void 0===e||e.abort(),Gt(ur,this,null),null===(t=Vt(lr,this))||void 0===t||t.abort(),Gt(lr,this,null)}}function gr(e){var t,n;if(null!==(t=Vt(sr,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(Vt(lr,this))return;const e=Gt(lr,this,new AbortController),t=AbortSignal.any([Vt(cr,this),e.signal]),n=Vt(tr,this),i={capture:!0,signal:t,passive:!1},s=e=>{var t;"touch"===e.pointerType&&(null===(t=Vt(lr,this))||void 0===t||t.abort(),Gt(lr,this,null))};return n.addEventListener("pointerdown",e=>{"touch"===e.pointerType&&(Mi(e),s(e))},i),n.addEventListener("pointerup",s,i),void n.addEventListener("pointercancel",s,i)}if(!Vt(dr,this)){var i;Gt(dr,this,new AbortController);const e=AbortSignal.any([Vt(cr,this),Vt(dr,this).signal]),t=Vt(tr,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",Ht(pr,this,mr).bind(this),n);const s=Ht(pr,this,vr).bind(this);t.addEventListener("touchend",s,n),t.addEventListener("touchcancel",s,n),n.capture=!0,t.addEventListener("pointerdown",Mi,n),t.addEventListener("pointermove",Mi,n),t.addEventListener("pointercancel",Mi,n),t.addEventListener("pointerup",Mi,n),null===(i=Vt(ar,this))||void 0===i||i.call(this)}if(Mi(e),2!==e.touches.length||null!==(n=Vt(ir,this))&&void 0!==n&&n.call(this))return void Gt(hr,this,null);let[s,a]=e.touches;s.identifier>a.identifier&&([s,a]=[a,s]),Gt(hr,this,{touch0X:s.screenX,touch0Y:s.screenY,touch1X:a.screenX,touch1Y:a.screenY})}function mr(e){var t;if(!Vt(hr,this)||2!==e.touches.length)return;Mi(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:s,screenY:a}=n,{screenX:r,screenY:o}=i,l=Vt(hr,this),{touch0X:c,touch0Y:h,touch1X:u,touch1Y:d}=l,p=u-c,f=d-h,g=r-s,m=o-a,v=Math.hypot(g,m)||1,b=Math.hypot(p,f)||1;if(!Vt(nr,this)&&Math.abs(b-v)<=Qt.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=a,l.touch1X=r,l.touch1Y=o,!Vt(nr,this))return void Gt(nr,this,!0);const y=[(s+r)/2,(a+o)/2];null===(t=Vt(rr,this))||void 0===t||t.call(this,y,b,v)}function vr(e){if(!(e.touches.length>=2)){var t;if(Vt(dr,this))Vt(dr,this).abort(),Gt(dr,this,null),null===(t=Vt(or,this))||void 0===t||t.call(this);Vt(hr,this)&&(Mi(e),Gt(hr,this,null),Gt(nr,this,!1))}}Qt=fr;var br=new WeakMap,yr=new WeakMap,wr=new WeakMap,xr=new WeakMap,Sr=new WeakMap,kr=new WeakMap,Ar=new WeakMap,_r=new WeakMap,Er=new WeakMap,Cr=new WeakMap,Pr=new WeakMap,Mr=new WeakMap,Tr=new WeakMap,Rr=new WeakMap,Nr=new WeakMap,Lr=new WeakMap,Dr=new WeakMap,Ir=new WeakMap,Fr=new WeakMap,jr=new WeakMap,Or=new WeakMap,Wr=new WeakMap,zr=new WeakMap,Br=new WeakMap,Hr=new WeakSet;class Ur{static get _resizerKeyboardManager(){const e=Ur.prototype._resizeWithKeyboard,t=ma.TRANSLATE_SMALL,n=ma.TRANSLATE_BIG;return Jn(this,"_resizerKeyboardManager",new xs([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Ur.prototype._stopResizingWithKeyboard]]))}constructor(e){zt(this,Hr),Bt(this,br,null),Bt(this,yr,null),Bt(this,wr,null),Bt(this,xr,!1),Bt(this,Sr,null),Bt(this,kr,""),Bt(this,Ar,!1),Bt(this,_r,null),Bt(this,Er,null),Bt(this,Cr,null),Bt(this,Pr,null),Bt(this,Mr,""),Bt(this,Tr,!1),Bt(this,Rr,null),Bt(this,Nr,!1),Bt(this,Lr,!1),Bt(this,Dr,!1),Bt(this,Ir,null),Bt(this,Fr,0),Bt(this,jr,0),Bt(this,Or,null),Bt(this,Wr,null),o(this,"isSelected",!1),o(this,"_isCopy",!1),o(this,"_editToolbar",null),o(this,"_initialOptions",Object.create(null)),o(this,"_initialData",null),o(this,"_isVisible",!0),o(this,"_uiManager",null),o(this,"_focusEventsAllowed",!0),Bt(this,zr,!1),Bt(this,Br,Ur._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,a];const[r,l]=this.parentDimensions;this.x=e.x/r,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Jn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new co({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=Ur._l10n)&&void 0!==n||(Ur._l10n=e),Ur._l10nResizer||(Ur._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==Ur._borderLineWidth)return;const i=getComputedStyle(document.documentElement);Ur._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Yn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Vt(zr,this)}set _isDraggable(e){var t;Gt(zr,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Vt(Br,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):Ht(Hr,this,lo).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(Vt(Tr,this)?Gt(Tr,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[s,a]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/s,this.y=(t+i)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){Ht(Hr,this,Vr).call(this,this.parentDimensions,e,t)}translateInPage(e,t){Vt(Rr,this)||Gt(Rr,this,[this.x,this.y,this.width,this.height]),Ht(Hr,this,Vr).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){Vt(Rr,this)||Gt(Rr,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:r}=this;const[o,l]=this.getBaseTranslation();a+=o,r+=l;const{style:c}=n;c.left="".concat((100*a).toFixed(2),"%"),c.top="".concat((100*r).toFixed(2),"%"),this._onTranslating(a,r),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!Vt(Rr,this)&&(Vt(Rr,this)[0]!==this.x||Vt(Rr,this)[1]!==this.y)}get _hasBeenResized(){return!!Vt(Rr,this)&&(Vt(Rr,this)[2]!==this.width||Vt(Rr,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Ur,i=n/e,s=n/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,i]}=this;let{x:s,y:a,width:r,height:o}=this;if(r*=n,o*=i,s*=n,a*=i,this._mustFixPosition)switch(e){case 0:s=vi(s,0,n-r),a=vi(a,0,i-o);break;case 90:s=vi(s,0,n-o),a=vi(a,r,i);break;case 180:s=vi(s,r,n),a=vi(a,o,i);break;case 270:s=vi(s,o,n),a=vi(a,0,i-r)}this.x=s/=n,this.y=a/=i;const[l,c]=this.getBaseTranslation();s+=l,a+=c,t.left="".concat((100*s).toFixed(2),"%"),t.top="".concat((100*a).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return Gr.call(Ur,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Gr.call(Ur,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:s}=this.div;s.width="".concat((100*e/n).toFixed(2),"%"),Vt(Ar,this)||(s.height="".concat((100*t/i).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),s=!Vt(Ar,this)&&t.endsWith("%");if(i&&s)return;const[a,r]=this.parentDimensions;i||(e.width="".concat((100*parseFloat(n)/a).toFixed(2),"%")),Vt(Ar,this)||s||(e.height="".concat((100*parseFloat(t)/r).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=Vt(wr,this))||void 0===e||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Vt(Lr,this))return this._editToolbar;this._editToolbar=new Gi(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(e=Vt(wr,this))||void 0===e||e.destroy())}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Vt(wr,this)||($a.initialize(Ur._l10n),Gt(wr,this,new $a(this)),Vt(br,this)&&(Vt(wr,this).data=Vt(br,this),Gt(br,this,null))),Vt(wr,this)}get altTextData(){var e;return null===(e=Vt(wr,this))||void 0===e?void 0:e.data}set altTextData(e){Vt(wr,this)&&(Vt(wr,this).data=e)}get guessedAltText(){var e;return null===(e=Vt(wr,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=Vt(wr,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=Vt(wr,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!Vt(wr,this)&&!Vt(wr,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=Vt(wr,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=Vt(xr,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),Ht(Hr,this,io).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[s,a]=this.getInitialTranslation();return this.translate(s,a),rs(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Vt(Wr,this)||Gt(Wr,this,new fr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:Ht(Hr,this,Jr).bind(this),onPinching:Ht(Hr,this,Zr).bind(this),onPinchEnd:Ht(Hr,this,eo).bind(this),signal:this._uiManager._signal}))),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=li.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(Gt(Tr,this,!0),this._isDraggable?Ht(Hr,this,no).call(this,e):Ht(Hr,this,to).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Vt(Ir,this)&&clearTimeout(Vt(Ir,this)),Gt(Ir,this,setTimeout(()=>{var e;Gt(Ir,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[s,a]=this.pageDimensions,[r,o]=this.pageTranslation,l=e/i,c=t/i,h=this.x*s,u=this.y*a,d=this.width*s,p=this.height*a;switch(n){case 0:return[h+l+r,a-u-c-p+o,h+l+d+r,a-u-c+o];case 90:return[h+c+r,a-u+l+o,h+c+p+r,a-u+l+d+o];case 180:return[h-l-d+r,a-u+c+o,h-l+r,a-u+c+p+o];case 270:return[h-c-p+r,a-u-l-d+o,h-c+r,a-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,s,a]=e,r=s-n,o=a-i;switch(this.rotation){case 0:return[n,t-a,r,o];case 90:return[n,t-i,o,r];case 180:return[s,t-i,r,o];case 270:return[s,t-a,o,r];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),Gt(Lr,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),Gt(Lr,this,!1),!0)}isInEditMode(){return Vt(Lr,this)}shouldGetKeyboardEvents(){return Vt(Dr,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&i>0&&e<s&&n>0}rebuild(){Ht(Hr,this,io).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){Yn("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId});i.rotation=e.rotation,Gt(br,i,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,a]=i.pageDimensions,[r,o,l,c]=i.getRectInCurrentCoords(e.rect,a);return i.x=r/s,i.y=o/a,i.width=l/s,i.height=c/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null===(e=Vt(Pr,this))||void 0===e||e.abort(),Gt(Pr,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Vt(Ir,this)&&(clearTimeout(Vt(Ir,this)),Gt(Ir,this,null)),Ht(Hr,this,lo).call(this),this.removeEditToolbar(),Vt(Or,this)){for(const e of Vt(Or,this).values())clearTimeout(e);Gt(Or,this,null)}this.parent=null,null===(t=Vt(Wr,this))||void 0===t||t.destroy(),Gt(Wr,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Ht(Hr,this,Xr).call(this),Vt(_r,this).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),Gt(Cr,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=Vt(_r,this).children;if(!Vt(yr,this)){Gt(yr,this,Array.from(t));const e=Ht(Hr,this,so).bind(this),n=Ht(Hr,this,ao).bind(this),i=this._uiManager._signal;for(const t of Vt(yr,this)){const s=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",Ht(Hr,this,ro).bind(this,s),{signal:i}),t.setAttribute("data-l10n-id",Ur._l10nResizer[s])}}const n=Vt(yr,this)[0];let i=0;for(const a of t){if(a===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(Vt(yr,this).length/4);if(s!==i){if(s<i)for(let t=0;t<i-s;t++)Vt(_r,this).append(Vt(_r,this).firstChild);else if(s>i)for(let t=0;t<s-i;t++)Vt(_r,this).firstChild.before(Vt(_r,this).lastChild);let e=0;for(const n of t){const t=Vt(yr,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",Ur._l10nResizer[t])}}Ht(Hr,this,oo).call(this,0),Gt(Dr,this,!0),Vt(_r,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){Vt(Dr,this)&&Ht(Hr,this,$r).call(this,Vt(Mr,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){Ht(Hr,this,lo).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar||(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=Vt(wr,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())}))}unselect(){var e,t,n,i,s;this.isSelected&&(this.isSelected=!1,null===(e=Vt(_r,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(s=Vt(wr,this))||void 0===s||s.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Vt(Nr,this)}set isEditing(e){Gt(Nr,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){Gt(Ar,this,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){Vt(Or,this)||Gt(Or,this,new Map);const{action:t}=e;let n=Vt(Or,this).get(t);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),Vt(Or,this).delete(t),0===Vt(Or,this).size&&Gt(Or,this,null)},Ur._telemetryTimeout),void Vt(Or,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),Gt(xr,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),Gt(xr,this,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function Vr(e,t,n){let[i,s]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/s,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function Gr(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function qr(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function Xr(){if(Vt(_r,this))return;Gt(_r,this,document.createElement("div")),Vt(_r,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");Vt(_r,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",Ht(Hr,this,Yr).bind(this,n),{signal:t}),e.addEventListener("contextmenu",Pi,{signal:t}),e.tabIndex=-1}this.div.prepend(Vt(_r,this))}function Yr(e,t){var n;t.preventDefault();const{isMac:i}=li.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=Vt(wr,this))||void 0===n||n.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,Gt(Er,this,[t.screenX,t.screenY]);const a=new AbortController,r=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Ht(Hr,this,$r).bind(this,e),{passive:!0,capture:!0,signal:r}),window.addEventListener("touchmove",Mi,{passive:!1,signal:r}),window.addEventListener("contextmenu",Pi,{signal:r}),Gt(Cr,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;a.abort(),this.parent.togglePointerEvents(!0),null===(e=Vt(wr,this))||void 0===e||e.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,Ht(Hr,this,Qr).call(this)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})}function Kr(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[s,a]=this.parentDimensions;this.setDims(s*n,a*i),this.fixAndSetPosition(),this._onResized()}function Qr(){if(!Vt(Cr,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=Vt(Cr,this);Gt(Cr,this,null);const s=this.x,a=this.y,r=this.width,o=this.height;s===e&&a===t&&r===n&&o===i||this.addCommands({cmd:Ht(Hr,this,Kr).bind(this,s,a,r,o),undo:Ht(Hr,this,Kr).bind(this,e,t,n,i),mustExec:!0})}function $r(e,t){const[n,i]=this.parentDimensions,s=this.x,a=this.y,r=this.width,o=this.height,l=$t.MIN_SIZE/n,c=$t.MIN_SIZE/i,h=Ht(Hr,this,qr).call(this,this.rotation),u=(e,t)=>[h[0]*e+h[2]*t,h[1]*e+h[3]*t],d=Ht(Hr,this,qr).call(this,360-this.rotation);let p,f,g=!1,m=!1;switch(e){case"topLeft":g=!0,p=(e,t)=>[0,0],f=(e,t)=>[e,t];break;case"topMiddle":p=(e,t)=>[e/2,0],f=(e,t)=>[e/2,t];break;case"topRight":g=!0,p=(e,t)=>[e,0],f=(e,t)=>[0,t];break;case"middleRight":m=!0,p=(e,t)=>[e,t/2],f=(e,t)=>[0,t/2];break;case"bottomRight":g=!0,p=(e,t)=>[e,t],f=(e,t)=>[0,0];break;case"bottomMiddle":p=(e,t)=>[e/2,t],f=(e,t)=>[e/2,0];break;case"bottomLeft":g=!0,p=(e,t)=>[0,t],f=(e,t)=>[e,0];break;case"middleLeft":m=!0,p=(e,t)=>[0,t/2],f=(e,t)=>[e,t/2]}const v=p(r,o),b=f(r,o);let y=u(...b);const w=$t._round(s+y[0]),x=$t._round(a+y[1]);let S,k,A=1,_=1;if(t.fromKeyboard)({deltaX:S,deltaY:k}=t);else{const{screenX:e,screenY:n}=t,[i,s]=Vt(Er,this);[S,k]=this.screenToPageTranslation(e-i,n-s),Vt(Er,this)[0]=e,Vt(Er,this)[1]=n}var E,C;if([S,k]=(E=S/n,C=k/i,[d[0]*E+d[2]*C,d[1]*E+d[3]*C]),g){const e=Math.hypot(r,o);A=_=Math.max(Math.min(Math.hypot(b[0]-v[0]-S,b[1]-v[1]-k)/e,1/r,1/o),l/r,c/o)}else m?A=vi(Math.abs(b[0]-v[0]-S),l,1)/r:_=vi(Math.abs(b[1]-v[1]-k),c,1)/o;const P=$t._round(r*A),M=$t._round(o*_);y=u(...f(P,M));const T=w-y[0],R=x-y[1];Vt(Rr,this)||Gt(Rr,this,[this.x,this.y,this.width,this.height]),this.width=P,this.height=M,this.x=T,this.y=R,this.setDims(n*P,i*M),this.fixAndSetPosition(),this._onResizing()}function Jr(){var e;Gt(Cr,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=Vt(wr,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function Zr(e,t,n){let i=n/t*.7+1-.7;if(1===i)return;const s=Ht(Hr,this,qr).call(this,this.rotation),a=(e,t)=>[s[0]*e+s[2]*t,s[1]*e+s[3]*t],[r,o]=this.parentDimensions,l=this.x,c=this.y,h=this.width,u=this.height,d=$t.MIN_SIZE/r,p=$t.MIN_SIZE/o;i=Math.max(Math.min(i,1/h,1/u),d/h,p/u);const f=$t._round(h*i),g=$t._round(u*i);if(f===h&&g===u)return;Vt(Rr,this)||Gt(Rr,this,[l,c,h,u]);const m=a(h/2,u/2),v=$t._round(l+m[0]),b=$t._round(c+m[1]),y=a(f/2,g/2);this.x=v-y[0],this.y=b-y[1],this.width=f,this.height=g,this.setDims(r*f,o*g),this.fixAndSetPosition(),this._onResizing()}function eo(){var e;null===(e=Vt(wr,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),Ht(Hr,this,Qr).call(this)}function to(e){const{isMac:t}=li.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function no(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},r=e=>{i.abort(),Gt(Sr,this,null),Gt(Tr,this,!1),this._uiManager.endDragSession()||Ht(Hr,this,to).call(this,e),n&&this._onStopDragging()};t&&(Gt(Fr,this,e.clientX),Gt(jr,this,e.clientY),Gt(Sr,this,e.pointerId),Gt(kr,this,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._onStartDragging());const{clientX:t,clientY:i,pointerId:s}=e;if(s!==Vt(Sr,this))return void Mi(e);const[a,r]=this.screenToPageTranslation(t-Vt(Fr,this),i-Vt(jr,this));Gt(Fr,this,t),Gt(jr,this,i),this._uiManager.dragSelectedEditors(a,r)},a),window.addEventListener("touchmove",Mi,a),window.addEventListener("pointerdown",e=>{e.pointerType===Vt(kr,this)&&(Vt(Wr,this)||e.isPrimary)&&r(e),Mi(e)},a));const o=e=>{Vt(Sr,this)&&Vt(Sr,this)!==e.pointerId?Mi(e):r(e)};window.addEventListener("pointerup",o,{signal:s}),window.addEventListener("blur",o,{signal:s})}function io(){if(Vt(Pr,this)||!this.div)return;Gt(Pr,this,new AbortController);const e=this._uiManager.combinedSignal(Vt(Pr,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function so(e){$t._resizerKeyboardManager.exec(this,e)}function ao(e){var t;Vt(Dr,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==Vt(_r,this)&&Ht(Hr,this,lo).call(this)}function ro(e){Gt(Mr,this,Vt(Dr,this)?e:"")}function oo(e){if(Vt(yr,this))for(const t of Vt(yr,this))t.tabIndex=e}function lo(){Gt(Dr,this,!1),Ht(Hr,this,oo).call(this,-1),Ht(Hr,this,Qr).call(this)}$t=Ur,o(Ur,"_l10n",null),o(Ur,"_l10nResizer",null),o(Ur,"_borderLineWidth",-1),o(Ur,"_colorManager",new ks),o(Ur,"_zIndex",1),o(Ur,"_telemetryTimeout",1e3);class co extends Ur{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ho=3285377520,uo=4294901760,po=65535;class fo{constructor(e){this.h1=e?4294967295&e:ho,this.h2=e?4294967295&e:ho}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,s=e.length;i<s;i++){const s=e.charCodeAt(i);s<=255?t[n++]=s:(t[n++]=s>>>8,t[n++]=255&s)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,s=n-4*i,a=new Uint32Array(t.buffer,0,i);let r=0,o=0,l=this.h1,c=this.h2;const h=3432918353,u=461845907,d=11601,p=13715;for(let f=0;f<i;f++)1&f?(r=a[f],r=r*h&uo|r*d&po,r=r<<15|r>>>17,r=r*u&uo|r*p&po,l^=r,l=l<<13|l>>>19,l=5*l+3864292196):(o=a[f],o=o*h&uo|o*d&po,o=o<<15|o>>>17,o=o*u&uo|o*p&po,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(r=0,s){case 3:r^=t[4*i+2]<<16;case 2:r^=t[4*i+1]<<8;case 1:r^=t[4*i],r=r*h&uo|r*d&po,r=r<<15|r>>>17,r=r*u&uo|r*p&po,1&i?l^=r:c^=r}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&uo|36045*e&po,t=4283543511*t&uo|(2950163797*(t<<16|e>>>16)&uo)>>>16,e^=t>>>1,e=444984403*e&uo|60499*e&po,t=3301882366*t&uo|(3120437893*(t<<16|e>>>16)&uo)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const go=Object.freeze({map:null,hash:"",transfer:void 0});var mo=new WeakMap,vo=new WeakMap,bo=new WeakMap,yo=new WeakSet;class wo{constructor(){zt(this,yo),Bt(this,mo,!1),Bt(this,vo,null),Bt(this,bo,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=Vt(bo,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return Vt(bo,this).get(e)}remove(e){if(Vt(bo,this).delete(e),0===Vt(bo,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of Vt(bo,this).values())if(e instanceof Ur)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=Vt(bo,this).get(e);let i=!1;if(void 0!==n)for(const[s,a]of Object.entries(t))n[s]!==a&&(i=!0,n[s]=a);else i=!0,Vt(bo,this).set(e,t);i&&Ht(yo,this,xo).call(this),t instanceof Ur&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return Vt(bo,this).has(e)}get size(){return Vt(bo,this).size}resetModified(){Vt(mo,this)&&(Gt(mo,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new ko(this)}get serializable(){if(0===Vt(bo,this).size)return go;const e=new Map,t=new fo,n=[],i=Object.create(null);let s=!1;for(const[a,r]of Vt(bo,this)){const n=r instanceof Ur?r.serialize(!1,i):r;n&&(e.set(a,n),t.update("".concat(a,":").concat(JSON.stringify(n))),s||(s=!!n.bitmap))}if(s)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:go}get editorStats(){let e=null;const t=new Map;for(const s of Vt(bo,this).values()){var n;if(!(s instanceof Ur))continue;const a=s.telemetryFinalData;if(!a)continue;const{type:r}=a;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=(n=e)[r]||(n[r]=new Map);for(const[e,t]of Object.entries(a)){var i;if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const s=null!==(i=n.get(t))&&void 0!==i?i:0;n.set(t,s+1)}}for(const[s,a]of t)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){Gt(vo,this,null)}get modifiedIds(){if(Vt(vo,this))return Vt(vo,this);const e=[];for(const t of Vt(bo,this).values())t instanceof Ur&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return Gt(vo,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return Vt(bo,this).entries()}}function xo(){Vt(mo,this)||(Gt(mo,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var So=new WeakMap;class ko extends wo{constructor(e){super(),Bt(this,So,void 0);const{map:t,hash:n,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);Gt(So,this,{map:s,hash:n,transfer:i})}get print(){Yn("Should not call PrintAnnotationStorage.print")}get serializable(){return Vt(So,this)}get modifiedIds(){return Jn(this,"modifiedIds",{ids:new Set,hash:""})}}var Ao=new WeakMap;class _o{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;Bt(this,Ao,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),Vt(Ao,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:i}=e;if(t&&!Vt(Ao,this).has(t.loadedName)){if(Kn(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:a}=t,r=new FontFace(e,n,a);this.addNativeFontFace(r);try{await r.load(),Vt(Ao,this).add(e),null===i||void 0===i||i(t)}catch(s){Xn("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(r)}return}Yn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw Xn("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return Jn(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return Jn(this,"isSyncFontLoadingSupported",cn||li.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(Kn(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return Jn(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let s,a;const r=this._document.createElement("canvas");r.width=1,r.height=1;const o=r.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let h=this._loadTestFont;h=i(h,976,c.length,c);const u=1482184792;let d=n(h,16);for(s=0,a=c.length-3;s<a;s+=4)d=d-u+n(c,s)|0;var p;s<c.length&&(d=d-u+n(c+"XXX",s)|0),h=i(h,16,4,(p=d,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f="url(data:font/opentype;base64,".concat(btoa(h),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(f,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,m.append(e)}this._document.body.append(m),function e(t,n){if(++l>30)return Xn("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{m.remove(),t.complete()})}}class Eo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat(bi(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(a){Xn('getPathGenerator - ignoring character: "'.concat(a,'".'))}const s=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}}function Co(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const Po=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,Mo=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,s,...a]=n;if(!e(i)&&!Number.isInteger(i))return!1;if(!t(s))return!1;const r=a.length;let o=!0;switch(s.name){case"XYZ":if(r<2||r>3)return!1;break;case"Fit":case"FitB":return 0===r;case"FitH":case"FitBH":case"FitV":case"FitBV":if(r>1)return!1;break;case"FitR":if(4!==r)return!1;o=!1;break;default:return!1}for(const l of a)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,Po,e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name));var To=new WeakMap,Ro=new WeakMap;class No{constructor(){Bt(this,To,new Map),Bt(this,Ro,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};Vt(Ro,this).then(()=>{for(const[e]of Vt(To,this))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted)return void Xn("LoopbackPort - cannot use an `aborted` signal.");const a=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}Vt(To,this).set(t,i)}removeEventListener(e,t){const n=Vt(To,this).get(t);null===n||void 0===n||n(),Vt(To,this).delete(t)}terminate(){for(const[,e]of Vt(To,this))null===e||void 0===e||e();Vt(To,this).clear()}}const Lo=1,Do=2,Io=1,Fo=2,jo=3,Oo=4,Wo=5,zo=6,Bo=7,Ho=8;function Uo(){}function Vo(e){if(e instanceof ai||e instanceof ni||e instanceof ei||e instanceof ii||e instanceof ti)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||Yn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new ai(e.message);case"InvalidPDFException":return new ni(e.message);case"PasswordException":return new ei(e.message,e.code);case"ResponseException":return new ii(e.message,e.status,e.missing);case"UnknownErrorException":return new ti(e.message,e.details)}return new ti(e.message,e.toString())}var Go=new WeakMap,qo=new WeakSet;class Xo{constructor(e,t,n){zt(this,qo),Bt(this,Go,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",Ht(qo,this,Yo).bind(this),{signal:Vt(Go,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,i){const s=this.streamId++,a=this.sourceName,r=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:a,targetName:r,action:e,streamId:s,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[s].pullCall=t,o.postMessage({sourceName:a,targetName:r,stream:zo,streamId:s,desiredSize:e.desiredSize}),t.promise},cancel:e=>{Kn(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[s].cancelCall=t,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:a,targetName:r,stream:Io,streamId:s,reason:Vo(e)}),t.promise}},n)}destroy(){var e;null===(e=Vt(Go,this))||void 0===e||e.abort(),Gt(Go,this,null)}}function Yo(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void Ht(qo,this,Qo).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===Lo)n.resolve(t.data);else{if(t.callback!==Do)throw new Error("Unexpected callback case");n.reject(Vo(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,i=t.sourceName,s=this.comObj;return void Promise.try(n,t.data).then(function(n){s.postMessage({sourceName:e,targetName:i,callback:Lo,callbackId:t.callbackId,data:n})},function(n){s.postMessage({sourceName:e,targetName:i,callback:Do,callbackId:t.callbackId,reason:Vo(n)})})}t.streamId?Ht(qo,this,Ko).call(this,t):n(t.data)}function Ko(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,a=this,r=this.actionHandler[e.action],o={enqueue(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=a,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:Oo,streamId:t,chunk:e},r)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:jo,streamId:t}),delete a.streamSinks[t])},error(e){Kn(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Wo,streamId:t,reason:Vo(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(r,e.data,o).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Ho,streamId:t,success:!0})},function(e){s.postMessage({sourceName:n,targetName:i,stream:Ho,streamId:t,reason:Vo(e)})})}function Qo(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[t],r=this.streamSinks[t];switch(e.stream){case Ho:e.success?a.startCall.resolve():a.startCall.reject(Vo(e.reason));break;case Bo:e.success?a.pullCall.resolve():a.pullCall.reject(Vo(e.reason));break;case zo:if(!r){s.postMessage({sourceName:n,targetName:i,stream:Bo,streamId:t,success:!0});break}r.desiredSize<=0&&e.desiredSize>0&&r.sinkCapability.resolve(),r.desiredSize=e.desiredSize,Promise.try(r.onPull||Uo).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Bo,streamId:t,success:!0})},function(e){s.postMessage({sourceName:n,targetName:i,stream:Bo,streamId:t,reason:Vo(e)})});break;case Oo:if(Kn(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case jo:if(Kn(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),Ht(qo,this,$o).call(this,a,t);break;case Wo:Kn(a,"error should have stream controller"),a.controller.error(Vo(e.reason)),Ht(qo,this,$o).call(this,a,t);break;case Fo:e.success?a.cancelCall.resolve():a.cancelCall.reject(Vo(e.reason)),Ht(qo,this,$o).call(this,a,t);break;case Io:if(!r)break;const o=Vo(e.reason);Promise.try(r.onCancel||Uo,o).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Fo,streamId:t,success:!0})},function(e){s.postMessage({sourceName:n,targetName:i,stream:Fo,streamId:t,reason:Vo(e)})}),r.sinkCapability.reject(o),r.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function $o(e,t){var n,i,s;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(s=e.cancelCall)||void 0===s?void 0:s.promise]),delete this.streamControllers[t]}var Jo=new WeakMap;class Zo{constructor(e){let{enableHWA:t=!1}=e;Bt(this,Jo,!1),Gt(Jo,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!Vt(Jo,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Yn("Abstract method `_createCanvas` called.")}}class el extends Zo{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class tl{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){Yn("Abstract method `_fetch` called.")}}class nl extends tl{async _fetch(e){const t=await xi(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):oi(t)}}class il{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,s){return"none"}destroy(){}}var sl=new WeakMap,al=new WeakMap,rl=new WeakMap,ol=new WeakMap,ll=new WeakMap,cl=new WeakMap,hl=new WeakMap,ul=new WeakSet;class dl extends il{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),zt(this,ul),Bt(this,sl,void 0),Bt(this,al,void 0),Bt(this,rl,void 0),Bt(this,ol,void 0),Bt(this,ll,void 0),Bt(this,cl,void 0),Bt(this,hl,0),Gt(ol,this,t),Gt(ll,this,n)}addFilter(e){var t,n;if(!e)return"none";let i=Ut(ul,this,pl).get(e);if(i)return i;const[s,a,r]=Ht(ul,this,ml).call(this,e),o=1===e.length?s:"".concat(s).concat(a).concat(r);if(i=Ut(ul,this,pl).get(o),i)return Ut(ul,this,pl).set(e,i),i;const l="g_".concat(Vt(ol,this),"_transfer_map_").concat((Gt(hl,this,(t=Vt(hl,this),n=t++,t)),n)),c=Ht(ul,this,vl).call(this,l);Ut(ul,this,pl).set(e,c),Ut(ul,this,pl).set(o,c);const h=Ht(ul,this,wl).call(this,l);return Ht(ul,this,Sl).call(this,s,a,r,h),c}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),s="base";let a=Ut(ul,this,fl).get(s);if((null===(n=a)||void 0===n?void 0:n.key)===i)return a.url;var r;a?(null===(r=a.filter)||void 0===r||r.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},Ut(ul,this,fl).set(s,a));if(!e||!t)return a.url;const o=Ht(ul,this,Al).call(this,e);e=hi.makeHexColor(...o);const l=Ht(ul,this,Al).call(this,t);if(t=hi.makeHexColor(...l),Ut(ul,this,gl).style.color="","#000000"===e&&"#ffffff"===t||e===t)return a.url;const c=new Array(256);for(let f=0;f<=255;f++){const e=f/255;c[f]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const h=c.join(","),u="g_".concat(Vt(ol,this),"_hcm_filter"),d=a.filter=Ht(ul,this,wl).call(this,u);Ht(ul,this,Sl).call(this,h,h,h,d),Ht(ul,this,yl).call(this,d);const p=(e,t)=>{const n=o[e]/255,i=l[e]/255,s=new Array(t+1);for(let a=0;a<=t;a++)s[a]=n+a/t*(i-n);return s.join(",")};return Ht(ul,this,Sl).call(this,p(0,5),p(1,5),p(2,5),d),a.url=Ht(ul,this,vl).call(this,u),a.url}addAlphaFilter(e){var t,n;let i=Ut(ul,this,pl).get(e);if(i)return i;const[s]=Ht(ul,this,ml).call(this,[e]),a="alpha_".concat(s);if(i=Ut(ul,this,pl).get(a),i)return Ut(ul,this,pl).set(e,i),i;const r="g_".concat(Vt(ol,this),"_alpha_map_").concat((Gt(hl,this,(t=Vt(hl,this),n=t++,t)),n)),o=Ht(ul,this,vl).call(this,r);Ut(ul,this,pl).set(e,o),Ut(ul,this,pl).set(a,o);const l=Ht(ul,this,wl).call(this,r);return Ht(ul,this,kl).call(this,s,l),o}addLuminosityFilter(e){var t,n;let i,s,a=Ut(ul,this,pl).get(e||"luminosity");if(a)return a;if(e?([i]=Ht(ul,this,ml).call(this,[e]),s="luminosity_".concat(i)):s="luminosity",a=Ut(ul,this,pl).get(s),a)return Ut(ul,this,pl).set(e,a),a;const r="g_".concat(Vt(ol,this),"_luminosity_map_").concat((Gt(hl,this,(t=Vt(hl,this),n=t++,t)),n)),o=Ht(ul,this,vl).call(this,r);Ut(ul,this,pl).set(e,o),Ut(ul,this,pl).set(s,o);const l=Ht(ul,this,wl).call(this,r);return Ht(ul,this,bl).call(this,l),e&&Ht(ul,this,kl).call(this,i,l),o}addHighlightHCMFilter(e,t,n,i,s){var a;const r="".concat(t,"-").concat(n,"-").concat(i,"-").concat(s);let o=Ut(ul,this,fl).get(e);if((null===(a=o)||void 0===a?void 0:a.key)===r)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},Ut(ul,this,fl).set(e,o));if(!t||!n)return o.url;const[c,h]=[t,n].map(Ht(ul,this,Al).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,f]=[i,s].map(Ht(ul,this,Al).bind(this));d<u&&([u,d,p,f]=[d,u,f,p]),Ut(ul,this,gl).style.color="";const g=(e,t,n)=>{const i=new Array(256),s=(d-u)/n,a=e/255,r=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(u+l*s),t=a+l*r;for(let n=o;n<=e;n++)i[n]=t;o=e+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},m="g_".concat(Vt(ol,this),"_hcm_").concat(e,"_filter"),v=o.filter=Ht(ul,this,wl).call(this,m);return Ht(ul,this,yl).call(this,v),Ht(ul,this,Sl).call(this,g(p[0],f[0],5),g(p[1],f[1],5),g(p[2],f[2],5),v),o.url=Ht(ul,this,vl).call(this,m),o.url}destroy(){var e,t,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=Vt(cl,this))&&void 0!==e&&e.size||(null===(t=Vt(rl,this))||void 0===t||t.parentNode.parentNode.remove(),Gt(rl,this,null),null===(n=Vt(al,this))||void 0===n||n.clear(),Gt(al,this,null),null===(i=Vt(cl,this))||void 0===i||i.clear(),Gt(cl,this,null),Gt(hl,this,0))}}function pl(e){return Vt(al,e)||Gt(al,e,new Map)}function fl(e){return Vt(cl,e)||Gt(cl,e,new Map)}function gl(e){if(!Vt(rl,e)){const t=Vt(ll,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=Vt(ll,e).createElementNS(yi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),Gt(rl,e,Vt(ll,e).createElementNS(yi,"defs")),t.append(i),i.append(Vt(rl,e)),Vt(ll,e).body.append(t)}return Vt(rl,e)}function ml(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,s=new Array(256),a=new Array(256),r=new Array(256);for(let o=0;o<256;o++)s[o]=t[o]/255,a[o]=n[o]/255,r[o]=i[o]/255;return[s.join(","),a.join(","),r.join(",")]}function vl(e){if(void 0===Vt(sl,this)){Gt(sl,this,"");const e=Vt(ll,this).URL;e!==Vt(ll,this).baseURI&&(Ai(e)?Xn('#createUrl: ignore "data:"-URL for performance reasons.'):Gt(sl,this,$n(e,"")))}return"url(".concat(Vt(sl,this),"#").concat(e,")")}function bl(e){const t=Vt(ll,this).createElementNS(yi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function yl(e){const t=Vt(ll,this).createElementNS(yi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function wl(e){const t=Vt(ll,this).createElementNS(yi,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),Ut(ul,this,gl).append(t),t}function xl(e,t,n){const i=Vt(ll,this).createElementNS(yi,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function Sl(e,t,n,i){const s=Vt(ll,this).createElementNS(yi,"feComponentTransfer");i.append(s),Ht(ul,this,xl).call(this,s,"feFuncR",e),Ht(ul,this,xl).call(this,s,"feFuncG",t),Ht(ul,this,xl).call(this,s,"feFuncB",n)}function kl(e,t){const n=Vt(ll,this).createElementNS(yi,"feComponentTransfer");t.append(n),Ht(ul,this,xl).call(this,n,"feFuncA",e)}function Al(e){return Ut(ul,this,gl).style.color=e,Ni(getComputedStyle(Ut(ul,this,gl)).getPropertyValue("color"))}class _l{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(e){Yn("Abstract method `_fetch` called.")}}class El extends _l{async _fetch(e){const t=await xi(e,"arraybuffer");return new Uint8Array(t)}}class Cl{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(e){Yn("Abstract method `_fetch` called.")}}class Pl extends Cl{async _fetch(e){const t=await xi(e,"arraybuffer");return new Uint8Array(t)}}async function Ml(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}cn&&Xn("Please use the `legacy` build in Node.js environments.");class Tl extends il{}class Rl extends Zo{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///D:/Universidad/Proyecto%20de%20Algoritmos%20y%20Fundamentos%20de%20Programacion/Proyecto%20de%20Grado/Logic-Loop_Proyecto_Grado/Logic-Loop/frontend/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class Nl extends tl{async _fetch(e){return Ml(e)}}class Ll extends _l{async _fetch(e){return Ml(e)}}class Dl extends Cl{async _fetch(e){return Ml(e)}}const Il="Fill",Fl="Stroke",jl="Shading";function Ol(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],n,i),e.clip(s)}class Wl{isModifyingCurrentTransform(){return!1}getPattern(){Yn("Abstract method `getPattern` called.")}}class zl extends Wl{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let s;if(i===Fl||i===Il){const a=t.current.getClippedPathBoundingBox(i,Li(e))||[0,0,0,0],r=Math.ceil(a[2]-a[0])||1,o=Math.ceil(a[3]-a[1])||1,l=t.cachedCanvases.getCanvas("pattern",r,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),n=hi.transform(n,[1,0,0,1,a[0],a[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),Ol(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(l.canvas,"no-repeat");const h=new DOMMatrix(n);s.setTransform(h)}else Ol(e,this._bbox),s=this._createGradient(e);return s}}function Bl(e,t,n,i,s,a,r,o){const l=t.coords,c=t.colors,h=e.data,u=4*e.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=a,a=r,r=d),l[i+1]>l[s+1]&&(d=i,i=s,s=d,d=r,r=o,o=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=a,a=r,r=d);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,g=(l[i]+t.offsetX)*t.scaleX,m=(l[i+1]+t.offsetY)*t.scaleY,v=(l[s]+t.offsetX)*t.scaleX,b=(l[s+1]+t.offsetY)*t.scaleY;if(f>=b)return;const y=c[a],w=c[a+1],x=c[a+2],S=c[r],k=c[r+1],A=c[r+2],_=c[o],E=c[o+1],C=c[o+2],P=Math.round(f),M=Math.round(b);let T,R,N,L,D,I,F,j;for(let O=P;O<=M;O++){if(O<m){const e=O<f?0:(f-O)/(f-m);T=p-(p-g)*e,R=y-(y-S)*e,N=w-(w-k)*e,L=x-(x-A)*e}else{let e;e=O>b?1:m===b?0:(m-O)/(m-b),T=g-(g-v)*e,R=S-(S-_)*e,N=k-(k-E)*e,L=A-(A-C)*e}let e;e=O<f?0:O>b?1:(f-O)/(f-b),D=p-(p-v)*e,I=y-(y-_)*e,F=w-(w-E)*e,j=x-(x-C)*e;const t=Math.round(Math.min(T,D)),n=Math.round(Math.max(T,D));let i=u*O+4*t;for(let s=t;s<=n;s++)e=(T-s)/(T-D),e<0?e=0:e>1&&(e=1),h[i++]=R-(R-I)*e|0,h[i++]=N-(N-F)*e|0,h[i++]=L-(L-j)*e|0,h[i++]=255}}function Hl(e,t,n){const i=t.coords,s=t.colors;let a,r;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(a=0;a<l;a++){let t=a*o;for(let a=0;a<c;a++,t++)Bl(e,n,i[t],i[t+1],i[t+o],s[t],s[t+1],s[t+o]),Bl(e,n,i[t+o+1],i[t+1],i[t+o],s[t+o+1],s[t+1],s[t+o])}break;case"triangles":for(a=0,r=i.length;a<r;a+=3)Bl(e,n,i[a],i[a+1],i[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class Ul extends Wl{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-i,r=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(r*e[1]*1.1)),3e3),c=a/o,h=r/l,u={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-s,scaleX:1/c,scaleY:1/h},d=o+4,p=l+4,f=n.getCanvas("mesh",d,p),g=f.context,m=g.createImageData(o,l);if(t){const e=m.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)Hl(m,v,u);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:i-2*c,offsetY:s-2*h,scaleX:c,scaleY:h}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Ol(e,this._bbox);const s=new Float32Array(2);if(i===jl)hi.singularValueDecompose2dScale(Li(e),s);else if(this.matrix){hi.singularValueDecompose2dScale(this.matrix,s);const[e,n]=s;hi.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=e,s[1]*=n}else hi.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,i===jl?null:this._background,t.cachedCanvases);return i!==jl&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Vl extends Wl{getPattern(){return"hotpink"}}const Gl=1,ql=2;class Xl{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:i,tilingType:s,color:a,canvasGraphicsFactory:r}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),qn("TilingType: "+s);const c=t[0],h=t[1],u=t[2],d=t[3],p=u-c,f=d-h,g=new Float32Array(2);hi.singularValueDecompose2dScale(this.matrix,g);const[m,v]=g;hi.singularValueDecompose2dScale(this.baseTransform,g);const b=m*g[0],y=v*g[1];let w=p,x=f,S=!1,k=!1;const A=Math.ceil(o*b),_=Math.ceil(l*y);A>=Math.ceil(p*b)?w=o:S=!0,_>=Math.ceil(f*y)?x=l:k=!0;const E=this.getSizeAndScale(w,this.ctx.canvas.width,b),C=this.getSizeAndScale(x,this.ctx.canvas.height,y),P=e.cachedCanvases.getCanvas("pattern",E.size,C.size),M=P.context,T=r.createCanvasGraphics(M);if(T.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(T,i,a),M.translate(-E.scale*c,-C.scale*h),T.transform(E.scale,0,0,C.scale,0,0),M.save(),this.clipBbox(T,c,h,u,d),T.baseTransform=Li(T.ctx),T.executeOperatorList(n),T.endDrawing(),M.restore(),S||k){const t=P.canvas;S&&(w=o),k&&(x=l);const n=this.getSizeAndScale(w,this.ctx.canvas.width,b),i=this.getSizeAndScale(x,this.ctx.canvas.height,y),s=n.size,a=i.size,r=e.cachedCanvases.getCanvas("pattern-workaround",s,a),u=r.context,d=S?Math.floor(p/o):0,g=k?Math.floor(f/l):0;for(let e=0;e<=d;e++)for(let n=0;n<=g;n++)u.drawImage(t,s*e,a*n,s,a,0,0,s,a);return{canvas:r.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:c,offsetY:h}}return{canvas:P.canvas,scaleX:E.scale,scaleY:C.scale,offsetX:c,offsetY:h}}getSizeAndScale(e,t,n){const i=Math.max(Xl.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=i?s=i:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,i,s){const a=i-t,r=s-n;e.ctx.rect(t,n,a,r),hi.axialAlignedBoundingBox([t,n,i,s],Li(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,s=e.current;switch(t){case Gl:const{fillStyle:e,strokeStyle:a}=this.ctx;i.fillStyle=s.fillColor=e,i.strokeStyle=s.strokeColor=a;break;case ql:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new si("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i){let s=n;i!==jl&&(s=hi.transform(s,t.baseTransform),this.matrix&&(s=hi.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let r=new DOMMatrix(s);r=r.translate(a.offsetX,a.offsetY),r=r.scale(1/a.scaleX,1/a.scaleY);const o=e.createPattern(a.canvas,"repeat");return o.setTransform(r),o}}function Yl(e){let{src:t,srcPos:n=0,dest:i,width:s,height:a,nonBlackColor:r=4294967295,inverseDecode:o=!1}=e;const l=li.isLittleEndian?4278190080:255,[c,h]=o?[r,l]:[l,r],u=s>>3,d=7&s,p=t.length;i=new Uint32Array(i.buffer);let f=0;for(let g=0;g<a;g++){for(const s=n+u;n<s;n++){const e=n<p?t[n]:255;i[f++]=128&e?h:c,i[f++]=64&e?h:c,i[f++]=32&e?h:c,i[f++]=16&e?h:c,i[f++]=8&e?h:c,i[f++]=4&e?h:c,i[f++]=2&e?h:c,i[f++]=1&e?h:c}if(0===d)continue;const e=n<p?t[n++]:255;for(let t=0;t<d;t++)i[f++]=e&1<<7-t?h:c}return{srcPos:n,destPos:f}}o(Xl,"MAX_PATTERN_SIZE",3e3);const Kl=16,Ql=new DOMMatrix,$l=new Float32Array(2),Jl=new Float32Array([1/0,1/0,-1/0,-1/0]);class Zl{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function ec(e,t,n,i,s,a,r,o,l,c){const[h,u,d,p,f,g]=Li(e);if(0===u&&0===d){const m=r*h+f,v=Math.round(m),b=o*p+g,y=Math.round(b),w=(r+l)*h+f,x=Math.abs(Math.round(w)-v)||1,S=(o+c)*p+g,k=Math.abs(Math.round(S)-y)||1;return e.setTransform(Math.sign(h),0,0,Math.sign(p),v,y),e.drawImage(t,n,i,s,a,0,0,x,k),e.setTransform(h,u,d,p,f,g),[x,k]}if(0===h&&0===p){const m=o*d+f,v=Math.round(m),b=r*u+g,y=Math.round(b),w=(o+c)*d+f,x=Math.abs(Math.round(w)-v)||1,S=(r+l)*u+g,k=Math.abs(Math.round(S)-y)||1;return e.setTransform(0,Math.sign(u),Math.sign(d),0,v,y),e.drawImage(t,n,i,s,a,0,0,k,x),e.setTransform(h,u,d,p,f,g),[k,x]}e.drawImage(t,n,i,s,a,r,o,l,c);return[Math.hypot(h,u)*l,Math.hypot(d,p)*c]}class tc{constructor(e,t){o(this,"alphaIsShape",!1),o(this,"fontSize",0),o(this,"fontSizeScale",1),o(this,"textMatrix",null),o(this,"textMatrixScale",1),o(this,"fontMatrix",hn),o(this,"leading",0),o(this,"x",0),o(this,"y",0),o(this,"lineX",0),o(this,"lineY",0),o(this,"charSpacing",0),o(this,"wordSpacing",0),o(this,"textHScale",1),o(this,"textRenderingMode",An),o(this,"textRise",0),o(this,"fillColor","#000000"),o(this,"strokeColor","#000000"),o(this,"patternFill",!1),o(this,"patternStroke",!1),o(this,"fillAlpha",1),o(this,"strokeAlpha",1),o(this,"lineWidth",1),o(this,"activeSMask",null),o(this,"transferMaps","none"),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Jl.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Il,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===Fl){t||Yn("Stroke bounding box must include transform."),hi.singularValueDecompose2dScale(t,$l);const e=$l[0]*this.lineWidth/2,i=$l[1]*this.lineWidth/2;n[0]-=e,n[1]-=i,n[2]+=e,n[3]+=i}return n}updateClipFromPath(){const e=hi.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Jl,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Il,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return hi.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function nc(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,s=n%Kl,a=(n-s)/Kl,r=0===s?a:a+1,o=e.createImageData(i,Kl);let l,c=0;const h=t.data,u=o.data;let d,p,f,g;if(t.kind===Tn.GRAYSCALE_1BPP){const t=h.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,b=li.isLittleEndian?4278190080:255;for(d=0;d<r;d++){for(f=d<a?Kl:s,l=0,p=0;p<f;p++){const e=t-c;let s=0;const a=e>m?i:8*e-7,r=-8&a;let o=0,u=0;for(;s<r;s+=8)u=h[c++],n[l++]=128&u?v:b,n[l++]=64&u?v:b,n[l++]=32&u?v:b,n[l++]=16&u?v:b,n[l++]=8&u?v:b,n[l++]=4&u?v:b,n[l++]=2&u?v:b,n[l++]=1&u?v:b;for(;s<a;s++)0===o&&(u=h[c++],o=128),n[l++]=u&o?v:b,o>>=1}for(;l<g;)n[l++]=0;e.putImageData(o,0,d*Kl)}}else if(t.kind===Tn.RGBA_32BPP){for(p=0,g=i*Kl*4,d=0;d<a;d++)u.set(h.subarray(c,c+g)),c+=g,e.putImageData(o,0,p),p+=Kl;d<r&&(g=i*s*4,u.set(h.subarray(c,c+g)),e.putImageData(o,0,p))}else{if(t.kind!==Tn.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(f=Kl,g=i*f,d=0;d<r;d++){for(d>=a&&(f=s,g=i*f),l=0,p=g;p--;)u[l++]=h[c++],u[l++]=h[c++],u[l++]=h[c++],u[l++]=255;e.putImageData(o,0,d*Kl)}}}function ic(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,s=n%Kl,a=(n-s)/Kl,r=0===s?a:a+1,o=e.createImageData(i,Kl);let l=0;const c=t.data,h=o.data;for(let u=0;u<r;u++){const t=u<a?Kl:s;({srcPos:l}=Yl({src:c,srcPos:l,dest:h,width:i,height:t,nonBlackColor:0})),e.putImageData(o,0,u*Kl)}}function sc(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function ac(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function rc(e,t){if(t)return!0;hi.singularValueDecompose2dScale(e,$l);const n=Math.fround(Fi.pixelRatio*wi.PDF_TO_CSS_UNITS);return $l[0]<=n&&$l[1]<=n}const oc=["butt","round","square"],lc=["miter","round","bevel"],cc={},hc={};var uc=new WeakSet;class dc{constructor(e,t,n,i,s,a,r,o){let{optionalContentConfig:l,markedContentStack:c=null}=a;zt(this,uc),this.ctx=e,this.current=new tc(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new Zl(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=r,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:s=null}=e;const a=this.ctx.canvas.width,r=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,r),this.ctx.fillStyle=o,i){const e=this.cachedCanvases.getCanvas("transparent",a,r);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Li(this.compositeCtx))}this.ctx.save(),ac(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Li(this.ctx)}executeOperatorList(e,t,n,i){const s=e.argsArray,a=e.fnArray;let r=t||0;const o=s.length;if(o===r)return r;const l=o-r>10&&"function"===typeof n,c=l?Date.now()+15:0;let h=0;const u=this.commonObjs,d=this.objs;let p;for(;;){if(void 0!==i&&r===i.nextBreakPoint)return i.breakIt(r,n),r;if(p=a[r],p!==On.dependency)this[p].apply(this,s[r]);else for(const e of s[r]){const t=e.startsWith("g_")?u:d;if(!t.has(e))return t.get(e,n),r}if(r++,r===o)return r;if(l&&++h>10){if(Date.now()>c)return n(),r;h=0}}}endDrawing(){Ht(uc,this,pc).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),Ht(uc,this,fc).call(this)}_scaleImage(e,t){var n,i;const s=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,a=null!==(i=e.height)&&void 0!==i?i:e.displayHeight;let r,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),h=s,u=a,d="prescale1";for(;l>2&&h>1||c>2&&u>1;){let t=h,n=u;l>2&&h>1&&(t=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/t),c>2&&u>1&&(n=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,c/=u/n),r=this.cachedCanvases.getCanvas(d,t,n),o=r.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,h,u,0,0,t,n),e=r.canvas,h=t,u=n,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:h,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,s=this.current.fillColor,a=this.current.patternFill,r=Li(t);let o,l,c,h;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(a?r:[r.slice(0,4),s]),o=this._cachedBitmapsMap.get(t),o||(o=new Map,this._cachedBitmapsMap.set(t,o));const n=o.get(l);if(n&&!a){return{canvas:n,offsetX:Math.round(Math.min(r[0],r[2])+r[4]),offsetY:Math.round(Math.min(r[1],r[3])+r[5])}}c=n}c||(h=this.cachedCanvases.getCanvas("maskCanvas",n,i),ic(h.context,e));let u=hi.transform(r,[1/n,0,0,-1/i,0,0]);u=hi.transform(u,[1,0,0,1,0,-i]);const d=Jl.slice();hi.axialAlignedBoundingBox([0,0,n,i],u,d);const[p,f,g,m]=d,v=Math.round(g-p)||1,b=Math.round(m-f)||1,y=this.cachedCanvases.getCanvas("fillCanvas",v,b),w=y.context,x=p,S=f;w.translate(-x,-S),w.transform(...u),c||(c=this._scaleImage(h.canvas,Di(w)),c=c.img,o&&a&&o.set(l,c)),w.imageSmoothingEnabled=rc(Li(w),e.interpolate),ec(w,c,0,0,c.width,c.height,0,0,n,i),w.globalCompositeOperation="source-in";const k=hi.transform(Di(w),[1,0,0,1,-x,-S]);return w.fillStyle=a?s.getPattern(t,this,k,Il):s,w.fillRect(0,0,n,i),o&&!a&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,y.canvas)),{canvas:y.canvas,offsetX:Math.round(x),offsetY:Math.round(S)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=oc[e]}setLineJoin(e){this.ctx.lineJoin=lc[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;const s=this.ctx=i.context;s.setTransform(this.suspendedCtx.getTransform()),sc(this.suspendedCtx,s),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,s,a,r){t.transform(e,n,i,s,a,r),this.__originalTransform(e,n,i,s,a,r)},e.setTransform=function(e,n,i,s,a,r){t.setTransform(e,n,i,s,a,r),this.__originalSetTransform(e,n,i,s,a,r)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,s,a,r){t.bezierCurveTo(e,n,i,s,a,r),this.__originalBezierCurveTo(e,n,i,s,a,r)},e.rect=function(e,n,i,s){t.rect(e,n,i,s),this.__originalRect(e,n,i,s)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),sc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const s=i[0],a=i[1],r=i[2]-s,o=i[3]-a;0!==r&&0!==o&&(this.genericComposeSMask(t.context,n,r,o,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,s,a,r,o,l,c,h){let u=e.canvas,d=o-c,p=l-h;if(a)if(d<0||p<0||d+n>u.width||p+i>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),t=e.context;t.drawImage(u,-d,-p),t.globalCompositeOperation="destination-atop",t.fillStyle=a,t.fillRect(0,0,n,i),t.globalCompositeOperation="source-over",u=e.canvas,d=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(d,p,n,i),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(d,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&r?t.filter=this.filterFactory.addAlphaFilter(r):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(r));const f=new Path2D;f.rect(o,l,n,i),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(u,d,p,n,i,o,l,n,i),t.restore()}save(){this.inSMaskMode&&sc(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&sc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,i,s,a){this.ctx.transform(e,t,n,i,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[i]=t;if(!n)return i||(i=t[0]=new Path2D),void this[e](i);if(!(i instanceof Path2D)){const e=t[0]=new Path2D;for(let t=0,n=i.length;t<n;)switch(i[t++]){case Wn:e.moveTo(i[t++],i[t++]);break;case zn:e.lineTo(i[t++],i[t++]);break;case Bn:e.bezierCurveTo(i[t++],i[t++],i[t++],i[t++],i[t++],i[t++]);break;case Hn:e.closePath();break;default:Xn("Unrecognized drawing path operator: ".concat(i[t-1]))}i=e}hi.axialAlignedBoundingBox(n,Li(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,i=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof i&&null!==i&&void 0!==i&&i.getPattern){const t=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=i.getPattern(n,this,Di(n),Fl),t){const i=new Path2D;i.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=i}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(Fl,Li(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,i=this.current.fillColor;let s=!1;if(this.current.patternFill){const t=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=i.getPattern(n,this,Di(n),Il),t){const i=new Path2D;i.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=i}s=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),s&&n.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=cc}eoClip(){this.pendingClip=hc}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return;const n=new Path2D,i=t.getTransform().invertSelf();for(const{transform:s,x:a,y:r,fontSize:o,path:l}of e)n.addPath(l,new DOMMatrix(s).preMultiplySelf(i).translate(a,r).scale(o,-o));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error("Can't find font for ".concat(e));if(s.fontMatrix=i.fontMatrix||hn,0!==s.fontMatrix[0]&&0!==s.fontMatrix[3]||Xn("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const a=i.loadedName||"sans-serif",r=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(a,'", ').concat(i.fallbackName);let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font="".concat(l," ").concat(o," ").concat(c,"px ").concat(r)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i,s){const a=this.ctx,r=this.current,o=r.font,l=r.textRenderingMode,c=r.fontSize/r.fontSizeScale,h=l&Pn,u=!!(l&Mn),d=r.patternFill&&!o.missingFile,p=r.patternStroke&&!o.missingFile;let f;if((o.disableFontFace||u||d||p)&&(f=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||d||p){let e;if(a.save(),a.translate(t,n),a.scale(c,-c),h!==An&&h!==En||(i?(e=a.getTransform(),a.setTransform(...i),a.fill(Ht(uc,this,gc).call(this,f,e,i))):a.fill(f)),h===_n||h===En)if(s){e||(e=a.getTransform()),a.setTransform(...s);const{a:t,b:n,c:i,d:r}=e,o=hi.inverseTransform(s),l=hi.transform([t,n,i,r,0,0],o);hi.singularValueDecompose2dScale(l,$l),a.lineWidth*=Math.max($l[0],$l[1])/c,a.stroke(Ht(uc,this,gc).call(this,f,e,s))}else a.lineWidth/=c,a.stroke(f);a.restore()}else h!==An&&h!==En||a.fillText(e,t,n),h!==_n&&h!==En||a.strokeText(e,t,n);if(u){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Li(a),x:t,y:n,fontSize:c,path:f})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Jn(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(0===i)return;const s=this.ctx,a=t.fontSizeScale,r=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,h=e.length,u=n.vertical,d=u?1:-1,p=n.defaultVMetrics,f=i*t.fontMatrix[0],g=t.textRenderingMode===An&&!n.disableFontFace&&!t.patternFill;let m,v;if(s.save(),t.textMatrix&&s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),l>0?s.scale(c,-1):s.scale(c,1),t.patternFill){s.save();const e=t.fillColor.getPattern(s,this,Di(s),Il);m=Li(s),s.restore(),s.fillStyle=e}if(t.patternStroke){s.save();const e=t.strokeColor.getPattern(s,this,Di(s),Fl);v=Li(s),s.restore(),s.strokeStyle=e}let b=t.lineWidth;const y=t.textMatrixScale;if(0===y||0===b){const e=t.textRenderingMode&Pn;e!==_n&&e!==En||(b=this.getSinglePixelWidth())}else b/=y;if(1!==a&&(s.scale(a,a),b/=a),s.lineWidth=b,n.isInvalidPDFjsFont){const n=[];let i=0;for(const t of e)n.push(t.unicode),i+=t.width;return s.fillText(n.join(""),0,0),t.x+=i*f*c,s.restore(),void this.compose()}let w,x=0;for(w=0;w<h;++w){const t=e[w];if("number"===typeof t){x+=d*t*i/1e3;continue}let c=!1;const h=(t.isSpace?o:0)+r,b=t.fontChar,y=t.accent;let S,k,A=t.width;if(u){const e=t.vmetric||p,n=-(t.vmetric?e[1]:.5*A)*f,i=e[2]*f;A=e?-e[0]:A,S=n/a,k=(x+i)/a}else S=x/a,k=0;if(n.remeasure&&A>0){const e=1e3*s.measureText(b).width/i*a;if(A<e&&this.isFontSubpixelAAEnabled){const t=A/e;c=!0,s.save(),s.scale(t,1),S/=t}else A!==e&&(S+=(A-e)/2e3*i/a)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(g&&!y)s.fillText(b,S,k);else if(this.paintChar(b,S,k,m,v),y){const e=S+i*y.offset.x/a,t=k-i*y.offset.y/a;this.paintChar(y.fontChar,e,t,m,v)}x+=u?A*f-h*l:A*f+h*l,c&&s.restore()}u?t.y-=x:t.x+=x*c,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,s=n.fontSize,a=n.fontDirection,r=i.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*a,h=n.fontMatrix||hn,u=e.length;let d,p,f,g;if(!(n.textRenderingMode===Cn)&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(c,a),d=0;d<u;++d){if(p=e[d],"number"===typeof p){g=r*p*s/1e3,this.ctx.translate(g,0),n.x+=g*c;continue}const a=(p.isSpace?l:0)+o,u=i.charProcOperatorList[p.operatorListId];u?this.contentVisible&&(this.save(),t.scale(s,s),t.transform(...h),this.executeOperatorList(u),this.restore()):Xn('Type3 character "'.concat(p.operatorListId,'" is not available.'));const m=[p.width,0];hi.applyTransform(m,h),f=m[0]*s+a,t.translate(f,0),n.x+=f*c}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,s,a){const r=new Path2D;r.rect(n,i,s-n,a-i),this.ctx.clip(r),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=this.baseTransform||Li(this.ctx),i={createCanvasGraphics:e=>new dc(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Xl(e,this.ctx,i,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new zl(e);case"Mesh":return new Ul(e);case"Dummy":return new Vl}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Di(t),jl);const i=Di(t);if(i){const{width:e,height:n}=t.canvas,s=Jl.slice();hi.axialAlignedBoundingBox([0,0,e,n],i,s);const[a,r,o,l]=s;this.ctx.fillRect(a,r,o-a,l-r)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Yn("Should not call beginInlineImage")}beginImageData(){Yn("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Li(this.ctx),t)){hi.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[e,n,i,s]=t,a=new Path2D;a.rect(e,n,i-e,s-n),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||qn("TODO: Support non-isolated groups."),e.knockout&&Xn("Knockout groups not supported.");const n=Li(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Jl.slice();hi.axialAlignedBoundingBox(e.bbox,Li(t),i);const s=[0,0,t.canvas.width,t.canvas.height];i=hi.intersect(i,s)||[0,0,0,0];const a=Math.floor(i[0]),r=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-a,1),l=Math.max(Math.ceil(i[3])-r,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(c,o,l),u=h.context;u.translate(-a,-r),u.transform(...n);let d=new Path2D;const[p,f,g,m]=e.bbox;if(d.rect(p,f,g-p,m-f),e.matrix){const t=new Path2D;t.addPath(d,new DOMMatrix(e.matrix)),d=t}u.clip(d),e.smask?this.smaskStack.push({canvas:h.canvas,context:u,offsetX:a,offsetY:r,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,r),t.save()),sc(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=Li(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=Jl.slice();hi.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e,n),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,s){if(Ht(uc,this,pc).call(this),ac(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const i=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=i,t[3]=a,hi.singularValueDecompose2dScale(Li(this.ctx),$l);const{viewportScale:s}=this,r=Math.ceil(i*this.outputScaleX*s),o=Math.ceil(a*this.outputScaleY*s);this.annotationCanvas=this.canvasFactory.create(r,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(e,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform($l[0],0,0,-$l[1],0,a*$l[1]),ac(this.ctx)}else{ac(this.ctx),this.endPath();const e=new Path2D;e.rect(t[0],t[1],i,a),this.ctx.clip(e)}}this.current=new tc(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Ht(uc,this,fc).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,i=this._createMaskCanvas(e),s=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(s,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const r=this.ctx;r.save();const o=Li(r);r.transform(t,n,i,s,0,0);const l=this._createMaskCanvas(e);r.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,h=a.length;c<h;c+=2){const e=hi.transform(o,[t,n,i,s,a[c],a[c+1]]);r.drawImage(l.canvas,e[4],e[5])}r.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:e,width:a,height:r,transform:o}=s,l=this.cachedCanvases.getCanvas("maskCanvas",a,r),c=l.context;c.save();ic(c,this.getObject(e,s)),c.globalCompositeOperation="source-in",c.fillStyle=i?n.getPattern(c,this,Di(t),Il):n,c.fillRect(0,0,a,r),c.restore(),t.save(),t.transform(...o),t.scale(1,-1),ec(t,l.canvas,0,0,a,r,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):Xn("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s)return void Xn("Dependent image isn't ready yet");const a=s.width,r=s.height,o=[];for(let l=0,c=i.length;l<c;l+=2)o.push({transform:[t,0,0,n,i[l],i[l+1]],x:0,y:0,w:a,h:r});this.paintInlineImageXObjectGroup(s,o)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;this.save();const{filter:s}=i;let a;if("none"!==s&&""!==s&&(i.filter="none"),i.scale(1/t,-1/n),e.bitmap)a=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)a=e;else{const i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;nc(i,e),a=this.applyTransferMapsToCanvas(i)}const r=this._scaleImage(a,Di(i));i.imageSmoothingEnabled=rc(Li(i),e.interpolate),ec(i,r.img,0,0,r.paintWidth,r.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const t=e.width,n=e.height,s=this.cachedCanvases.getCanvas("inlineImage",t,n).context;nc(s,e),i=this.applyTransferMapsToCanvas(s)}for(const s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),ec(n,i,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(n||(this.pendingClip===hc?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Li(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:s}=this.ctx.getTransform();let a,r;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(s);if(n===i)if(0===e)a=r=1/n;else{const t=n*e;a=r=t<1?1/t:1}else if(0===e)a=1/n,r=1/i;else{const t=n*e,s=i*e;a=t<1?1/t:1,r=s<1?1/s:1}}else{const o=Math.abs(t*s-n*i),l=Math.hypot(t,n),c=Math.hypot(i,s);if(0===e)a=c/o,r=l/o;else{const t=e*o;a=c>t?c/t:1,r=l>t?l/t:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=r}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[s,a]=this.getScaleForStroking();if(s===a)return n.lineWidth=(i||1)*s,void n.stroke(e);const r=n.getLineDash();t&&n.save(),n.scale(s,a),Ql.a=1/s,Ql.d=1/a;const o=new Path2D;if(o.addPath(e,Ql),r.length>0){const e=Math.max(s,a);n.setLineDash(r.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=i||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function pc(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function fc(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function gc(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}for(const n in On)void 0!==dc.prototype[n]&&(dc.prototype[On[n]]=dc.prototype[n]);class mc{static get workerPort(){return Ht(mc,this,vc)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");vc._=Ht(mc,this,e)}static get workerSrc(){return Ht(mc,this,bc)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");bc._=Ht(mc,this,e)}}var vc={_:null},bc={_:""},yc=new WeakMap,wc=new WeakMap;class xc{constructor(e){let{parsedData:t,rawData:n}=e;Bt(this,yc,void 0),Bt(this,wc,void 0),Gt(yc,this,t),Gt(wc,this,n)}getRaw(){return Vt(wc,this)}get(e){var t;return null!==(t=Vt(yc,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return Vt(yc,this).entries()}}const Sc=Symbol("INTERNAL");var kc=new WeakMap,Ac=new WeakMap,_c=new WeakMap,Ec=new WeakMap;class Cc{constructor(e,t){let{name:n,intent:i,usage:s,rbGroups:a}=t;Bt(this,kc,!1),Bt(this,Ac,!1),Bt(this,_c,!1),Bt(this,Ec,!0),Gt(kc,this,!!(e&pn)),Gt(Ac,this,!!(e&fn)),this.name=n,this.intent=i,this.usage=s,this.rbGroups=a}get visible(){if(Vt(_c,this))return Vt(Ec,this);if(!Vt(Ec,this))return!1;const{print:e,view:t}=this.usage;return Vt(kc,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!Vt(Ac,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==Sc&&Yn("Internal method `_setVisible` called."),Gt(_c,this,n),Gt(Ec,this,t)}}var Pc=new WeakMap,Mc=new WeakMap,Tc=new WeakMap,Rc=new WeakMap,Nc=new WeakSet;class Lc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn;if(zt(this,Nc),Bt(this,Pc,null),Bt(this,Mc,new Map),Bt(this,Tc,null),Bt(this,Rc,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,Gt(Rc,this,e.order);for(const n of e.groups)Vt(Mc,this).set(n.id,new Cc(t,n));if("OFF"===e.baseState)for(const e of Vt(Mc,this).values())e._setVisible(Sc,!1);for(const t of e.on)Vt(Mc,this).get(t)._setVisible(Sc,!0);for(const t of e.off)Vt(Mc,this).get(t)._setVisible(Sc,!1);Gt(Tc,this,this.getHash())}}isVisible(e){if(0===Vt(Mc,this).size)return!0;if(!e)return qn("Optional content group not defined."),!0;if("OCG"===e.type)return Vt(Mc,this).has(e.id)?Vt(Mc,this).get(e.id).visible:(Xn("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return Ht(Nc,this,Dc).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!Vt(Mc,this).has(t))return Xn("Optional content group not found: ".concat(t)),!0;if(Vt(Mc,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!Vt(Mc,this).has(t))return Xn("Optional content group not found: ".concat(t)),!0;if(!Vt(Mc,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!Vt(Mc,this).has(t))return Xn("Optional content group not found: ".concat(t)),!0;if(!Vt(Mc,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!Vt(Mc,this).has(t))return Xn("Optional content group not found: ".concat(t)),!0;if(Vt(Mc,this).get(t).visible)return!1}return!0}return Xn("Unknown optional content policy ".concat(e.policy,".")),!0}return Xn("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Vt(Mc,this).get(e);if(i){if(n&&t&&i.rbGroups.length)for(const t of i.rbGroups)for(const n of t){var s;if(n!==e)null===(s=Vt(Mc,this).get(n))||void 0===s||s._setVisible(Sc,!1,!0)}i._setVisible(Sc,!!t,!0),Gt(Pc,this,null)}else Xn("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const s of n){switch(s){case"ON":case"OFF":case"Toggle":t=s;continue}const e=Vt(Mc,this).get(s);if(e)switch(t){case"ON":this.setVisibility(s,!0,i);break;case"OFF":this.setVisibility(s,!1,i);break;case"Toggle":this.setVisibility(s,!e.visible,i)}}Gt(Pc,this,null)}get hasInitialVisibility(){return null===Vt(Tc,this)||this.getHash()===Vt(Tc,this)}getOrder(){return Vt(Mc,this).size?Vt(Rc,this)?Vt(Rc,this).slice():[...Vt(Mc,this).keys()]:null}getGroup(e){return Vt(Mc,this).get(e)||null}getHash(){if(null!==Vt(Pc,this))return Vt(Pc,this);const e=new fo;for(const[t,n]of Vt(Mc,this))e.update("".concat(t,":").concat(n.visible));return Gt(Pc,this,e.hexdigest())}[Symbol.iterator](){return Vt(Mc,this).entries()}}function Dc(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let s;if(Array.isArray(t))s=Ht(Nc,this,Dc).call(this,t);else{if(!Vt(Mc,this).has(t))return Xn("Optional content group not found: ".concat(t)),!0;s=Vt(Mc,this).get(t).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n}class Ic{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;Kn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:r,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=o,(null===a||void 0===a?void 0:a.length)>0){const e=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{Kn(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,s;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(s=i.onProgress)||void 0===s||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Kn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Fc(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new jc(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class Fc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=_i(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class jc{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Oc(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const i in t){const e=t[i];void 0!==e&&n.append(i,e)}return n}function Wc(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function zc(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:i,disableRange:s}=e;const a={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(r))return a;if(a.suggestedLength=r,r<=2*i)return a;if(s||!n)return a;if("bytes"!==t.get("Accept-Ranges"))return a;return"identity"!==(t.get("Content-Encoding")||"identity")||(a.allowRangeRequests=!0),a}function Bc(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=r(n);return e=unescape(e),e=o(e),e=l(e),a(e)}if(n=function(e){const t=[];let n;const s=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=s.exec(e));){let[,e,i,s]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,s]}const a=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=r(n),e&&(n=unescape(n),0===i&&(n=o(n))),a.push(n)}return a.join("")}(e),n)return a(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=r(n);return e=l(e),a(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function s(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),s=oi(n);n=i.decode(s),t=!1}catch(i){}}return n}function a(e){return t&&/[\x80-\xff]/.test(e)&&(e=s("utf-8",e),t&&(e=s("iso-8859-1",e))),e}function r(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:s(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,i){if("q"===n||"Q"===n)return s(t,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{i=atob(i)}catch(a){}return s(t,i)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(_i(e))return e}return null}function Hc(e,t){return new ii("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function Uc(e){return 200===e||206===e}function Vc(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Gc(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(Xn("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class qc{constructor(e){o(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Oc(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Kn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Xc(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Yc(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Xc{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,Vc(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=Wc(t.url),!Uc(t.status))throw Hc(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:s,suggestedLength:a}=zc({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=a||this._contentLength,this._filename=Bc(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ai("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Gc(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class Yc{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range","bytes=".concat(t,"-").concat(n-1));const a=i.url;fetch(a,Vc(s,this._withCredentials,this._abortController)).then(t=>{const n=Wc(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!Uc(t.status))throw Hc(t.status,a);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:Gc(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class Kc{constructor(e){let{url:t,httpHeaders:n,withCredentials:i}=e;o(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Oc(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",Kn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void n.onError(i.status);const s=i.status||200;if(!(200===s&&206===n.expectedStatus)&&s!==n.expectedStatus)return void n.onError(i.status);const a=function(e){const t=e.response;return"string"!==typeof t?t:oi(t).buffer}(i);if(206===s){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:a}):(Xn('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Qc{constructor(e){this._source=e,this._manager=new Kc(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Kn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $c(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new Jc(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class $c{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Wc(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=zc({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=Bc(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Hc(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Jc{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Wc(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=Hc(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Zc=/^[a-z][a-z0-9\-+.]+:/i;class eh{constructor(e){this.source=e,this.url=function(e){if(Zc.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),Kn("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Kn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new th(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new nh(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class th{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=Hc(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ai("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class nh{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ih=Symbol("INITIAL_DATA");var sh=new WeakMap,ah=new WeakSet;class rh{constructor(){zt(this,ah),Bt(this,sh,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=Ht(ah,this,oh).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=Vt(sh,this)[e];if(!n||n.data===ih)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=Vt(sh,this)[e];return!!t&&t.data!==ih}delete(e){const t=Vt(sh,this)[e];return!(!t||t.data===ih)&&(delete Vt(sh,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Ht(ah,this,oh).call(this,e);n.data=t,n.resolve()}clear(){for(const t in Vt(sh,this)){var e;const{data:n}=Vt(sh,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}Gt(sh,this,Object.create(null))}*[Symbol.iterator](){for(const e in Vt(sh,this)){const{data:t}=Vt(sh,this)[e];t!==ih&&(yield[e,t])}}}function oh(e){var t;return(t=Vt(sh,this))[e]||(t[e]=c(c({},Promise.withResolvers()),{},{data:ih}))}var lh=new WeakMap,ch=new WeakMap,hh=new WeakMap,uh=new WeakMap,dh=new WeakMap,ph=new WeakMap,fh=new WeakMap,gh=new WeakMap,mh=new WeakMap,vh=new WeakMap,bh=new WeakMap,yh=new WeakMap,wh=new WeakMap,xh=new WeakMap,Sh=new WeakMap,kh=new WeakMap,Ah=new WeakMap,_h=new WeakMap,Eh=new WeakSet;class Ch{constructor(e){var t;let{textContentSource:n,container:i,viewport:s}=e;if(zt(this,Eh),Bt(this,lh,Promise.withResolvers()),Bt(this,ch,null),Bt(this,hh,!1),Bt(this,uh,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),Bt(this,dh,null),Bt(this,ph,null),Bt(this,fh,0),Bt(this,gh,0),Bt(this,mh,null),Bt(this,vh,null),Bt(this,bh,0),Bt(this,yh,0),Bt(this,wh,Object.create(null)),Bt(this,xh,[]),Bt(this,Sh,null),Bt(this,kh,[]),Bt(this,Ah,new WeakMap),Bt(this,_h,null),n instanceof ReadableStream)Gt(Sh,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');Gt(Sh,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}Gt(ch,this,Gt(vh,this,i)),Gt(yh,this,s.scale*Fi.pixelRatio),Gt(bh,this,s.rotation),Gt(ph,this,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:r,pageX:o,pageY:l}=s.rawDims;Gt(_h,this,[1,0,0,-1,-o,l+r]),Gt(gh,this,a),Gt(fh,this,r),Lh.call(Ch),Ii(i,s),Vt(lh,this).promise.finally(()=>{Wh._.delete(this),Gt(ph,this,null),Gt(wh,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=li.platform;return Jn(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{Vt(mh,this).read().then(t=>{var n;let{value:i,done:s}=t;s?Vt(lh,this).resolve():(null!==(n=Vt(dh,this))&&void 0!==n||Gt(dh,this,i.lang),Object.assign(Vt(wh,this),i.styles),Ht(Eh,this,Ph).call(this,i.items),e())},Vt(lh,this).reject)};return Gt(mh,this,Vt(Sh,this).getReader()),Wh._.add(this),e(),Vt(lh,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*Fi.pixelRatio,s=t.rotation;if(s!==Vt(bh,this)&&(null===n||void 0===n||n(),Gt(bh,this,s),Ii(Vt(vh,this),{rotation:s})),i!==Vt(yh,this)){null===n||void 0===n||n(),Gt(yh,this,i);const e={div:null,properties:null,ctx:Rh.call(Ch,Vt(dh,this))};for(const t of Vt(kh,this))e.properties=Vt(Ah,this).get(t),e.div=t,Ht(Eh,this,Th).call(this,e)}}cancel(){var e;const t=new ai("TextLayer task cancelled.");null===(e=Vt(mh,this))||void 0===e||e.cancel(t).catch(()=>{}),Gt(mh,this,null),Vt(lh,this).reject(t)}get textDivs(){return Vt(kh,this)}get textContentItemsStr(){return Vt(xh,this)}static cleanup(){if(!(Ht(Ch,this,Wh)._.size>0)){Ht(Ch,this,Ih)._.clear();for(const{canvas:e}of Ht(Ch,this,Fh)._.values())e.remove();Ht(Ch,this,Fh)._.clear()}}}function Ph(e){var t,n;if(Vt(hh,this))return;null!==(n=(t=Vt(ph,this)).ctx)&&void 0!==n||(t.ctx=Rh.call(Jt,Vt(dh,this)));const i=Vt(kh,this),s=Vt(xh,this);for(const a of e){if(i.length>1e5)return Xn("Ignoring additional textDivs for performance reasons."),void Gt(hh,this,!0);if(void 0!==a.str)s.push(a.str),Ht(Eh,this,Mh).call(this,a);else if("beginMarkedContentProps"===a.type||"beginMarkedContent"===a.type){const e=Vt(ch,this);Gt(ch,this,document.createElement("span")),Vt(ch,this).classList.add("markedContent"),null!==a.id&&Vt(ch,this).setAttribute("id","".concat(a.id)),e.append(Vt(ch,this))}else"endMarkedContent"===a.type&&Gt(ch,this,Vt(ch,this).parentNode)}}function Mh(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};Vt(kh,this).push(t);const i=hi.transform(Vt(_h,this),e.transform);let s=Math.atan2(i[1],i[0]);const a=Vt(wh,this)[e.fontName];a.vertical&&(s+=Math.PI/2);let r=Vt(uh,this)&&a.fontSubstitution||a.fontFamily;r=Jt.fontFamilyMap.get(r)||r;const o=Math.hypot(i[2],i[3]),l=o*Dh.call(Jt,r,a,Vt(dh,this));let c,h;0===s?(c=i[4],h=i[5]-l):(c=i[4]+l*Math.sin(s),h=i[5]-l*Math.cos(s));const u="calc(var(--total-scale-factor) *",d=t.style;Vt(ch,this)===Vt(vh,this)?(d.left="".concat((100*c/Vt(gh,this)).toFixed(2),"%"),d.top="".concat((100*h/Vt(fh,this)).toFixed(2),"%")):(d.left="".concat(u).concat(c.toFixed(2),"px)"),d.top="".concat(u).concat(h.toFixed(2),"px)")),d.fontSize="".concat(u).concat((Oh._*o).toFixed(2),"px)"),d.fontFamily=r,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,Vt(uh,this)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),0!==s&&(n.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=a.vertical?e.height:e.width),Vt(Ah,this).set(t,n),Vt(ph,this).div=t,Vt(ph,this).properties=n,Ht(Eh,this,Th).call(this,Vt(ph,this)),n.hasText&&Vt(ch,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),Vt(ch,this).append(e)}}function Th(e){const{div:t,properties:n,ctx:i}=e,{style:s}=t;let a="";if(Oh._>1&&(a="scale(".concat(1/Oh._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=s,{canvasWidth:r,fontSize:o}=n;Nh.call(Jt,i,o*Vt(yh,this),e);const{width:l}=i.measureText(t.textContent);l>0&&(a="scaleX(".concat(r*Vt(yh,this)/l,") ").concat(a))}0!==n.angle&&(a="rotate(".concat(n.angle,"deg) ").concat(a)),a.length>0&&(s.transform=a)}function Rh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Ht(Jt,this,Fh)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),Ht(Jt,this,Fh)._.set(e,t),Ht(Jt,this,jh)._.set(t,{size:0,family:""})}return t}function Nh(e,t,n){const i=Ht(Jt,this,jh)._.get(e);t===i.size&&n===i.family||(e.font="".concat(t,"px ").concat(n),i.size=t,i.family=n)}function Lh(){if(null!==Ht(Jt,this,Oh)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),Oh._=Ht(Jt,this,e.getBoundingClientRect().height),e.remove()}function Dh(e,t,n){const i=Ht(Jt,this,Ih)._.get(e);if(i)return i;const s=Ht(Jt,this,Rh).call(this,n);s.canvas.width=s.canvas.height=30,Ht(Jt,this,Nh).call(this,s,30,e);const a=s.measureText(""),r=a.fontBoundingBoxAscent,o=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let l=.8;return r?l=r/(r+o):(li.platform.isFirefox&&Xn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),Ht(Jt,this,Ih)._.set(e,l),l}Jt=Ch;var Ih={_:new Map},Fh={_:new Map},jh={_:new WeakMap},Oh={_:null},Wh={_:new Set};class zh{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let s=null;const a=n.name;if("#text"===a)s=n.value;else{if(!zh.shouldBuildText(a))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?s=n.attributes.textContent:n.value&&(s=n.value)}if(null!==s&&t.push({str:s}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}function Bh(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new Hh,{docId:s}=i,a=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(cn)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,r=n.data?function(e){if(cn&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return oi(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,h=n.range instanceof Kh?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let d=n.worker instanceof ru?n.worker:null;const p=n.verbosity,f="string"!==typeof n.docBaseUrl||Ai(n.docBaseUrl)?null:n.docBaseUrl,g=Co(n.cMapUrl),m=!1!==n.cMapPacked,v=n.CMapReaderFactory||(cn?Nl:nl),b=Co(n.iccUrl),y=Co(n.standardFontDataUrl),w=n.StandardFontDataFactory||(cn?Ll:El),x=Co(n.wasmUrl),S=n.WasmFactory||(cn?Dl:Pl),k=!0!==n.stopAtErrors,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,_=!1!==n.isEvalSupported,E="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!cn,C="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!cn&&(li.platform.isFirefox||!globalThis.chrome),P=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M="boolean"===typeof n.disableFontFace?n.disableFontFace:cn,T=!0===n.fontExtraProperties,R=!0===n.enableXfa,N=n.ownerDocument||globalThis.document,L=!0===n.disableRange,D=!0===n.disableStream,I=!0===n.disableAutoFetch,F=!0===n.pdfBug,j=n.CanvasFactory||(cn?Rl:el),O=n.FilterFactory||(cn?Tl:dl),W=!0===n.enableHWA,z=!1!==n.useWasm,B=h?h.length:null!==(t=n.length)&&void 0!==t?t:NaN,H="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!cn&&!M,U="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===nl&&w===El&&S===Pl&&g&&y&&x&&Ci(g,document.baseURI)&&Ci(y,document.baseURI)&&Ci(x,document.baseURI));Vn(p);const V={canvasFactory:new j({ownerDocument:N,enableHWA:W}),filterFactory:new O({docId:s,ownerDocument:N}),cMapReaderFactory:U?null:new v({baseUrl:g,isCompressed:m}),standardFontDataFactory:U?null:new w({baseUrl:y}),wasmFactory:U?null:new S({baseUrl:x})};d||(d=ru.create({verbosity:p,port:mc.workerPort}),i._worker=d);const G={docId:s,apiVersion:"5.3.93",data:r,password:c,disableAutoFetch:I,rangeChunkSize:u,length:B,docBaseUrl:f,enableXfa:R,evaluatorOptions:{maxImageSize:A,disableFontFace:M,ignoreErrors:k,isEvalSupported:_,isOffscreenCanvasSupported:E,isImageDecoderSupported:C,canvasMaxAreaInBytes:P,fontExtraProperties:T,useSystemFonts:H,useWasm:z,useWorkerFetch:U,cMapUrl:g,iccUrl:b,standardFontDataUrl:y,wasmUrl:x}},q={ownerDocument:N,pdfBug:F,styleElement:null,loadingParams:{disableAutoFetch:I,enableXfa:R}};return d.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const e=d.messageHandler.sendWithPromise("GetDocRequest",G,r?[r.buffer]:null);let t;if(h)t=new Ic(h,{disableRange:L,disableStream:D});else if(!r){if(!a)throw new Error("getDocument - no `url` parameter provided.");const e=Ci(a)?qc:cn?eh:Qc;t=new e({url:a,length:B,httpHeaders:o,withCredentials:l,rangeChunkSize:u,disableRange:L,disableStream:D})}return e.then(e=>{if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const n=new Xo(s,e,d.port),a=new xu(n,i,t,q,V);i._transport=a,n.send("Ready",null)})}).catch(i._capability.reject),i}class Hh{constructor(){o(this,"_capability",Promise.withResolvers()),o(this,"_transport",null),o(this,"_worker",null),o(this,"docId","d".concat((Uh._=(Zt=Uh._,en=Zt++,Zt),en))),o(this,"destroyed",!1),o(this,"onPassword",null),o(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(s){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var Uh={_:0},Vh=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Xh=new WeakMap,Yh=new WeakMap;class Kh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Bt(this,Vh,Promise.withResolvers()),Bt(this,Gh,[]),Bt(this,qh,[]),Bt(this,Xh,[]),Bt(this,Yh,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){Vt(Yh,this).push(e)}addProgressListener(e){Vt(Xh,this).push(e)}addProgressiveReadListener(e){Vt(qh,this).push(e)}addProgressiveDoneListener(e){Vt(Gh,this).push(e)}onDataRange(e,t){for(const n of Vt(Yh,this))n(e,t)}onDataProgress(e,t){Vt(Vh,this).promise.then(()=>{for(const n of Vt(Xh,this))n(e,t)})}onDataProgressiveRead(e){Vt(Vh,this).promise.then(()=>{for(const t of Vt(qh,this))t(e)})}onDataProgressiveDone(){Vt(Vh,this).promise.then(()=>{for(const e of Vt(Gh,this))e()})}transportReady(){Vt(Vh,this).resolve()}requestDataRange(e,t){Yn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Qh{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Jn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var $h=new WeakMap,Jh=new WeakSet;class Zh{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];zt(this,Jh),Bt(this,$h,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new Ei:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new rh,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Si({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Jn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:i,viewport:s,intent:a="display",annotationMode:r=wn.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:h=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:p=!1}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const f=this._transport.getRenderingIntent(a,r,d,p),{renderingIntent:g,cacheKey:m}=f;Gt($h,this,!1),c||(c=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const b=!!(g&fn);var y;v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(y=this._stats)||void 0===y||y.time("Page Request"),this._pumpOperatorList(f));const w=e=>{var t;(v.renderTasks.delete(x),b&&Gt($h,this,!0),Ht(Jh,this,eu).call(this),e?(x.capability.reject(e),this._abortOperatorList({intentState:v,reason:e instanceof Error?e:new Error(e)})):x.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(t=globalThis.Stats)&&void 0!==t&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new Eu({callback:w,params:{canvasContext:i,viewport:s,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:u});((n=v).renderTasks||(n.renderTasks=new Set)).add(x);const S=x.task;return Promise.all([v.displayReadyCapability.promise,c]).then(e=>{var t;let[n,i]=e;if(this.destroyed)w();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:n,optionalContentConfig:i}),x.operatorListChanged()}}).catch(w),S}getOperatorList(){let{intent:e="display",annotationMode:t=wn.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this._transport.getRenderingIntent(e,t,n,i,!0);let a,r=this._intentStates.get(s.cacheKey);var o,l;(r||(r=Object.create(null),this._intentStates.set(s.cacheKey,r)),r.opListReadCapability)||(a=Object.create(null),a.operatorListChanged=function(){r.operatorList.lastChunk&&(r.opListReadCapability.resolve(r.operatorList),r.renderTasks.delete(a))},r.opListReadCapability=Promise.withResolvers(),((o=r).renderTasks||(o.renderTasks=new Set)).add(a),r.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(s));return r.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>zh.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const i=t.getReader(),s={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then(function(n){var i;let{value:a,done:r}=n;r?e(s):(null!==(i=s.lang)&&void 0!==i||(s.lang=a.lang),Object.assign(s.styles,a.styles),s.items.push(...a.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),Gt($h,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Gt($h,this,!0);const t=Ht(Jh,this,eu).call(this);return e&&t&&this._stats&&(this._stats=new Ei),t}_startRenderPage(e,t){var n,i;const s=this._intentStates.get(t);s&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=s.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&Ht(Jh,this,eu).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i,modifiedIds:s}=e;const{map:a,transfer:r}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:a,modifiedIds:s},r).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();Ht(Jh,this,eu).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof ki){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new ai(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function eu(){if(!Vt($h,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Gt($h,this,!1),!0}var tu=new WeakMap,nu=new WeakMap,iu=new WeakMap,su=new WeakMap,au=new WeakSet;class ru{constructor(){let{name:e=null,port:t=null,verbosity:n=Gn()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(zt(this,au),Bt(this,tu,Promise.withResolvers()),Bt(this,nu,null),Bt(this,iu,null),Bt(this,su,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(fu._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");fu._.set(t,this),Ht(au,this,lu).call(this,t)}else Ht(au,this,cu).call(this)}get promise(){return Vt(tu,this).promise}get port(){return Vt(iu,this)}get messageHandler(){return Vt(nu,this)}destroy(){var e,t;this.destroyed=!0,null===(e=Vt(su,this))||void 0===e||e.terminate(),Gt(su,this,null),fu._.delete(Vt(iu,this)),Gt(iu,this,null),null===(t=Vt(nu,this))||void 0===t||t.destroy(),Gt(nu,this,null)}static create(e){const t=Ht(ru,this,fu)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ru(e)}static get workerSrc(){if(mc.workerSrc)return mc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Jn(this,"_setupFakeWorkerGlobal",(async()=>{if(Ut(ru,this,uu))return Ut(ru,this,uu);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function ou(){Vt(tu,this).resolve(),Vt(nu,this).send("configure",{verbosity:this.verbosity})}function lu(e){Gt(iu,this,e),Gt(nu,this,new Xo("main","worker",e)),Vt(nu,this).on("ready",()=>{}),Ht(au,this,ou).call(this)}function cu(){if(pu._||uu(tn))return void Ht(au,this,hu).call(this);let{workerSrc:e}=tn;try{tn._isSameOrigin(window.location,e)||(e=tn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Xo("main","worker",t),i=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?Vt(tu,this).reject(new Error("Worker was destroyed")):Ht(au,this,hu).call(this)},s=new AbortController;t.addEventListener("error",()=>{Vt(su,this)||i()},{signal:s.signal}),n.on("test",e=>{s.abort(),!this.destroyed&&e?(Gt(nu,this,n),Gt(iu,this,t),Gt(su,this,t),Ht(au,this,ou).call(this)):i()}),n.on("ready",e=>{if(s.abort(),this.destroyed)i();else try{a()}catch(t){Ht(au,this,hu).call(this)}});const a=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void a()}catch(t){qn("The worker has been disabled.")}Ht(au,this,hu).call(this)}function hu(){pu._||(Xn("Setting up fake worker."),pu._=!0),tn._setupFakeWorkerGlobal.then(e=>{var t,n;if(this.destroyed)return void Vt(tu,this).reject(new Error("Worker was destroyed"));const i=new No;Gt(iu,this,i);const s="fake".concat((du._=(t=du._,n=t++,t),n)),a=new Xo(s+"_worker",s,i);e.setup(a,i),Gt(nu,this,new Xo(s,s+"_worker",i)),Ht(au,this,ou).call(this)}).catch(e=>{Vt(tu,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}function uu(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}tn=ru;var du={_:0},pu={_:!1},fu={_:new WeakMap};cn&&(pu._=Ht(tn,tn,!0),mc.workerSrc||(mc.workerSrc="./pdf.worker.mjs")),tn._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(t,n);return n.origin===i.origin},tn._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},tn.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return tn.create(e)};var gu=new WeakMap,mu=new WeakMap,vu=new WeakMap,bu=new WeakMap,yu=new WeakMap,wu=new WeakSet;class xu{constructor(e,t,n,i,s){zt(this,wu),Bt(this,gu,new Map),Bt(this,mu,new Map),Bt(this,vu,new Map),Bt(this,bu,new Map),Bt(this,yu,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new rh,this.fontLoader=new _o({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Jn(this,"annotationStorage",new wo)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=pn,r=go;switch(e){case"any":a=dn;break;case"display":break;case"print":a=fn;break;default:Xn("getRenderingIntent - invalid intent: ".concat(e))}const o=a&fn&&n instanceof ko?n:this.annotationStorage;switch(t){case wn.DISABLE:a+=vn;break;case wn.ENABLE:break;case wn.ENABLE_FORMS:a+=gn;break;case wn.ENABLE_STORAGE:a+=mn,r=o.serializable;break;default:Xn("getRenderingIntent - invalid annotationMode: ".concat(t))}i&&(a+=bn),s&&(a+=yn);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:a,cacheKey:[a,r.hash,c].join("_"),annotationStorageSerializable:r,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=Vt(yu,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of Vt(mu,this).values())t.push(i._destroy());Vt(mu,this).clear(),Vt(vu,this).clear(),Vt(bu,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),Vt(gu,this).clear(),this.filterFactory.destroy(),Ch.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new ai("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{Kn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:i}=e;i?t.close():(Kn(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:s}=this._fullReader;if(!n||!i){var a;if(this._lastProgress)null===(a=t.onProgress)||void 0===a||a.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:s}}),e.on("GetRangeReader",(e,t)=>{Kn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:i}=e;i?t.close():(Kn(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Qh(n,this))}),e.on("DocException",e=>{t._capability.reject(Vo(e))}),e.on("PasswordRequest",e=>{Gt(yu,this,Promise.withResolvers());try{if(!t.onPassword)throw Vo(e);const n=e=>{e instanceof Error?Vt(yu,this).reject(e):Vt(yu,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){Vt(yu,this).reject(n)}return Vt(yu,this).promise}),e.on("DataLoaded",e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;Vt(mu,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{var n;let[i,s,a]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in a){const e=a.error;Xn("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const t=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,r=new Eo(a,t);this.fontLoader.bind(r).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!r.fontExtraProperties&&r.data&&(r.data=null),this.commonObjs.resolve(i,r)});break;case"CopyLocalImage":const{imageRef:o}=a;Kn(o,"The imageRef must be defined.");for(const e of Vt(mu,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===o)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error("Got unknown common object type ".concat(s))}return null}),e.on("obj",e=>{let[t,n,i,s]=e;if(this.destroyed)return;const a=Vt(mu,this).get(n);var r;if(!a.objs.has(t))if(0!==a._intentStates.size)switch(i){case"Image":case"Pattern":a.objs.resolve(t,s);break;default:throw new Error("Got unknown object type ".concat(i))}else null===s||void 0===s||null===(r=s.bitmap)||void 0===r||r.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&Xn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=Vt(vu,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&Vt(bu,this).set(n.refStr,e);const i=new Zh(t,n,this,this._params.pdfBug);return Vt(mu,this).set(t,i),i});return Vt(vu,this).set(t,i),i}getPageIndex(e){return Po(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return Ht(wu,this,Su).call(this,"GetFieldObjects")}hasJSActions(){return Ht(wu,this,Su).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Ht(wu,this,Su).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return Ht(wu,this,Su).call(this,"GetOptionalContentConfig").then(t=>new Lc(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=Vt(gu,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,i,s;return{info:e[0],metadata:e[1]?new xc(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(s=this._fullReader)||void 0===s?void 0:s.contentLength)&&void 0!==i?i:null}});return Vt(gu,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of Vt(mu,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),Vt(gu,this).clear(),this.filterFactory.destroy(!0),Ch.cleanup()}}cachedPageNumber(e){var t;if(!Po(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=Vt(bu,this).get(n))&&void 0!==t?t:null}}function Su(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Vt(gu,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return Vt(gu,this).set(e,i),i}var ku=new WeakMap;class Au{constructor(e){Bt(this,ku,null),o(this,"onContinue",null),o(this,"onError",null),Gt(ku,this,e)}get promise(){return Vt(ku,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Vt(ku,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=Vt(ku,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=Vt(ku,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var _u=new WeakMap;class Eu{constructor(e){let{callback:t,params:n,objs:i,commonObjs:s,annotationCanvasMap:a,operatorList:r,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:h=!1,pdfBug:u=!1,pageColors:d=null}=e;Bt(this,_u,null),this.callback=t,this.params=n,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Au(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:s}=e;if(this.cancelled)return;if(this._canvas){if(Cu._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Cu._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:r,transform:o,background:l}=this.params;this.gfx=new dc(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:i,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),Vt(_u,this)&&(window.cancelAnimationFrame(Vt(_u,this)),Gt(_u,this,null)),Cu._.delete(this._canvas),i||(i=new ki("Rendering cancelled, page ".concat(this._pageIndex+1),s)),this.callback(i),null===(t=(n=this.task).onError)||void 0===t||t.call(n,i)}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Gt(_u,this,window.requestAnimationFrame(()=>{Gt(_u,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Cu._.delete(this._canvas),this.callback())))}}var Cu={_:new WeakSet};function Pu(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function Mu(e){return Math.max(0,Math.min(255,255*e))}class Tu{static CMYK_G(e){let[t,n,i,s]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+s)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=Mu(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=Pu(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(Mu)}static RGB_HTML(e){return"#".concat(e.map(Pu).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,s]=e;return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,n+s)]}static CMYK_rgb(e){let[t,n,i,s]=e;return[Mu(1-Math.min(1,t+s)),Mu(1-Math.min(1,i+s)),Mu(1-Math.min(1,n+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const s=1-t,a=1-n,r=1-i;return["CMYK",s,a,r,Math.min(s,a,r)]}}class Ru{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Yn("Abstract method `_createSVG` called.")}}class Nu extends Ru{_createSVG(e){return document.createElementNS(yi,e)}}class Lu{static setupStorage(e,t,n,i,s){const a=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===s)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===s)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})})}break;case"select":if(null!==a.value){e.setAttribute("value",a.value);for(const e of n.children)e.attributes.value===a.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,s=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:s})})}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:s,linkService:a}=e;const{attributes:r}=n,o=t instanceof HTMLAnchorElement;"radio"===r.type&&(r.name="".concat(r.name,"-").concat(s));for(const[l,c]of Object.entries(r))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&a.addLinkAttributes(t,r.href,r.newWindow),i&&r.dataId&&this.setupStorage(t,r.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:n});const r="richText"!==s,o=e.div;if(o.append(a),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}r&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);a.append(e),r&&zh.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const c=[[i,-1,a]];for(;c.length>0;){var h,u;const[e,i,a]=c.at(-1);if(i+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:d}=o;if("#text"===d){const e=document.createTextNode(o.value);l.push(e),a.append(e);continue}const p=null!==o&&void 0!==o&&null!==(h=o.attributes)&&void 0!==h&&h.xmlns?document.createElementNS(o.attributes.xmlns,d):document.createElement(d);if(a.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:t,intent:s,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,p]);else if(o.value){const e=document.createTextNode(o.value);r&&zh.shouldBuildText(d)&&l.push(e),p.append(e)}}for(const d of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const Du=new WeakSet;class Iu{static create(e){switch(e.data.annotationType){case Rn.LINK:return new Uu(e);case Rn.TEXT:return new Xu(e);case Rn.WIDGET:switch(e.data.fieldType){case"Tx":return new Ku(e);case"Btn":return e.data.radioButton?new Ju(e):e.data.checkBox?new $u(e):new Zu(e);case"Ch":return new ed(e);case"Sig":return new Qu(e)}return new Yu(e);case Rn.POPUP:return new td(e);case Rn.FREETEXT:return new Nd(e);case Rn.LINE:return new Dd(e);case Rn.SQUARE:return new Fd(e);case Rn.CIRCLE:return new Od(e);case Rn.POLYLINE:return new zd(e);case Rn.CARET:return new Hd(e);case Rn.INK:return new qd(e);case Rn.POLYGON:return new Bd(e);case Rn.HIGHLIGHT:return new Yd(e);case Rn.UNDERLINE:return new Kd(e);case Rn.SQUIGGLY:return new Qd(e);case Rn.STRIKEOUT:return new $d(e);case Rn.STAMP:return new Jd(e);case Rn.FILEATTACHMENT:return new tp(e);default:return new zu(e)}}}var Fu=new WeakMap,ju=new WeakMap,Ou=new WeakMap,Wu=new WeakSet;class zu{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zt(this,Wu),Bt(this,Fu,null),Bt(this,ju,!1),Bt(this,Ou,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{contentsObj:t,richText:n}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return zu._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;Vt(Fu,this)||Gt(Fu,this,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&Ht(Wu,this,Bu).call(this,n),null===(t=Vt(Ou,this))||void 0===t||t.popup.updateEdited(e)}resetEdited(){var e;Vt(Fu,this)&&(Ht(Wu,this,Bu).call(this,Vt(Fu,this).rect),null===(e=Vt(Ou,this))||void 0===e||e.popup.resetEdited(),Gt(Fu,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Yu||(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof td){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,s),s}const{width:r,height:o}=this;if(!e&&t.borderStyle.width>0){a.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");a.borderRadius=t}else if(this instanceof Ju){const e="calc(".concat(r,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");a.borderRadius=e}switch(t.borderStyle.style){case Nn:a.borderStyle="solid";break;case Ln:a.borderStyle="dashed";break;case Dn:Xn("Unimplemented border style: beveled");break;case In:Xn("Unimplemented border style: inset");break;case Fn:a.borderBottomStyle="solid"}const i=t.borderColor||null;i?(Gt(ju,this,!0),a.borderColor=hi.makeHexColor(0|i[0],0|i[1],0|i[2])):a.borderWidth=0}const l=hi.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:h,pageX:u,pageY:d}=i.rawDims;a.left="".concat(100*(l[0]-u)/c,"%"),a.top="".concat(100*(l[1]-d)/h,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(a.width="".concat(100*r/c,"%"),a.height="".concat(100*o/h,"%")):this.setRotation(p,s),s}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),t.style.width="".concat(100*s/n,"%"),t.style.height="".concat(100*a/i,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],s=i[0],a=i.slice(1);n.target.style[t]=Tu["".concat(s,"_HTML")](a),this.annotationStorage.setValue(this.data.id,{[t]:Tu["".concat(s,"_rgb")](a)})};return Jn(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||n[i];null===s||void 0===s||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,s]of Object.entries(t)){const a=n[i];if(a){a({detail:{[i]:s},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,s]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[a,r,o,l]=e.subarray(2,6);if(i===a&&s===r&&t===o&&n===l)return}const{style:a}=this.container;let r;if(Vt(ju,this)){const{borderColor:e,borderWidth:t}=a;a.borderWidth=0,r=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=i-t,l=s-n,{svgFactory:c}=this,h=c.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const u=c.createElement("defs");h.append(u);const d=c.createElement("clipPath"),p="clippath_".concat(this.data.id);d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),u.append(d);for(let g=2,m=e.length;g<m;g+=8){var f;const n=e[g],i=e[g+1],a=e[g+2],h=e[g+3],u=c.createElement("rect"),p=(a-t)/o,m=(s-i)/l,v=(n-a)/o,b=(i-h)/l;u.setAttribute("x",p),u.setAttribute("y",m),u.setAttribute("width",v),u.setAttribute("height",b),d.append(u),null===(f=r)||void 0===f||f.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(m,'" width="').concat(v,'" height="').concat(b,'"/>'))}Vt(ju,this)&&(r.push("</g></svg>')"),a.backgroundImage=r.join("")),this.container.append(h),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){const{data:e}=this,t=Gt(Ou,this,new td({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Yn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:s,exportValues:a}of i){if(-1===e)continue;if(s===t)continue;const i="string"===typeof a?a:null,r=document.querySelector('[data-element-id="'.concat(s,'"]'));!r||Du.has(r)?n.push({id:s,exportValue:i,domElement:r}):Xn("_getElementsByName - element not allowed: ".concat(s))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,s=i.getAttribute("data-element-id");s!==t&&(Du.has(i)&&n.push({id:s,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function Bu(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:r,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-r)/s,"%"),t.top="".concat(100*(a-e[3]+o)/a,"%"),0===i?(t.width="".concat(100*(e[2]-e[0])/s,"%"),t.height="".concat(100*(e[3]-e[1])/a,"%")):this.setRotation(i)}var Hu=new WeakSet;class Uu extends zu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),zt(this,Hu),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action),i=!0):e.attachment?(Ht(Hu,this,Gu).call(this,n,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(Ht(Hu,this,qu).call(this,n,e.setOCGState),i=!0):e.dest?(this._bindLink(n,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&Ht(Hu,this,Vu).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),Ht(Hu,this,Vu).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const s=n.get(i);s&&(e[s]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}e.onclick||(e.onclick=()=>!1),Ht(Hu,this,Vu).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),Ht(Hu,this,Vu).call(this),!this._fieldObjects)return Xn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:s}=t,a=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===s&&a.push(n)}else for(const t of Object.values(this._fieldObjects))a.push(...t);const r=this.annotationStorage,o=[];for(const t of a){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";r.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;r.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";r.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(Du.has(n)?n.dispatchEvent(new Event("resetform")):Xn("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function Vu(){this.container.setAttribute("data-internal-link","")}function Gu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,n),!1},Ht(Hu,this,Vu).call(this)}function qu(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),Ht(Hu,this,Vu).call(this)}class Xu extends zu{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Yu extends zu{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return li.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,s){n.includes("mouse")?e.addEventListener(n,e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var a;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}s&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(e)}}))})}_setEventListeners(e,t,n,i){for(const[o,l]of n){var s,a,r;if("Action"===l||null!==(s=this.data.actions)&&void 0!==s&&s[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,i),"Focus"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Blur?"Blur"!==l||null!==(r=this.data.actions)&&void 0!==r&&r.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":hi.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,s=e.style;let a;const r=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(un*i))||1);a=Math.min(i,r(t/un))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);a=Math.min(i,r(e/un))}s.fontSize="calc(".concat(a,"px * var(--total-scale-factor))"),s.color=hi.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Ku extends Yu{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),s.setValue(a.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const a=e.getValue(t,{value:this.data.fieldValue});let r=a.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let l=a.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:r,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:r,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:r),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Du.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const h=this.data.dateFormat||this.data.timeFormat;h&&(n.title=h),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=i,c.formattedValue=null});let u=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var s;n.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;c.userValue&&(n.value=c.userValue),c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i),e.setValue(t,{formattedValue:i})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:s}=n.detail,{target:a}=n;if(0===s)return void a.removeAttribute("maxLength");a.setAttribute("maxLength",s);let r=c.userValue;!r||r.length<=s||(r=r.slice(0,s),a.value=c.userValue=r,e.setValue(t,{value:r}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:1,selStart:a.selectionStart,selEnd:a.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",e=>{var n;c.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):i=2,-1===i)return;const{value:s}=e.target;c.lastCommittedValue!==s&&(c.lastCommittedValue=s,c.userValue=s,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const i=u;u=null,n.addEventListener("blur",e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{value:s}=e.target;var a;(c.userValue=s,c.lastCommittedValue!==s)&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)}),null!==(s=this.data.actions)&&void 0!==s&&s.Keystroke&&n.addEventListener("beforeinput",e=>{var n;c.lastCommittedValue=null;const{data:i,target:s}=e,{value:a,selectionStart:r,selectionEnd:o}=s;let l=r,h=o;switch(e.inputType){case"deleteWordBackward":{const e=a.substring(0,r).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=a.substring(r).match(/^[^\w]*\w*/);e&&(h+=e[0].length);break}case"deleteContentBackward":r===o&&(l-=1);break;case"deleteContentForward":r===o&&(h+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,change:i||"",willCommit:!1,selStart:l,selEnd:h}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(u&&n.addEventListener("blur",u),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Qu extends Yu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class $u extends Yu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Du.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",i=>{const{name:s,checked:a}=i.target;for(const r of this._getElementsByName(s,n)){const n=a&&r.exportValue===t.exportValue;r.domElement&&(r.domElement.checked=n),e.setValue(r.id,{value:n})}e.setValue(n,{value:a})}),s.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Ju extends Yu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(Du.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",t=>{const{name:i,checked:s}=t.target;for(const a of this._getElementsByName(i,n))e.setValue(a.id,{value:!1});e.setValue(n,{value:s})}),s.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;s.addEventListener("updatefromsandbox",t=>{const s={value:t=>{const s=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=s&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(s,t)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Zu extends Uu{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class ed extends Yu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Du.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),s=!1),i.append(e)}let a=null;if(s){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),a=()=>{e.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const r=e=>{const t=e?"value":"textContent",{options:n,multiple:s}=i;return s?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=r(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const s={value(n){var s;null===(s=a)||void 0===s||s();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=c.has(e.value);e.setValue(t,{value:r(!0)}),o=r(!1)},multipleSelection(e){i.multiple=!0},remove(n){const s=i.options,a=n.detail.remove;if(s[a].selected=!1,i.remove(a),s.length>0){-1===Array.prototype.findIndex.call(s,e=>e.selected)&&(s[0].selected=!0)}e.setValue(t,{value:r(!0),items:l(n)}),o=r(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),o=r(!1)},insert(n){const{index:s,displayValue:a,exportValue:c}=n.detail.insert,h=i.children[s],u=document.createElement("option");u.textContent=a,u.value=c,h?h.before(u):i.append(u),e.setValue(t,{value:r(!0),items:l(n)}),o=r(!1)},items(n){const{items:s}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of s){const{displayValue:t,exportValue:n}=e,s=document.createElement("option");s.textContent=t,s.value=n,i.append(s)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:r(!0),items:l(n)}),o=r(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:r(!0)}),o=r(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(s,n)}),i.addEventListener("input",n=>{var i;const s=r(!0),a=r(!1);e.setValue(t,{value:s}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:a,changeEx:s,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):i.addEventListener("input",function(n){e.setValue(t,{value:r(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class td extends zu{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:zu._hasPopupData(t)}),this.elements=n,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new Sd({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(e=>"".concat(mi).concat(e)).join(",")),this.container}}var nd=new WeakMap,id=new WeakMap,sd=new WeakMap,ad=new WeakMap,rd=new WeakMap,od=new WeakMap,ld=new WeakMap,cd=new WeakMap,hd=new WeakMap,ud=new WeakMap,dd=new WeakMap,pd=new WeakMap,fd=new WeakMap,gd=new WeakMap,md=new WeakMap,vd=new WeakMap,bd=new WeakMap,yd=new WeakMap,wd=new WeakMap,xd=new WeakSet;class Sd{constructor(e){let{container:t,color:n,elements:i,titleObj:s,modificationDate:a,contentsObj:r,richText:o,parent:l,rect:c,parentRect:h,open:u}=e;zt(this,xd),Bt(this,nd,Ht(xd,this,Cd).bind(this)),Bt(this,id,Ht(xd,this,Rd).bind(this)),Bt(this,sd,Ht(xd,this,Td).bind(this)),Bt(this,ad,Ht(xd,this,Md).bind(this)),Bt(this,rd,null),Bt(this,od,null),Bt(this,ld,null),Bt(this,cd,null),Bt(this,hd,null),Bt(this,ud,null),Bt(this,dd,null),Bt(this,pd,!1),Bt(this,fd,null),Bt(this,gd,null),Bt(this,md,null),Bt(this,vd,null),Bt(this,bd,null),Bt(this,yd,null),Bt(this,wd,!1),Gt(od,this,t),Gt(bd,this,s),Gt(ld,this,r),Gt(vd,this,o),Gt(ud,this,l),Gt(rd,this,n),Gt(md,this,c),Gt(dd,this,h),Gt(hd,this,i),Gt(cd,this,Ti.toDateObject(a)),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",Vt(ad,this)),p.addEventListener("mouseenter",Vt(sd,this)),p.addEventListener("mouseleave",Vt(id,this)),p.classList.add("popupTriggerArea");for(const p of i){var d;null===(d=p.container)||void 0===d||d.addEventListener("keydown",Vt(nd,this))}Vt(od,this).hidden=!0,u&&Ht(xd,this,Md).call(this)}render(){if(Vt(fd,this))return;const e=Gt(fd,this,document.createElement("div"));if(e.className="popup",Vt(rd,this)){const t=e.style.outlineColor=hi.makeHexColor(...Vt(rd,this));e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)")}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=Vt(bd,this)),e.append(t),Vt(cd,this)){const e=document.createElement("time");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:Vt(cd,this).valueOf()})),e.dateTime=Vt(cd,this).toISOString(),t.append(e)}const i=Ut(xd,this,kd);if(i)Lu.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(Vt(ld,this));e.append(t)}Vt(od,this).append(e)}_formatContents(e){let{str:t,dir:n}=e;const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const s=t.split(/(?:\r\n?|\n)/);for(let a=0,r=s.length;a<r;++a){const e=s[a];i.append(document.createTextNode(e)),a<r-1&&i.append(document.createElement("br"))}return i}updateEdited(e){var t;let{rect:n,popupContent:i}=e;Vt(yd,this)||Gt(yd,this,{contentsObj:Vt(ld,this),richText:Vt(vd,this)}),n&&Gt(gd,this,null),i&&(Gt(vd,this,Ht(xd,this,Ed).call(this,i)),Gt(ld,this,null)),null===(t=Vt(fd,this))||void 0===t||t.remove(),Gt(fd,this,null)}resetEdited(){var e;Vt(yd,this)&&(({contentsObj:Ot(Gt,[ld,this])._,richText:Ot(Gt,[vd,this])._}=Vt(yd,this)),Gt(yd,this,null),null===(e=Vt(fd,this))||void 0===e||e.remove(),Gt(fd,this,null),Gt(gd,this,null))}forceHide(){Gt(wd,this,this.isVisible),Vt(wd,this)&&(Vt(od,this).hidden=!0)}maybeShow(){Vt(wd,this)&&(Vt(fd,this)||Ht(xd,this,Td).call(this),Gt(wd,this,!1),Vt(od,this).hidden=!1)}get isVisible(){return!1===Vt(od,this).hidden}}function kd(e){const t=Vt(vd,e),n=Vt(ld,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:Vt(vd,e).html||null}function Ad(e){var t;return(null===(t=Ut(xd,e,kd))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function _d(e){var t;return(null===(t=Ut(xd,e,kd))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function Ed(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:Ut(xd,this,_d),fontSize:Ut(xd,this,Ad)?"calc(".concat(Ut(xd,this,Ad),"px * var(--total-scale-factor))"):""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:i});return n}function Cd(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&Vt(pd,this))&&Ht(xd,this,Md).call(this)}function Pd(){if(null!==Vt(gd,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:s}}}=Vt(ud,this);let a=!!Vt(dd,this),r=Vt(a?dd:md,this);for(const d of Vt(hd,this))if(!r||null!==hi.intersect(d.data.rect,r)){r=d.data.rect,a=!0;break}const o=hi.normalizeRect([r[0],e[3]-r[1]+e[1],r[2],e[3]-r[3]+e[1]]),l=a?r[2]-r[0]+5:0,c=o[0]+l,h=o[1];Gt(gd,this,[100*(c-i)/t,100*(h-s)/n]);const{style:u}=Vt(od,this);u.left="".concat(Vt(gd,this)[0],"%"),u.top="".concat(Vt(gd,this)[1],"%")}function Md(){Gt(pd,this,!Vt(pd,this)),Vt(pd,this)?(Ht(xd,this,Td).call(this),Vt(od,this).addEventListener("click",Vt(ad,this)),Vt(od,this).addEventListener("keydown",Vt(nd,this))):(Ht(xd,this,Rd).call(this),Vt(od,this).removeEventListener("click",Vt(ad,this)),Vt(od,this).removeEventListener("keydown",Vt(nd,this)))}function Td(){Vt(fd,this)||this.render(),this.isVisible?Vt(pd,this)&&Vt(od,this).classList.add("focused"):(Ht(xd,this,Pd).call(this),Vt(od,this).hidden=!1,Vt(od,this).style.zIndex=parseInt(Vt(od,this).style.zIndex)+1e3)}function Rd(){Vt(od,this).classList.remove("focused"),!Vt(pd,this)&&this.isVisible&&(Vt(od,this).hidden=!0,Vt(od,this).style.zIndex=parseInt(Vt(od,this).style.zIndex)-1e3)}class Nd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Sn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ld=new WeakMap;class Dd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Bt(this,Ld,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),s=Gt(Ld,this,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vt(Ld,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Id=new WeakMap;class Fd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Bt(this,Id,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,a=Gt(Id,this,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",t-s),a.setAttribute("height",n-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vt(Id,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var jd=new WeakMap;class Od extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Bt(this,jd,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,a=Gt(jd,this,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",t/2),a.setAttribute("cy",n/2),a.setAttribute("rx",t/2-s/2),a.setAttribute("ry",n/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vt(jd,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Wd=new WeakMap;class zd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Bt(this,Wd,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:s,height:a}=this;if(!t)return this.container;const r=this.svgFactory.create(s,a,!0);let o=[];for(let c=0,h=t.length;c<h;c+=2){const n=t[c]-e[0],i=e[3]-t[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=Gt(Wd,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vt(Wd,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class Bd extends zd{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Hd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ud=new WeakMap,Vd=new WeakMap,Gd=new WeakSet;class qd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),zt(this,Gd),Bt(this,Ud,null),Bt(this,Vd,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?Sn.HIGHLIGHT:Sn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:s}}=this,{transform:a,width:r,height:o}=Ht(Gd,this,Xd).call(this,t,e),l=this.svgFactory.create(r,o,!0),c=Gt(Ud,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",a);for(let h=0,u=n.length;h<u;h++){const e=this.svgFactory.createElement(this.svgElementName);Vt(Vd,this).push(e),e.setAttribute("points",n[h].join(",")),c.append(e)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,s=Vt(Ud,this);if(t>=0&&s.setAttribute("stroke-width",t||1),n)for(let a=0,r=Vt(Vd,this).length;a<r;a++)Vt(Vd,this)[a].setAttribute("points",n[a].join(","));if(i){const{transform:e,width:t,height:n}=Ht(Gd,this,Xd).call(this,this.data.rotation,i);s.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),s.setAttribute("transform",e)}}getElementsToTriggerPopup(){return Vt(Vd,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function Xd(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class Yd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Sn.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const t=document.createElement("mark");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Kd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Qd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class $d extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const t=document.createElement("s");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Jd extends zu{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Sn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Zd=new WeakMap,ep=new WeakSet;class tp extends zu{constructor(e){var t;super(e,{isRenderable:!0}),zt(this,ep),Bt(this,Zd,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",c({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",Ht(ep,this,np).bind(this)),Gt(Zd,this,n);const{isMac:i}=li.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&Ht(ep,this,np).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return Vt(Zd,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function np(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var ip=new WeakMap,sp=new WeakMap,ap=new WeakMap,rp=new WeakMap,op=new WeakSet;class lp{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:s,page:a,viewport:r,structTreeLayer:o}=e;zt(this,op),Bt(this,ip,null),Bt(this,sp,null),Bt(this,ap,new Map),Bt(this,rp,null),this.div=t,Gt(ip,this,n),Gt(sp,this,i),Gt(rp,this,o||null),this.page=a,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return Vt(ap,this).size>0}async render(e){const{annotations:t}=e,n=this.div;Ii(n,this.viewport);const i=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new Nu,annotationStorage:e.annotationStorage||new wo,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const r of t){if(r.noHTML)continue;const e=r.annotationType===Rn.POPUP;if(e){const e=i.get(r.id);if(!e)continue;s.elements=e}else if(r.rect[2]===r.rect[0]||r.rect[3]===r.rect[1])continue;s.data=r;const t=Iu.create(s);if(!t.isRenderable)continue;if(!e&&r.popupRef){const e=i.get(r.popupRef);e?e.push(t):i.set(r.popupRef,[t])}const n=t.render();var a;if(r.hidden&&(n.style.visibility="hidden"),await Ht(op,this,cp).call(this,n,r.id,s.elements),t._isEditable)Vt(ap,this).set(t.data.id,t),null===(a=this._annotationEditorUIManager)||void 0===a||a.renderAnnotationElement(t)}Ht(op,this,hp).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new Nu,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=lp._defaultBorderStyle),n.data=i;const e=Iu.create(n);if(!e.isRenderable)continue;const t=e.render();await Ht(op,this,cp).call(this,t,i.id,null)}}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,Ii(n,{rotation:t.rotation}),Ht(op,this,hp).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(Vt(ap,this).values())}getEditableAnnotation(e){return Vt(ap,this).get(e)}static get _defaultBorderStyle(){return Jn(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Nn,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function cp(e,t,n){var i;const s=e.firstChild||e,a=s.id="".concat(mi).concat(t),r=await(null===(i=Vt(rp,this))||void 0===i?void 0:i.getAriaAttributes(a));if(r)for(const[l,c]of r)s.setAttribute(l,c);var o;n?n.at(-1).container.after(e):(this.div.append(e),null===(o=Vt(ip,this))||void 0===o||o.moveElementInDOM(this.div,e,s,!1))}function hp(){if(!Vt(sp,this))return;const e=this.div;for(const[n,i]of Vt(sp,this)){const s=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!s)continue;i.className="annotationContent";const{firstChild:a}=s;a?"CANVAS"===a.nodeName?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):s.append(i);const r=Vt(ap,this).get(n);var t;if(r)if(r._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,s.id,i),r._hasNoCanvas=!1;else r.canvas=i}Vt(sp,this).clear()}const up=/\r\n?|\n/g;var dp=new WeakMap,pp=new WeakMap,fp=new WeakMap,gp=new WeakMap,mp=new WeakMap,vp=new WeakSet;class bp extends Ur{static get _keyboardManager(){const e=bp.prototype,t=e=>e.isEmpty(),n=ma.TRANSLATE_SMALL,i=ma.TRANSLATE_BIG;return Jn(this,"_keyboardManager",new xs([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super(c(c({},e),{},{name:"freeTextEditor"})),zt(this,vp),Bt(this,dp,void 0),Bt(this,pp,""),Bt(this,fp,"".concat(this.id,"-editor")),Bt(this,gp,null),Bt(this,mp,void 0),Gt(dp,this,e.color||bp._defaultColor||Ur._defaultLineColor),Gt(mp,this,e.fontSize||bp._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Ur.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case kn.FREETEXT_SIZE:bp._defaultFontSize=t;break;case kn.FREETEXT_COLOR:bp._defaultColor=t}}updateParams(e,t){switch(e){case kn.FREETEXT_SIZE:Ht(vp,this,yp).call(this,t);break;case kn.FREETEXT_COLOR:Ht(vp,this,wp).call(this,t)}}static get defaultPropertiesToUpdate(){return[[kn.FREETEXT_SIZE,bp._defaultFontSize],[kn.FREETEXT_COLOR,bp._defaultColor||Ur._defaultLineColor]]}get propertiesToUpdate(){return[[kn.FREETEXT_SIZE,Vt(mp,this)],[kn.FREETEXT_COLOR,Vt(dp,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-bp._internalPadding*e,-(bp._internalPadding+Vt(mp,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Gt(gp,this,new AbortController);const e=this._uiManager.combinedSignal(Vt(gp,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Vt(fp,this)),this._isDraggable=!0,null===(e=Vt(gp,this))||void 0===e||e.abort(),Gt(gp,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=Vt(pp,this),t=Gt(pp,this,Ht(vp,this,xp).call(this).trimEnd());if(e===t)return;const n=e=>{Gt(pp,this,e),e?(Ht(vp,this,Ap).call(this),this._uiManager.rebuild(this),Ht(vp,this,Sp).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),Ht(vp,this,Sp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){bp._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Vt(fp,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(Vt(mp,this),"px * var(--total-scale-factor))"),n.color=Vt(dp,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[a,r]=this.getInitialTranslation();[a,r]=this.pageTranslationToScreen(a,r);const[o,l]=this.pageDimensions,[c,h]=this.pageTranslation;let u,d;switch(this.rotation){case 0:u=e+(s[0]-c)/o,d=t+this.height-(s[1]-h)/l;break;case 90:u=e+(s[0]-c)/o,d=t-(s[1]-h)/l,[a,r]=[r,-a];break;case 180:u=e-this.width+(s[0]-c)/o,d=t-(s[1]-h)/l,[a,r]=[-a,-r];break;case 270:u=e+(s[0]-c-this.height*l)/o,d=t+(s[1]-h-this.width*o)/l,[a,r]=[-r,a]}this.setAt(u*n,d*i,a,r)}else this._moveAfterPaste(e,t);Ht(vp,this,Ap).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=Ep.call(bp,t.getData("text")||"").replaceAll(up,"\n");if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!i.includes("\n"))return a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:r,startOffset:o}=a,l=[],c=[];if(r.nodeType===Node.TEXT_NODE){const e=r.parentElement;if(c.push(r.nodeValue.slice(o).replaceAll(up,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(kp.call(bp,n)):t=c}l.push(r.nodeValue.slice(0,o).replaceAll(up,""))}else if(r===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(kp.call(bp,n))}Gt(pp,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),Ht(vp,this,Ap).call(this);const h=new Range;let u=Math.sumPrecise(l.map(e=>e.length));for(const{firstChild:d}of this.editorDiv.childNodes)if(d.nodeType===Node.TEXT_NODE){const e=d.nodeValue.length;if(u<=e){h.setStart(d,u),h.setEnd(d,u);break}u-=e}s.removeAllRanges(),s.addRange(h)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let i=null;if(e instanceof Nd){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:s,rotation:a,id:r,popupRef:o},textContent:l,textPosition:c,parent:{page:{pageNumber:h}}}=e;if(!l||0===l.length)return null;i=e={annotationType:Sn.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:c,pageIndex:h-1,rect:s.slice(0),rotation:a,annotationElementId:r,id:r,deleted:!1,popupRef:o}}const s=await super.deserialize(e,t,n);return Gt(mp,s,e.fontSize),Gt(dp,s,hi.makeHexColor(...e.color)),Gt(pp,s,Ep.call(bp,e.value)),s._initialData=i,s}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=bp._internalPadding*this.parentScale,n=this.getRect(t,t),i=Ur._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Vt(dp,this)),s={annotationType:Sn.FREETEXT,color:i,fontSize:Vt(mp,this),value:Ht(vp,this,_p).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(s.isCopy=!0,s):this.annotationElementId&&!Ht(vp,this,Cp).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize="calc(".concat(Vt(mp,this),"px * var(--total-scale-factor))"),n.color=Vt(dp,this),t.replaceChildren();for(const s of Vt(pp,this).split("\n")){const e=document.createElement("div");e.append(s?document.createTextNode(s):document.createElement("br")),t.append(e)}const i=bp._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:Vt(pp,this)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function yp(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-Vt(mp,this))*this.parentScale),Gt(mp,this,e),Ht(vp,this,Sp).call(this)},n=Vt(mp,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function wp(e){const t=e=>{Gt(dp,this,this.editorDiv.style.color=e)},n=Vt(dp,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function xp(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(kp.call(nn,i)),t=i)}return e.join("\n")}function Sp(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,s=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",s)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function kp(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(up,"")}function Ap(){if(this.editorDiv.replaceChildren(),Vt(pp,this))for(const e of Vt(pp,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function _p(){return Vt(pp,this).replaceAll("\xa0"," ")}function Ep(e){return e.replaceAll(" ","\xa0")}function Cp(e){const{value:t,fontSize:n,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==i[t])||e.pageIndex!==s}nn=bp,o(bp,"_freeTextDefaultContent",""),o(bp,"_internalPadding",0),o(bp,"_defaultColor",null),o(bp,"_defaultFontSize",10),o(bp,"_type","freetext"),o(bp,"_editorType",Sn.FREETEXT);class Pp{toSVGPath(){Yn("Abstract method `toSVGPath` must be implemented.")}get box(){Yn("Abstract getter `box` must be implemented.")}serialize(e,t){Yn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,s,a){a||(a=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)a[r]=t+e[r]*i,a[r+1]=n+e[r+1]*s;return a}static _rescaleAndSwap(e,t,n,i,s,a){a||(a=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)a[r]=t+e[r+1]*i,a[r+1]=n+e[r]*s;return a}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)i[s]=t+e[s],i[s+1]=n+e[s+1];return i}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,i,s){switch(s){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,s,a){return[(e+5*n)/6,(t+5*i)/6,(5*n+s)/6,(5*i+a)/6,(n+s)/2,(i+a)/2]}}o(Pp,"PRECISION",1e-4);var Mp=new WeakMap,Tp=new WeakMap,Rp=new WeakMap,Np=new WeakMap,Lp=new WeakMap,Dp=new WeakMap,Ip=new WeakMap,Fp=new WeakMap,jp=new WeakMap,Op=new WeakMap,Wp=new WeakMap,zp=new WeakMap,Bp=new WeakMap,Hp=new WeakSet;class Up{constructor(e,t,n,i,s){let{x:a,y:r}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;zt(this,Hp),Bt(this,Mp,void 0),Bt(this,Tp,[]),Bt(this,Rp,void 0),Bt(this,Np,void 0),Bt(this,Lp,[]),Bt(this,Dp,new Float32Array(18)),Bt(this,Ip,void 0),Bt(this,Fp,void 0),Bt(this,jp,void 0),Bt(this,Op,void 0),Bt(this,Wp,void 0),Bt(this,zp,void 0),Bt(this,Bp,[]),Gt(Mp,this,t),Gt(zp,this,i*n),Gt(Np,this,s),Vt(Dp,this).set([NaN,NaN,NaN,NaN,a,r],6),Gt(Rp,this,o),Gt(Op,this,$p._*n),Gt(jp,this,Jp._*n),Gt(Wp,this,n),Vt(Bp,this).push(a,r)}isEmpty(){return isNaN(Vt(Dp,this)[8])}add(e){var t;let{x:n,y:i}=e;Gt(Ip,this,n),Gt(Fp,this,i);const[s,a,r,o]=Vt(Mp,this);let[l,c,h,u]=Vt(Dp,this).subarray(8,12);const d=n-h,p=i-u,f=Math.hypot(d,p);if(f<Vt(jp,this))return!1;const g=f-Vt(Op,this),m=g/f,v=m*d,b=m*p;let y=l,w=c;l=h,c=u,h+=v,u+=b,null===(t=Vt(Bp,this))||void 0===t||t.push(n,i);const x=v/g,S=-b/g*Vt(zp,this),k=x*Vt(zp,this);if(Vt(Dp,this).set(Vt(Dp,this).subarray(2,8),0),Vt(Dp,this).set([h+S,u+k],4),Vt(Dp,this).set(Vt(Dp,this).subarray(14,18),12),Vt(Dp,this).set([h-S,u-k],16),isNaN(Vt(Dp,this)[6]))return 0===Vt(Lp,this).length&&(Vt(Dp,this).set([l+S,c+k],2),Vt(Lp,this).push(NaN,NaN,NaN,NaN,(l+S-s)/r,(c+k-a)/o),Vt(Dp,this).set([l-S,c-k],14),Vt(Tp,this).push(NaN,NaN,NaN,NaN,(l-S-s)/r,(c-k-a)/o)),Vt(Dp,this).set([y,w,l,c,h,u],6),!this.isEmpty();Vt(Dp,this).set([y,w,l,c,h,u],6);return Math.abs(Math.atan2(w-c,y-l)-Math.atan2(b,v))<Math.PI/2?([l,c,h,u]=Vt(Dp,this).subarray(2,6),Vt(Lp,this).push(NaN,NaN,NaN,NaN,((l+h)/2-s)/r,((c+u)/2-a)/o),[l,c,y,w]=Vt(Dp,this).subarray(14,18),Vt(Tp,this).push(NaN,NaN,NaN,NaN,((y+l)/2-s)/r,((w+c)/2-a)/o),!0):([y,w,l,c,h,u]=Vt(Dp,this).subarray(0,6),Vt(Lp,this).push(((y+5*l)/6-s)/r,((w+5*c)/6-a)/o,((5*l+h)/6-s)/r,((5*c+u)/6-a)/o,((l+h)/2-s)/r,((c+u)/2-a)/o),[h,u,l,c,y,w]=Vt(Dp,this).subarray(12,18),Vt(Tp,this).push(((y+5*l)/6-s)/r,((w+5*c)/6-a)/o,((5*l+h)/6-s)/r,((5*c+u)/6-a)/o,((l+h)/2-s)/r,((c+u)/2-a)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=Vt(Lp,this),t=Vt(Tp,this);if(isNaN(Vt(Dp,this)[6])&&!this.isEmpty())return Ht(Hp,this,Gp).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));Ht(Hp,this,Xp).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));return Ht(Hp,this,qp).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,s,a){return new lf(e,t,n,i,s,a)}getOutlines(){var e,t;const n=Vt(Lp,this),i=Vt(Tp,this),s=Vt(Dp,this),[a,r,o,l]=Vt(Mp,this),c=new Float32Array((null!==(e=null===(t=Vt(Bp,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let d=0,p=c.length-2;d<p;d+=2)c[d]=(Vt(Bp,this)[d]-a)/o,c[d+1]=(Vt(Bp,this)[d+1]-r)/l;if(c[c.length-2]=(Vt(Ip,this)-a)/o,c[c.length-1]=(Vt(Fp,this)-r)/l,isNaN(s[6])&&!this.isEmpty())return Ht(Hp,this,Yp).call(this,c);const h=new Float32Array(Vt(Lp,this).length+24+Vt(Tp,this).length);let u=n.length;for(let d=0;d<u;d+=2)isNaN(n[d])?h[d]=h[d+1]=NaN:(h[d]=n[d],h[d+1]=n[d+1]);u=Ht(Hp,this,Qp).call(this,h,u);for(let d=i.length-6;d>=6;d-=6)for(let e=0;e<6;e+=2)isNaN(i[d+e])?(h[u]=h[u+1]=NaN,u+=2):(h[u]=i[d+e],h[u+1]=i[d+e+1],u+=2);return Ht(Hp,this,Kp).call(this,h,u),this.newFreeDrawOutline(h,c,Vt(Mp,this),Vt(Wp,this),Vt(Rp,this),Vt(Np,this))}}function Vp(){const e=Vt(Dp,this).subarray(4,6),t=Vt(Dp,this).subarray(16,18),[n,i,s,a]=Vt(Mp,this);return[(Vt(Ip,this)+(e[0]-t[0])/2-n)/s,(Vt(Fp,this)+(e[1]-t[1])/2-i)/a,(Vt(Ip,this)+(t[0]-e[0])/2-n)/s,(Vt(Fp,this)+(t[1]-e[1])/2-i)/a]}function Gp(){const[e,t,n,i]=Vt(Mp,this),[s,a,r,o]=Ht(Hp,this,Vp).call(this);return"M".concat((Vt(Dp,this)[2]-e)/n," ").concat((Vt(Dp,this)[3]-t)/i," L").concat((Vt(Dp,this)[4]-e)/n," ").concat((Vt(Dp,this)[5]-t)/i," L").concat(s," ").concat(a," L").concat(r," ").concat(o," L").concat((Vt(Dp,this)[16]-e)/n," ").concat((Vt(Dp,this)[17]-t)/i," L").concat((Vt(Dp,this)[14]-e)/n," ").concat((Vt(Dp,this)[15]-t)/i," Z")}function qp(e){const t=Vt(Tp,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function Xp(e){const[t,n,i,s]=Vt(Mp,this),a=Vt(Dp,this).subarray(4,6),r=Vt(Dp,this).subarray(16,18),[o,l,c,h]=Ht(Hp,this,Vp).call(this);e.push("L".concat((a[0]-t)/i," ").concat((a[1]-n)/s," L").concat(o," ").concat(l," L").concat(c," ").concat(h," L").concat((r[0]-t)/i," ").concat((r[1]-n)/s))}function Yp(e){const t=Vt(Dp,this),[n,i,s,a]=Vt(Mp,this),[r,o,l,c]=Ht(Hp,this,Vp).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-i)/a,NaN,NaN,NaN,NaN,r,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-i)/a],0),this.newFreeDrawOutline(h,e,Vt(Mp,this),Vt(Wp,this),Vt(Rp,this),Vt(Np,this))}function Kp(e,t){const n=Vt(Tp,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function Qp(e,t){const n=Vt(Dp,this).subarray(4,6),i=Vt(Dp,this).subarray(16,18),[s,a,r,o]=Vt(Mp,this),[l,c,h,u]=Ht(Hp,this,Vp).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/r,(n[1]-a)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(i[0]-s)/r,(i[1]-a)/o],t),t+24}var $p={_:8},Jp={_:$p._+2},Zp=new WeakMap,ef=new WeakMap,tf=new WeakMap,nf=new WeakMap,sf=new WeakMap,af=new WeakMap,rf=new WeakMap,of=new WeakSet;class lf extends Pp{constructor(e,t,n,i,s,a){super(),zt(this,of),Bt(this,Zp,void 0),Bt(this,ef,new Float32Array(4)),Bt(this,tf,void 0),Bt(this,nf,void 0),Bt(this,sf,void 0),Bt(this,af,void 0),Bt(this,rf,void 0),Gt(rf,this,e),Gt(sf,this,t),Gt(Zp,this,n),Gt(af,this,i),Gt(tf,this,s),Gt(nf,this,a),this.lastPoint=[NaN,NaN],Ht(of,this,cf).call(this,a);const[r,o,l,c]=Vt(ef,this);for(let h=0,u=e.length;h<u;h+=2)e[h]=(e[h]-r)/l,e[h+1]=(e[h+1]-o)/c;for(let h=0,u=t.length;h<u;h+=2)t[h]=(t[h]-r)/l,t[h+1]=(t[h+1]-o)/c}toSVGPath(){const e=["M".concat(Vt(rf,this)[4]," ").concat(Vt(rf,this)[5])];for(let t=6,n=Vt(rf,this).length;t<n;t+=6)isNaN(Vt(rf,this)[t])?e.push("L".concat(Vt(rf,this)[t+4]," ").concat(Vt(rf,this)[t+5])):e.push("C".concat(Vt(rf,this)[t]," ").concat(Vt(rf,this)[t+1]," ").concat(Vt(rf,this)[t+2]," ").concat(Vt(rf,this)[t+3]," ").concat(Vt(rf,this)[t+4]," ").concat(Vt(rf,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,s,a]=e;const r=s-n,o=a-i;let l,c;switch(t){case 0:l=Pp._rescale(Vt(rf,this),n,a,r,-o),c=Pp._rescale(Vt(sf,this),n,a,r,-o);break;case 90:l=Pp._rescaleAndSwap(Vt(rf,this),n,i,r,o),c=Pp._rescaleAndSwap(Vt(sf,this),n,i,r,o);break;case 180:l=Pp._rescale(Vt(rf,this),s,i,-r,o),c=Pp._rescale(Vt(sf,this),s,i,-r,o);break;case 270:l=Pp._rescaleAndSwap(Vt(rf,this),s,a,-r,-o),c=Pp._rescaleAndSwap(Vt(sf,this),s,a,-r,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return Vt(ef,this)}newOutliner(e,t,n,i,s){return new Up(e,t,n,i,s,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,i,s,a]=Vt(ef,this),[r,o,l,c]=Vt(Zp,this),h=s*l,u=a*c,d=n*l+r,p=i*c+o,f=this.newOutliner({x:Vt(sf,this)[0]*h+d,y:Vt(sf,this)[1]*u+p},Vt(Zp,this),Vt(af,this),e,Vt(nf,this),null!==t&&void 0!==t?t:Vt(tf,this));for(let g=2;g<Vt(sf,this).length;g+=2)f.add({x:Vt(sf,this)[g]*h+d,y:Vt(sf,this)[g+1]*u+p});return f.getOutlines()}}function cf(e){const t=Vt(rf,this);let n=t[4],i=t[5];const s=[n,i,n,i];let a=n,r=i;const o=e?Math.max:Math.min;for(let c=6,h=t.length;c<h;c+=6){const e=t[c+4],l=t[c+5];if(isNaN(t[c]))hi.pointBoundingBox(e,l,s),r<l?(a=e,r=l):r===l&&(a=o(a,e));else{const e=[1/0,1/0,-1/0,-1/0];hi.bezierBoundingBox(n,i,...t.slice(c,c+6),e),hi.rectBoundingBox(...e,s),r<e[3]?(a=e[2],r=e[3]):r===e[3]&&(a=o(a,e[2]))}n=e,i=l}const l=Vt(ef,this);l[0]=s[0]-Vt(tf,this),l[1]=s[1]-Vt(tf,this),l[2]=s[2]-s[0]+2*Vt(tf,this),l[3]=s[3]-s[1]+2*Vt(tf,this),this.lastPoint=[a,r]}var hf=new WeakMap,uf=new WeakMap,df=new WeakMap,pf=new WeakMap,ff=new WeakSet;class gf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];zt(this,ff),Bt(this,hf,void 0),Bt(this,uf,void 0),Bt(this,df,[]),Bt(this,pf,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:d,y:p,width:f,height:g}of e){const e=Math.floor((d-t)/a)*a,n=Math.ceil((d+f+t)/a)*a,i=Math.floor((p-t)/a)*a,r=Math.ceil((p+g+t)/a)*a,o=[e,i,r,!0],l=[n,i,r,!1];Vt(df,this).push(o,l),hi.rectBoundingBox(e,i,n,r,s)}const r=s[2]-s[0]+2*n,o=s[3]-s[1]+2*n,l=s[0]-n,c=s[1]-n,h=Vt(df,this).at(i?-1:-2),u=[h[0],h[2]];for(const d of Vt(df,this)){const[e,t,n]=d;d[0]=(e-l)/r,d[1]=(t-c)/o,d[2]=(n-c)/o}Gt(hf,this,new Float32Array([l,c,r,o])),Gt(uf,this,u)}getOutlines(){Vt(df,this).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of Vt(df,this))t[3]?(e.push(...Ht(ff,this,wf).call(this,t)),Ht(ff,this,bf).call(this,t)):(Ht(ff,this,yf).call(this,t),e.push(...Ht(ff,this,wf).call(this,t)));return Ht(ff,this,mf).call(this,e)}}function mf(e){const t=[],n=new Set;for(const a of e){const[e,n,i]=a;t.push([e,n,a],[e,i,a])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let a=0,r=t.length;a<r;a+=2){const e=t[a][2],i=t[a+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let s;for(;n.size>0;){const e=n.values().next().value;let[t,a,r,o,l]=e;n.delete(e);let c=t,h=a;for(s=[t,r],i.push(s);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,a,r,o,l]=e,c!==t&&(s.push(c,h,t,h===a?a:r),c=t),h=h===a?r:a}s.push(c,h)}return new kf(i,Vt(hf,this),Vt(uf,this))}function vf(e){const t=Vt(pf,this);let n=0,i=t.length-1;for(;n<=i;){const s=n+i>>1,a=t[s][0];if(a===e)return s;a<e?n=s+1:i=s-1}return i+1}function bf(e){let[,t,n]=e;const i=Ht(ff,this,vf).call(this,t);Vt(pf,this).splice(i,0,[t,n])}function yf(e){let[,t,n]=e;const i=Ht(ff,this,vf).call(this,t);for(let s=i;s<Vt(pf,this).length;s++){const[e,i]=Vt(pf,this)[s];if(e!==t)break;if(e===t&&i===n)return void Vt(pf,this).splice(s,1)}for(let s=i-1;s>=0;s--){const[e,i]=Vt(pf,this)[s];if(e!==t)break;if(e===t&&i===n)return void Vt(pf,this).splice(s,1)}}function wf(e){const[t,n,i]=e,s=[[t,n,i]],a=Ht(ff,this,vf).call(this,i);for(let r=0;r<a;r++){const[e,n]=Vt(pf,this)[r];for(let i=0,a=s.length;i<a;i++){const[,r,o]=s[i];if(!(n<=r||o<=e))if(r>=e)if(o>n)s[i][1]=n;else{if(1===a)return[];s.splice(i,1),i--,a--}else s[i][2]=e,o>n&&s.push([t,n,o])}}return s}var xf=new WeakMap,Sf=new WeakMap;class kf extends Pp{constructor(e,t,n){super(),Bt(this,xf,void 0),Bt(this,Sf,void 0),Gt(Sf,this,e),Gt(xf,this,t),this.lastPoint=n}toSVGPath(){const e=[];for(const t of Vt(Sf,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let s=2;s<t.length;s+=2){const a=t[s],r=t[s+1];a===n?(e.push("V".concat(r)),i=r):r===i&&(e.push("H".concat(a)),n=a)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,s,a]=e;const r=[],o=s-n,l=a-i;for(const c of Vt(Sf,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=a-c[t+1]*l;r.push(e)}return r}get box(){return Vt(xf,this)}get classNamesForOutlining(){return["highlightOutline"]}}class Af extends Up{newFreeDrawOutline(e,t,n,i,s,a){return new _f(e,t,n,i,s,a)}}class _f extends lf{newOutliner(e,t,n,i,s){return new Af(e,t,n,i,s,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var Ef=new WeakMap,Cf=new WeakMap,Pf=new WeakMap,Mf=new WeakMap,Tf=new WeakMap,Rf=new WeakMap,Nf=new WeakMap,Lf=new WeakMap,Df=new WeakMap,If=new WeakMap,Ff=new WeakMap,jf=new WeakSet;class Of{static get _keyboardManager(){return Jn(this,"_keyboardManager",new xs([[["Escape","mac+Escape"],Of.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Of.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Of.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Of.prototype._moveToPrevious],[["Home","mac+Home"],Of.prototype._moveToBeginning],[["End","mac+End"],Of.prototype._moveToEnd]]))}constructor(e){var t,n;let{editor:i=null,uiManager:s=null}=e;zt(this,jf),Bt(this,Ef,null),Bt(this,Cf,null),Bt(this,Pf,void 0),Bt(this,Mf,null),Bt(this,Tf,!1),Bt(this,Rf,!1),Bt(this,Nf,null),Bt(this,Lf,void 0),Bt(this,Df,null),Bt(this,If,null),Bt(this,Ff,void 0),i?(Gt(Rf,this,!1),Gt(Ff,this,kn.HIGHLIGHT_COLOR),Gt(Nf,this,i)):(Gt(Rf,this,!0),Gt(Ff,this,kn.HIGHLIGHT_DEFAULT_COLOR)),Gt(If,this,(null===i||void 0===i?void 0:i._uiManager)||s),Gt(Lf,this,Vt(If,this)._eventBus),Gt(Pf,this,(null===i||void 0===i||null===(t=i.color)||void 0===t?void 0:t.toUpperCase())||(null===(n=Vt(If,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),Gf._||(Gf._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=Gt(Ef,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",Vt(Nf,this)&&(e.ariaControls="".concat(Vt(Nf,this).id,"_colorpicker_dropdown"));const t=Vt(If,this)._signal;e.addEventListener("click",Ht(jf,this,Hf).bind(this),{signal:t}),e.addEventListener("keydown",Ht(jf,this,Bf).bind(this),{signal:t});const n=Gt(Cf,this,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=Vt(Pf,this),e.append(n),e}renderMainDropdown(){const e=Gt(Mf,this,Ht(jf,this,Wf).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===Vt(Ef,this))return void Ht(jf,this,Hf).call(this,e);const t=e.target.getAttribute("data-color");t&&Ht(jf,this,zf).call(this,t,e)}_moveToNext(e){var t,n;Ut(jf,this,Vf)?e.target!==Vt(Ef,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=Vt(Mf,this).firstChild)||void 0===n||n.focus():Ht(jf,this,Hf).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=Vt(Mf,this))||void 0===t?void 0:t.firstChild)&&e.target!==Vt(Ef,this)?(Ut(jf,this,Vf)||Ht(jf,this,Hf).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):Ut(jf,this,Vf)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;Ut(jf,this,Vf)?null===(t=Vt(Mf,this).firstChild)||void 0===t||t.focus():Ht(jf,this,Hf).call(this,e)}_moveToEnd(e){var t;Ut(jf,this,Vf)?null===(t=Vt(Mf,this).lastChild)||void 0===t||t.focus():Ht(jf,this,Hf).call(this,e)}hideDropdown(){var e,t;null===(e=Vt(Mf,this))||void 0===e||e.classList.add("hidden"),Vt(Ef,this).ariaExpanded="false",null===(t=Vt(Df,this))||void 0===t||t.abort(),Gt(Df,this,null)}_hideDropdownFromKeyboard(){var e;Vt(Rf,this)||(Ut(jf,this,Vf)?(this.hideDropdown(),Vt(Ef,this).focus({preventScroll:!0,focusVisible:Vt(Tf,this)})):null===(e=Vt(Nf,this))||void 0===e||e.unselect())}updateColor(e){if(Vt(Cf,this)&&(Vt(Cf,this).style.backgroundColor=e),!Vt(Mf,this))return;const t=Vt(If,this).highlightColors.values();for(const n of Vt(Mf,this).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;null===(e=Vt(Ef,this))||void 0===e||e.remove(),Gt(Ef,this,null),Gt(Cf,this,null),null===(t=Vt(Mf,this))||void 0===t||t.remove(),Gt(Mf,this,null)}}function Wf(){const e=document.createElement("div"),t=Vt(If,this)._signal;e.addEventListener("contextmenu",Pi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Vt(Nf,this)&&(e.id="".concat(Vt(Nf,this).id,"_colorpicker_dropdown"));for(const[n,i]of Vt(If,this).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",Gf._[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.ariaSelected=i===Vt(Pf,this),s.addEventListener("click",Ht(jf,this,zf).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",Ht(jf,this,Bf).bind(this),{signal:t}),e}function zf(e,t){t.stopPropagation(),Vt(Lf,this).dispatch("switchannotationeditorparams",{source:this,type:Vt(Ff,this),value:e})}function Bf(e){sn._keyboardManager.exec(this,e)}function Hf(e){if(Ut(jf,this,Vf))return void this.hideDropdown();if(Gt(Tf,this,0===e.detail),Vt(Df,this)||(Gt(Df,this,new AbortController),window.addEventListener("pointerdown",Ht(jf,this,Uf).bind(this),{signal:Vt(If,this).combinedSignal(Vt(Df,this))})),Vt(Ef,this).ariaExpanded="true",Vt(Mf,this))return void Vt(Mf,this).classList.remove("hidden");const t=Gt(Mf,this,Ht(jf,this,Wf).call(this));Vt(Ef,this).append(t)}function Uf(e){var t;null!==(t=Vt(Mf,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function Vf(e){return Vt(Mf,e)&&!Vt(Mf,e).classList.contains("hidden")}sn=Of;var Gf={_:null},qf=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,$f=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,eg=new WeakMap,tg=new WeakMap,ng=new WeakMap,ig=new WeakMap,sg=new WeakMap,ag=new WeakMap,rg=new WeakMap,og=new WeakMap,lg=new WeakMap,cg=new WeakMap,hg=new WeakSet;class ug extends Ur{static get _keyboardManager(){const e=ug.prototype;return Jn(this,"_keyboardManager",new xs([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(c(c({},e),{},{name:"highlightEditor"})),zt(this,hg),Bt(this,qf,null),Bt(this,Xf,0),Bt(this,Yf,void 0),Bt(this,Kf,null),Bt(this,Qf,null),Bt(this,$f,null),Bt(this,Jf,null),Bt(this,Zf,0),Bt(this,eg,null),Bt(this,tg,null),Bt(this,ng,null),Bt(this,ig,!1),Bt(this,sg,null),Bt(this,ag,void 0),Bt(this,rg,null),Bt(this,og,""),Bt(this,lg,void 0),Bt(this,cg,""),this.color=e.color||ug._defaultColor,Gt(lg,this,e.thickness||ug._defaultThickness),Gt(ag,this,e.opacity||ug._defaultOpacity),Gt(Yf,this,e.boxes||null),Gt(cg,this,e.methodOfCreation||""),Gt(og,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(Gt(ig,this,!0),Ht(hg,this,pg).call(this,e),Ht(hg,this,bg).call(this)):Vt(Yf,this)&&(Gt(qf,this,e.anchorNode),Gt(Xf,this,e.anchorOffset),Gt(Jf,this,e.focusNode),Gt(Zf,this,e.focusOffset),Ht(hg,this,dg).call(this),Ht(hg,this,bg).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:Vt(ig,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:Vt(lg,this),methodOfCreation:Vt(cg,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;Ur.initialize(e,t),ug._defaultColor||(ug._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case kn.HIGHLIGHT_DEFAULT_COLOR:ug._defaultColor=t;break;case kn.HIGHLIGHT_THICKNESS:ug._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return Vt(sg,this)}updateParams(e,t){switch(e){case kn.HIGHLIGHT_COLOR:Ht(hg,this,fg).call(this,t);break;case kn.HIGHLIGHT_THICKNESS:Ht(hg,this,gg).call(this,t)}}static get defaultPropertiesToUpdate(){return[[kn.HIGHLIGHT_DEFAULT_COLOR,ug._defaultColor],[kn.HIGHLIGHT_THICKNESS,ug._defaultThickness]]}get propertiesToUpdate(){return[[kn.HIGHLIGHT_COLOR,this.color||ug._defaultColor],[kn.HIGHLIGHT_THICKNESS,Vt(lg,this)||ug._defaultThickness],[kn.HIGHLIGHT_FREE,Vt(ig,this)]]}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",Gt(Qf,this,new Of({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Ht(hg,this,Sg).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,Ht(hg,this,Sg).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){Ht(hg,this,vg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Ht(hg,this,bg).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)Ht(hg,this,vg).call(this);else if(e){var n;Ht(hg,this,bg).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;Vt(ig,this)?(e=(e-this.rotation+360)%360,n=yg.call(ug,Vt(tg,this).box,e)):n=yg.call(ug,[this.x,this.y,this.width,this.height],e),t.updateProperties(Vt(ng,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(Vt(rg,this),{bbox:yg.call(ug,Vt($f,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();Vt(og,this)&&(e.setAttribute("aria-label",Vt(og,this)),e.setAttribute("role","mark")),Vt(ig,this)?e.classList.add("free"):this.div.addEventListener("keydown",Ht(hg,this,wg).bind(this),{signal:this._uiManager._signal});const t=Gt(eg,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=Vt(Kf,this);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),rs(this,Vt(eg,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Vt(rg,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Vt(rg,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:Ht(hg,this,xg).call(this,!0);break;case 1:case 3:Ht(hg,this,xg).call(this,!1)}}select(){var e;super.select(),Vt(rg,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Vt(rg,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),Vt(rg,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Vt(rg,this),{rootClass:{selected:!1}}),Vt(ig,this)||Ht(hg,this,xg).call(this,!1))}get _mustFixPosition(){return!Vt(ig,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(Vt(ng,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(Vt(rg,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:i,x:s,y:a}=n;const{x:r,y:o,width:l,height:c}=i.getBoundingClientRect(),h=new AbortController,u=e.combinedSignal(h),d=t=>{h.abort(),Ht(ug,this,Eg).call(this,e,t)};window.addEventListener("blur",d,{signal:u}),window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("pointerdown",Mi,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",Pi,{signal:u}),i.addEventListener("pointermove",Ht(ug,this,_g).bind(this,e),{signal:u}),this._freeHighlight=new Af({x:s,y:a},[r,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let i=null;if(e instanceof Yd){const{data:{quadPoints:t,rect:n,rotation:s,id:a,color:r,opacity:o,popupRef:l},parent:{page:{pageNumber:c}}}=e;i=e={annotationType:Sn.HIGHLIGHT,color:Array.from(r),opacity:o,quadPoints:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:l}}else if(e instanceof qd){const{data:{inkLists:t,rect:n,rotation:s,id:a,color:r,borderStyle:{rawWidth:o},popupRef:l},parent:{page:{pageNumber:c}}}=e;i=e={annotationType:Sn.HIGHLIGHT,color:Array.from(r),thickness:o,inkLists:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:l}}const{color:s,quadPoints:a,inkLists:r,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=hi.makeHexColor(...s),Gt(ag,l,o||1),r&&Gt(lg,l,e.thickness),l._initialData=i;const[c,h]=l.pageDimensions,[u,d]=l.pageTranslation;if(a){const e=Gt(Yf,l,[]);for(let t=0;t<a.length;t+=8)e.push({x:(a[t]-u)/c,y:1-(a[t+1]-d)/h,width:(a[t+2]-a[t])/c,height:(a[t+1]-a[t+5])/h});Ht(hg,l,dg).call(l),Ht(hg,l,bg).call(l),l.rotate(l.rotation)}else if(r){Gt(ig,l,!0);const e=r[0],n={x:e[0]-u,y:h-(e[1]-d)},i=new Af(n,[0,0,c,h],1,Vt(lg,l)/2,!0,.001);for(let t=0,r=e.length;t<r;t+=2)n.x=e[t]-u,n.y=h-(e[t+1]-d),i.add(n);const{id:s,clipPathId:a}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);Ht(hg,l,pg).call(l,{highlightOutlines:i.getOutlines(),highlightId:s,clipPathId:a}),Ht(hg,l,bg).call(l),l.rotate(l.parentRotation)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),n=Ur._colorManager.convert(this.color),i={annotationType:Sn.HIGHLIGHT,color:n,opacity:Vt(ag,this),thickness:Vt(lg,this),quadPoints:Ht(hg,this,kg).call(this),outlines:Ht(hg,this,Ag).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:Ht(hg,this,Sg).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!Ht(hg,this,Cg).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function dg(){const e=new gf(Vt(Yf,this),.001);Gt(tg,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=Vt(tg,this).box;const t=new gf(Vt(Yf,this),.0025,.001,"ltr"===this._uiManager.direction);Gt($f,this,t.getOutlines());const{lastPoint:n}=Vt($f,this);Gt(sg,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function pg(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;Gt(tg,this,t);if(Gt($f,this,t.getNewOutline(Vt(lg,this)/2+1.5,.0025)),n>=0)Gt(ng,this,n),Gt(Kf,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),Gt(rg,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Vt($f,this).box,path:{d:Vt($f,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Vt(ng,this),{bbox:yg.call(an,Vt(tg,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(Vt(rg,this),{bbox:yg.call(an,Vt($f,this).box,e),path:{d:Vt($f,this).toSVGPath()}})}const[s,a,r,o]=t.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=r,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=a,this.y=1-s,this.width=r*t/e,this.height=o*e/t;break}case 180:this.x=1-s,this.y=1-a,this.width=r,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-a,this.y=s,this.width=r*t/e,this.height=o*e/t;break}}const{lastPoint:l}=Vt($f,this);Gt(sg,this,[(l[0]-s)/r,(l[1]-a)/o])}function fg(e){const t=(e,t)=>{var n,i;this.color=e,Gt(ag,this,t),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(Vt(ng,this),{root:{fill:e,"fill-opacity":t}}),null===(i=Vt(Qf,this))||void 0===i||i.updateColor(e)},n=this.color,i=Vt(ag,this);this.addCommands({cmd:t.bind(this,e,an._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function gg(e){const t=Vt(lg,this),n=e=>{Gt(lg,this,e),Ht(hg,this,mg).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function mg(e){if(!Vt(ig,this))return;Ht(hg,this,pg).call(this,{highlightOutlines:Vt(tg,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function vg(){null!==Vt(ng,this)&&this.parent&&(this.parent.drawLayer.remove(Vt(ng,this)),Gt(ng,this,null),this.parent.drawLayer.remove(Vt(rg,this)),Gt(rg,this,null))}function bg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===Vt(ng,this)&&(({id:Ot(Gt,[ng,this])._,clipPathId:Ot(Gt,[Kf,this])._}=e.drawLayer.draw({bbox:Vt(tg,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":Vt(ag,this)},rootClass:{highlight:!0,free:Vt(ig,this)},path:{d:Vt(tg,this).toSVGPath()}},!1,!0)),Gt(rg,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Vt(ig,this)},bbox:Vt($f,this).box,path:{d:Vt($f,this).toSVGPath()}},Vt(ig,this))),Vt(eg,this)&&(Vt(eg,this).style.clipPath=Vt(Kf,this)))}function yg(e,t){let[n,i,s,a]=e;switch(t){case 90:return[1-i-a,n,a,s];case 180:return[1-n-s,1-i-a,s,a];case 270:return[i,1-n-s,a,s]}return[n,i,s,a]}function wg(e){an._keyboardManager.exec(this,e)}function xg(e){if(!Vt(qf,this))return;const t=window.getSelection();e?t.setPosition(Vt(qf,this),Vt(Xf,this)):t.setPosition(Vt(Jf,this),Vt(Zf,this))}function Sg(){return Vt(ig,this)?this.rotation:0}function kg(){if(Vt(ig,this))return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,s=Vt(Yf,this),a=new Float32Array(8*s.length);let r=0;for(const{x:o,y:l,width:c,height:h}of s){const s=o*e+n,u=(1-l)*t+i;a[r]=a[r+4]=s,a[r+1]=a[r+3]=u,a[r+2]=a[r+6]=s+c*e,a[r+5]=a[r+7]=u-h*t,r+=8}return a}function Ag(e){return Vt(tg,this).serialize(e,Ht(hg,this,Sg).call(this))}function _g(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function Eg(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function Cg(e){const{color:t}=this._initialData;return e.color.some((e,n)=>e!==t[n])}an=ug,o(ug,"_defaultColor",null),o(ug,"_defaultOpacity",1),o(ug,"_defaultThickness",12),o(ug,"_type","highlight"),o(ug,"_editorType",Sn.HIGHLIGHT),o(ug,"_freeHighlightId",-1),o(ug,"_freeHighlight",null),o(ug,"_freeHighlightClipId","");var Pg=new WeakMap;class Mg{constructor(){Bt(this,Pg,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){Vt(Pg,this)[e]=t}toSVGProperties(){const e=Vt(Pg,this);return Gt(Pg,this,Object.create(null)),{root:e}}reset(){Gt(Pg,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){Yn("Not implemented")}}var Tg=new WeakMap,Rg=new WeakMap,Ng=new WeakSet;class Lg extends Ur{constructor(e){super(e),zt(this,Ng),Bt(this,Tg,null),Bt(this,Rg,void 0),o(this,"_drawId",null),Gt(Rg,this,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(Ht(Ng,this,Dg).call(this,e),Ht(Ng,this,jg).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,s]of Object.entries(t))n.has(i)?Object.assign(e[i],s):e[i]=s;return e}static getDefaultDrawingOptions(e){Yn("Not implemented")}static get typesMap(){Yn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(Hg._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,s=i[t],a=e=>{var n;i.updateProperty(t,e);const s=Vt(Tg,this).updateProperty(t,e);s&&Ht(Ng,this,zg).call(this,s),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:a.bind(this,n),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,Lg._mergeSVGProperties(Vt(Tg,this).getPathResizingSVGProperties(Ht(Ng,this,Wg).call(this)),{bbox:Ht(Ng,this,Bg).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,Lg._mergeSVGProperties(Vt(Tg,this).getPathResizedSVGProperties(Ht(Ng,this,Wg).call(this)),{bbox:Ht(Ng,this,Bg).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:Ht(Ng,this,Bg).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,Lg._mergeSVGProperties(Vt(Tg,this).getPathTranslatedSVGProperties(Ht(Ng,this,Wg).call(this),this.parentDimensions),{bbox:Ht(Ng,this,Bg).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Vt(Rg,this)&&(Gt(Rg,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){Ht(Ng,this,Fg).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Ht(Ng,this,jg).call(this),Ht(Ng,this,zg).call(this,Vt(Tg,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),Ht(Ng,this,Fg).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),Ht(Ng,this,jg).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Lg._mergeSVGProperties({bbox:Ht(Ng,this,Bg).call(this)},Vt(Tg,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&Ht(Ng,this,zg).call(this,Vt(Tg,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,s){Yn("Not implemented")}static startDrawing(e,t,n,i){var s,a;const{target:r,offsetX:o,offsetY:l,pointerId:c,pointerType:h}=i;if(qg._&&qg._!==h)return;const{viewport:{rotation:u}}=e,{width:d,height:p}=r.getBoundingClientRect(),f=Ug._=new AbortController,g=e.combinedSignal(f);Gg._||(Gg._=c),null!==(s=qg._)&&void 0!==s||(qg._=h),window.addEventListener("pointerup",e=>{var t;Gg._===e.pointerId?this._endDraw(e):null===(t=Xg._)||void 0===t||t.delete(e.pointerId)},{signal:g}),window.addEventListener("pointercancel",e=>{var t;Gg._===e.pointerId?this._currentParent.endDrawingSession():null===(t=Xg._)||void 0===t||t.delete(e.pointerId)},{signal:g}),window.addEventListener("pointerdown",e=>{qg._===e.pointerType&&((Xg._||(Xg._=new Set)).add(e.pointerId),Hg._.isCancellable()&&(Hg._.removeLastElement(),Hg._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Pi,{signal:g}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),r.addEventListener("touchmove",e=>{e.timeStamp===Yg._&&Mi(e)},{signal:g}),e.toggleDrawing(),null===(a=t._editorUndoBar)||void 0===a||a.hide(),Hg._?e.drawLayer.updateProperties(this._currentDrawId,Hg._.startNew(o,l,d,p,u)):(t.updateUIForDefaultProperties(this),Hg._=this.createDrawerInstance(o,l,d,p,u),Vg._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Vg._.toSVGProperties(),Hg._.defaultSVGProperties),!0,!1)))}static _drawMove(e){var t;if(Yg._=-1,!Hg._)return;const{offsetX:n,offsetY:i,pointerId:s}=e;Gg._===s&&((null===(t=Xg._)||void 0===t?void 0:t.size)>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,Hg._.add(n,i)),Yg._=e.timeStamp,Mi(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Hg._=null,Vg._=null,qg._=null,Yg._=NaN),Ug._&&(Ug._.abort(),Ug._=null,Gg._=NaN,Xg._=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Hg._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=Hg._,n=this._currentDrawId,i=e.getLastElement();return void t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(i))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:kn.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(kn.DRAW_STEP),!Hg._.isEmpty()){const{pageDimensions:[n,i],scale:s}=t,a=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Hg._.getOutlines(n*s,i*s,s,this._INNER_MARGIN),drawingOptions:Vg._,mustBeCommitted:!e});return this._cleanup(!0),a}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,s,a){Yn("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:r}}=t.viewport,o=this.deserializeDraw(a,r,i,s,this._INNER_MARGIN,e),l=await super.deserialize(e,t,n);return l.createDrawingOptions(e),Ht(Ng,l,Dg).call(l,{drawOutlines:o}),Ht(Ng,l,jg).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(e){const[t,n]=this.pageTranslation,[i,s]=this.pageDimensions;return Vt(Tg,this).serialize([t,n,i,s],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function Dg(e){let{drawOutlines:t,drawId:n,drawingOptions:i}=e;Gt(Tg,this,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-".concat(this.editorType,"-added-alert")),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=Ht(Ng,this,Ig).call(this,t,this.parent),Ht(Ng,this,zg).call(this,t.box)}function Ig(e,t){const{id:n}=t.drawLayer.draw(rn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function Fg(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function jg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=Ht(Ng,this,Ig).call(this,Vt(Tg,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function Og(e){let[t,n,i,s]=e;const{parentDimensions:[a,r],rotation:o}=this;switch(o){case 90:return[n,1-t,i*(r/a),s*(a/r)];case 180:return[1-t,1-n,i,s];case 270:return[1-n,t,i*(r/a),s*(a/r)];default:return[t,n,i,s]}}function Wg(){const{x:e,y:t,width:n,height:i,parentDimensions:[s,a],rotation:r}=this;switch(r){case 90:return[1-t,e,n*(s/a),i*(a/s)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(s/a),i*(a/s)];default:return[e,t,n,i]}}function zg(e){if([this.x,this.y,this.width,this.height]=Ht(Ng,this,Og).call(this,e),this.div){this.fixAndSetPosition();const[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function Bg(){const{x:e,y:t,width:n,height:i,rotation:s,parentRotation:a,parentDimensions:[r,o]}=this;switch((4*s+a)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(r/o),i*(o/r),n*(r/o)];case 5:return[1-t,e,n*(r/o),i*(o/r)];case 6:return[1-e-i*(o/r),1-t,i*(o/r),n*(r/o)];case 7:return[t-n*(r/o),1-e-i*(o/r),n*(r/o),i*(o/r)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(o/r),t,i*(o/r),n*(r/o)];case 13:return[1-t-n*(r/o),e-i*(o/r),n*(r/o),i*(o/r)];case 14:return[1-e,1-t-n*(r/o),i*(o/r),n*(r/o)];case 15:return[t,1-e,n*(r/o),i*(o/r)];default:return[e,t,n,i]}}rn=Lg,o(Lg,"_currentDrawId",-1),o(Lg,"_currentParent",null);var Hg={_:null},Ug={_:null},Vg={_:null},Gg={_:NaN},qg={_:null},Xg={_:null},Yg={_:NaN};o(Lg,"_INNER_MARGIN",3);var Kg=new WeakMap,Qg=new WeakMap,$g=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,im=new WeakMap,sm=new WeakMap,am=new WeakMap,rm=new WeakSet;class om{constructor(e,t,n,i,s,a){zt(this,rm),Bt(this,Kg,new Float64Array(6)),Bt(this,Qg,void 0),Bt(this,$g,void 0),Bt(this,Jg,void 0),Bt(this,Zg,void 0),Bt(this,em,void 0),Bt(this,tm,""),Bt(this,nm,0),Bt(this,im,new ym),Bt(this,sm,void 0),Bt(this,am,void 0),Gt(sm,this,n),Gt(am,this,i),Gt(Jg,this,s),Gt(Zg,this,a),[e,t]=Ht(rm,this,lm).call(this,e,t);const r=Gt(Qg,this,[NaN,NaN,NaN,NaN,e,t]);Gt(em,this,[e,t]),Gt($g,this,[{line:r,points:Vt(em,this)}]),Vt(Kg,this).set(r,0)}updateProperty(e,t){"stroke-width"===e&&Gt(Zg,this,t)}isEmpty(){return!Vt($g,this)||0===Vt($g,this).length}isCancellable(){return Vt(em,this).length<=10}add(e,t){[e,t]=Ht(rm,this,lm).call(this,e,t);const[n,i,s,a]=Vt(Kg,this).subarray(2,6),r=e-s,o=t-a;return Math.hypot(Vt(sm,this)*r,Vt(am,this)*o)<=2?null:(Vt(em,this).push(e,t),isNaN(n)?(Vt(Kg,this).set([s,a,e,t],2),Vt(Qg,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(Vt(Kg,this)[0])&&Vt(Qg,this).splice(6,6),Vt(Kg,this).set([n,i,s,a,e,t],0),Vt(Qg,this).push(...Pp.createBezierPoints(n,i,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===Vt(em,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,s){Gt(sm,this,n),Gt(am,this,i),Gt(Jg,this,s),[e,t]=Ht(rm,this,lm).call(this,e,t);const a=Gt(Qg,this,[NaN,NaN,NaN,NaN,e,t]);Gt(em,this,[e,t]);const r=Vt($g,this).at(-1);return r&&(r.line=new Float32Array(r.line),r.points=new Float32Array(r.points)),Vt($g,this).push({line:a,points:Vt(em,this)}),Vt(Kg,this).set(a,0),Gt(nm,this,0),this.toSVGPath(),null}getLastElement(){return Vt($g,this).at(-1)}setLastElement(e){return Vt($g,this)?(Vt($g,this).push(e),Gt(Qg,this,e.line),Gt(em,this,e.points),Gt(nm,this,0),{path:{d:this.toSVGPath()}}):Vt(im,this).setLastElement(e)}removeLastElement(){if(!Vt($g,this))return Vt(im,this).removeLastElement();Vt($g,this).pop(),Gt(tm,this,"");for(let e=0,t=Vt($g,this).length;e<t;e++){const{line:t,points:n}=Vt($g,this)[e];Gt(Qg,this,t),Gt(em,this,n),Gt(nm,this,0),this.toSVGPath()}return{path:{d:Vt(tm,this)}}}toSVGPath(){const e=Pp.svgRound(Vt(Qg,this)[4]),t=Pp.svgRound(Vt(Qg,this)[5]);if(2===Vt(em,this).length)return Gt(tm,this,"".concat(Vt(tm,this)," M ").concat(e," ").concat(t," Z")),Vt(tm,this);if(Vt(em,this).length<=6){const n=Vt(tm,this).lastIndexOf("M");Gt(tm,this,"".concat(Vt(tm,this).slice(0,n)," M ").concat(e," ").concat(t)),Gt(nm,this,6)}if(4===Vt(em,this).length){const e=Pp.svgRound(Vt(Qg,this)[10]),t=Pp.svgRound(Vt(Qg,this)[11]);return Gt(tm,this,"".concat(Vt(tm,this)," L ").concat(e," ").concat(t)),Gt(nm,this,12),Vt(tm,this)}const n=[];0===Vt(nm,this)&&(n.push("M ".concat(e," ").concat(t)),Gt(nm,this,6));for(let i=Vt(nm,this),s=Vt(Qg,this).length;i<s;i+=6){const[e,t,s,a,r,o]=Vt(Qg,this).slice(i,i+6).map(Pp.svgRound);n.push("C".concat(e," ").concat(t," ").concat(s," ").concat(a," ").concat(r," ").concat(o))}return Gt(tm,this,Vt(tm,this)+n.join(" ")),Gt(nm,this,Vt(Qg,this).length),Vt(tm,this)}getOutlines(e,t,n,i){const s=Vt($g,this).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),Vt(im,this).build(Vt($g,this),e,t,n,Vt(Jg,this),Vt(Zg,this),i),Gt(Kg,this,null),Gt(Qg,this,null),Gt($g,this,null),Gt(tm,this,null),Vt(im,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function lm(e,t){return Pp._normalizePoint(e,t,Vt(sm,this),Vt(am,this),Vt(Jg,this))}var cm=new WeakMap,hm=new WeakMap,um=new WeakMap,dm=new WeakMap,pm=new WeakMap,fm=new WeakMap,gm=new WeakMap,mm=new WeakMap,vm=new WeakMap,bm=new WeakSet;class ym extends Pp{constructor(){super(...arguments),zt(this,bm),Bt(this,cm,void 0),Bt(this,hm,0),Bt(this,um,void 0),Bt(this,dm,void 0),Bt(this,pm,void 0),Bt(this,fm,void 0),Bt(this,gm,void 0),Bt(this,mm,void 0),Bt(this,vm,void 0)}build(e,t,n,i,s,a,r){Gt(pm,this,t),Gt(fm,this,n),Gt(gm,this,i),Gt(mm,this,s),Gt(vm,this,a),Gt(um,this,null!==r&&void 0!==r?r:0),Gt(dm,this,e),Ht(bm,this,Sm).call(this)}get thickness(){return Vt(vm,this)}setLastElement(e){return Vt(dm,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return Vt(dm,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of Vt(dm,this))if(e.push("M".concat(Pp.svgRound(t[4])," ").concat(Pp.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(Pp.svgRound(t[10])," ").concat(Pp.svgRound(t[11])));else for(let n=6,i=t.length;n<i;n+=6){const[i,s,a,r,o,l]=t.subarray(n,n+6).map(Pp.svgRound);e.push("C".concat(i," ").concat(s," ").concat(a," ").concat(r," ").concat(o," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,i,s,a]=e;const r=[],o=[],[l,c,h,u]=Ht(bm,this,xm).call(this);let d,p,f,g,m,v,b,y,w;switch(Vt(mm,this)){case 0:w=Pp._rescale,d=n,p=i+a,f=s,g=-a,m=n+l*s,v=i+(1-c-u)*a,b=n+(l+h)*s,y=i+(1-c)*a;break;case 90:w=Pp._rescaleAndSwap,d=n,p=i,f=s,g=a,m=n+c*s,v=i+l*a,b=n+(c+u)*s,y=i+(l+h)*a;break;case 180:w=Pp._rescale,d=n+s,p=i,f=-s,g=a,m=n+(1-l-h)*s,v=i+c*a,b=n+(1-l)*s,y=i+(c+u)*a;break;case 270:w=Pp._rescaleAndSwap,d=n+s,p=i+a,f=-s,g=-a,m=n+(1-c-u)*s,v=i+(1-l-h)*a,b=n+(1-c)*s,y=i+(1-l)*a}for(const{line:x,points:S}of Vt(dm,this))r.push(w(x,d,p,f,g,t?new Array(x.length):null)),o.push(w(S,d,p,f,g,t?new Array(S.length):null));return{lines:r,points:o,rect:[m,v,b,y]}}static deserialize(e,t,n,i,s,a){let{paths:{lines:r,points:o},rotation:l,thickness:c}=a;const h=[];let u,d,p,f,g;switch(l){case 0:g=Pp._rescale,u=-e/n,d=t/i+1,p=1/n,f=-1/i;break;case 90:g=Pp._rescaleAndSwap,u=-t/i,d=-e/n,p=1/i,f=1/n;break;case 180:g=Pp._rescale,u=e/n+1,d=-t/i,p=-1/n,f=1/i;break;case 270:g=Pp._rescaleAndSwap,u=t/i+1,d=e/n+1,p=-1/i,f=-1/n}if(!r){r=[];for(const e of o){const t=e.length;if(2===t){r.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){r.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));r.push(n);let[i,s,a,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,s],0);for(let r=4;r<t;r+=2){const t=e[r],l=e[r+1];n.set(Pp.createBezierPoints(i,s,a,o,t,l),3*(r-2)),[i,s,a,o]=[a,o,t,l]}}}for(let v=0,b=r.length;v<b;v++)h.push({line:g(r[v].map(e=>null!==e&&void 0!==e?e:NaN),u,d,p,f),points:g(o[v].map(e=>null!==e&&void 0!==e?e:NaN),u,d,p,f)});const m=new this.prototype.constructor;return m.build(h,n,i,1,l,c,s),m}get box(){return Vt(cm,this)}updateProperty(e,t){return"stroke-width"===e?Ht(bm,this,km).call(this,t):null}updateParentDimensions(e,t){let[n,i]=e;const[s,a]=Ht(bm,this,wm).call(this);Gt(pm,this,n),Gt(fm,this,i),Gt(gm,this,t);const[r,o]=Ht(bm,this,wm).call(this),l=r-s,c=o-a,h=Vt(cm,this);return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h}updateRotation(e){return Gt(hm,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return Vt(cm,this).map(Pp.svgRound).join(" ")}get defaultProperties(){const[e,t]=Vt(cm,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Pp.svgRound(e)," ").concat(Pp.svgRound(t))}}}get rotationTransform(){const[,,e,t]=Vt(cm,this);let n=0,i=0,s=0,a=0,r=0,o=0;switch(Vt(hm,this)){case 90:i=t/e,s=-e/t,r=e;break;case 180:n=-1,a=-1,r=e,o=t;break;case 270:i=-t/e,s=e/t,o=t;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(s," ").concat(a," ").concat(Pp.svgRound(r)," ").concat(Pp.svgRound(o),")")}getPathResizingSVGProperties(e){let[t,n,i,s]=e;const[a,r]=Ht(bm,this,wm).call(this),[o,l,c,h]=Vt(cm,this);if(Math.abs(c-a)<=Pp.PRECISION||Math.abs(h-r)<=Pp.PRECISION){const e=t+i/2-(o+c/2),a=n+s/2-(l+h/2);return{path:{"transform-origin":"".concat(Pp.svgRound(t)," ").concat(Pp.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(a,")")}}}const u=(i-2*a)/(c-2*a),d=(s-2*r)/(h-2*r),p=c/i,f=h/s;return{path:{"transform-origin":"".concat(Pp.svgRound(o)," ").concat(Pp.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(p," ").concat(f,") ")+"translate(".concat(Pp.svgRound(a)," ").concat(Pp.svgRound(r),") scale(").concat(u," ").concat(d,") ")+"translate(".concat(Pp.svgRound(-a)," ").concat(Pp.svgRound(-r),")")}}}getPathResizedSVGProperties(e){let[t,n,i,s]=e;const[a,r]=Ht(bm,this,wm).call(this),o=Vt(cm,this),[l,c,h,u]=o;if(o[0]=t,o[1]=n,o[2]=i,o[3]=s,Math.abs(h-a)<=Pp.PRECISION||Math.abs(u-r)<=Pp.PRECISION){const e=t+i/2-(l+h/2),a=n+s/2-(c+u/2);for(const{line:t,points:n}of Vt(dm,this))Pp._translate(t,e,a,t),Pp._translate(n,e,a,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Pp.svgRound(t)," ").concat(Pp.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*a)/(h-2*a),p=(s-2*r)/(u-2*r),f=-d*(l+a)+t+a,g=-p*(c+r)+n+r;if(1!==d||1!==p||0!==f||0!==g)for(const{line:m,points:v}of Vt(dm,this))Pp._rescale(m,f,g,d,p,m),Pp._rescale(v,f,g,d,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Pp.svgRound(t)," ").concat(Pp.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,i]=e;const[s,a]=t,r=Vt(cm,this),o=n-r[0],l=i-r[1];if(Vt(pm,this)===s&&Vt(fm,this)===a)for(const{line:c,points:h}of Vt(dm,this))Pp._translate(c,o,l,c),Pp._translate(h,o,l,h);else{const e=Vt(pm,this)/s,t=Vt(fm,this)/a;Gt(pm,this,s),Gt(fm,this,a);for(const{line:n,points:i}of Vt(dm,this))Pp._rescale(n,o,l,e,t,n),Pp._rescale(i,o,l,e,t,i);r[2]*=e,r[3]*=t}return r[0]=n,r[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Pp.svgRound(n)," ").concat(Pp.svgRound(i))}}}get defaultSVGProperties(){const e=Vt(cm,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(Pp.svgRound(e[0])," ").concat(Pp.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function wm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt(vm,this);const t=Vt(um,this)+e/2*Vt(gm,this);return Vt(mm,this)%180===0?[t/Vt(pm,this),t/Vt(fm,this)]:[t/Vt(fm,this),t/Vt(pm,this)]}function xm(){const[e,t,n,i]=Vt(cm,this),[s,a]=Ht(bm,this,wm).call(this,0);return[e+s,t+a,n-2*s,i-2*a]}function Sm(){const e=Gt(cm,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of Vt(dm,this)){if(i.length<=12){for(let t=4,n=i.length;t<n;t+=6)hi.pointBoundingBox(i[t],i[t+1],e);continue}let t=i[4],n=i[5];for(let s=6,a=i.length;s<a;s+=6){const[a,r,o,l,c,h]=i.subarray(s,s+6);hi.bezierBoundingBox(t,n,a,r,o,l,c,h,e),t=c,n=h}}const[t,n]=Ht(bm,this,wm).call(this);e[0]=vi(e[0]-t,0,1),e[1]=vi(e[1]-n,0,1),e[2]=vi(e[2]+t,0,1),e[3]=vi(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function km(e){const[t,n]=Ht(bm,this,wm).call(this);Gt(vm,this,e);const[i,s]=Ht(bm,this,wm).call(this),[a,r]=[i-t,s-n],o=Vt(cm,this);return o[0]-=a,o[1]-=r,o[2]+=2*a,o[3]+=2*r,o}class Am extends Mg{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Ur._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Am(this._viewParameters);return e.updateAll(this),e}}var _m=new WeakSet;class Em extends Lg{constructor(e){super(c(c({},e),{},{name:"inkEditor"})),zt(this,_m),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Ur.initialize(e,t),this._defaultDrawingOptions=new Am(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Jn(this,"typesMap",new Map([[kn.INK_THICKNESS,"stroke-width"],[kn.INK_COLOR,"stroke"],[kn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,s){return new om(e,t,n,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,s,a){return ym.deserialize(e,t,n,i,s,a)}static async deserialize(e,t,n){let i=null;if(e instanceof qd){const{data:{inkLists:t,rect:n,rotation:s,id:a,color:r,opacity:o,borderStyle:{rawWidth:l},popupRef:c},parent:{page:{pageNumber:h}}}=e;i=e={annotationType:Sn.INK,color:Array.from(r),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:h-1,rect:n.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:c}}const s=await super.deserialize(e,t,n);return s._initialData=i,s}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:i}=e;this._drawingOptions=Em.getDefaultDrawingOptions({stroke:hi.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":r}}=this,o={annotationType:Sn.INK,color:Ur._colorManager.convert(s),opacity:a,thickness:r,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!Ht(_m,this,Cm).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t}),null}}function Cm(e){const{color:t,thickness:n,opacity:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==i||e.pageIndex!==s}o(Em,"_type","ink"),o(Em,"_editorType",Sn.INK),o(Em,"_defaultDrawingOptions",null);class Pm extends ym{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class Mm{static extractContoursFromText(e,t,n,i,s,a){let{fontFamily:r,fontStyle:o,fontWeight:l}=t,c=new OffscreenCanvas(1,1),h=c.getContext("2d",{alpha:!1});const u=h.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(r),{actualBoundingBoxLeft:d,actualBoundingBoxRight:p,actualBoundingBoxAscent:f,actualBoundingBoxDescent:g,fontBoundingBoxAscent:m,fontBoundingBoxDescent:v,width:b}=h.measureText(e),y=1.5,w=Math.ceil(Math.max(Math.abs(d)+Math.abs(p)||0,b)*y),x=Math.ceil(Math.max(Math.abs(f)+Math.abs(g)||200,Math.abs(m)+Math.abs(v)||200)*y);c=new OffscreenCanvas(w,x),h=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=u,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,w,x),h.fillStyle="black",h.fillText(e,.5*w/2,1.5*x/2);const S=Ht(Mm,this,Om).call(this,h.getImageData(0,0,w,x).data),k=Ht(Mm,this,jm).call(this,S),A=Ht(Mm,this,Wm).call(this,k),_=Ht(Mm,this,Lm).call(this,S,w,x,A);return this.processDrawnLines({lines:{curves:_,width:w,height:x},pageWidth:n,pageHeight:i,rotation:s,innerMargin:a,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,s){const[a,r,o]=Ht(Mm,this,zm).call(this,e),[l,c]=Ht(Mm,this,Fm).call(this,a,r,o,Math.hypot(r,o)*Ht(Mm,this,Bm)._.sigmaSFactor,Ht(Mm,this,Bm)._.sigmaR,Ht(Mm,this,Bm)._.kernelSize),h=Ht(Mm,this,Wm).call(this,c),u=Ht(Mm,this,Lm).call(this,l,r,o,h);return this.processDrawnLines({lines:{curves:u,width:r,height:o},pageWidth:t,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:i,pageHeight:s,rotation:a,innerMargin:r,mustSmooth:o,areContours:l}=e;a%180!==0&&([i,s]=[s,i]);const{curves:c,width:h,height:u}=n,d=null!==(t=n.thickness)&&void 0!==t?t:0,p=[],f=Math.min(i/h,s/u),g=f/i,m=f/s,v=[];for(const{points:y}of c){const e=o?Ht(Mm,this,Im).call(this,y):y;if(!e)continue;v.push(e);const t=e.length,n=new Float32Array(t),i=new Float32Array(3*(2===t?2:t-2));if(p.push({line:i,points:n}),2===t){n[0]=e[0]*g,n[1]=e[1]*m,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[s,a,r,l]=e;s*=g,a*=m,r*=g,l*=m,n.set([s,a,r,l],0),i.set([NaN,NaN,NaN,NaN,s,a],0);for(let o=4;o<t;o+=2){const t=n[o]=e[o]*g,c=n[o+1]=e[o+1]*m;i.set(Pp.createBezierPoints(s,a,r,l,t,c),3*(o-2)),[s,a,r,l]=[r,l,t,c]}}if(0===p.length)return null;const b=l?new Pm:new ym;return b.build(p,i,s,1,a,l?0:d,r),{outline:b,newCurves:v,areContours:l,thickness:d,width:h,height:u}}static async compressSignature(e){let t,{outlines:n,areContours:i,thickness:s,width:a,height:r}=e,o=1/0,l=-1/0,c=0;for(const b of n){c+=b.length;for(let e=2,t=b.length;e<t;e++){const t=b[e]-b[e-2];o=Math.min(o,t),l=Math.max(l,t)}}t=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const h=n.length,u=8+3*h,d=new Uint32Array(u);let p=0;d[p++]=u*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*t.BYTES_PER_ELEMENT,d[p++]=0,d[p++]=a,d[p++]=r,d[p++]=i?0:1,d[p++]=Math.max(0,Math.floor(null!==s&&void 0!==s?s:0)),d[p++]=h,d[p++]=t.BYTES_PER_ELEMENT;for(const b of n)d[p++]=b.length-2,d[p++]=b[0],d[p++]=b[1];const f=new CompressionStream("deflate-raw"),g=f.writable.getWriter();await g.ready,g.write(d);const m=t.prototype.constructor;for(const b of n){const e=new m(b.length-2);for(let t=2,n=b.length;t<n;t++)e[t-2]=b[t]-b[t-2];g.write(e)}g.close();const v=await new Response(f.readable).arrayBuffer();return bi(new Uint8Array(v))}static async decompressSignature(e){try{const l=(r=e,Uint8Array.fromBase64?Uint8Array.fromBase64(r):oi(atob(r))),{readable:c,writable:h}=new DecompressionStream("deflate-raw"),u=h.getWriter();await u.ready,u.write(l).then(async()=>{await u.ready,await u.close()}).catch(()=>{});let d=null,p=0;var t,n=!1,i=!1;try{for(var s,a=function(e){var t,n,i,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new qt(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(c);n=!(s=await a.next()).done;n=!1){const e=s.value;d||(d=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),d.set(e,p),p+=e.length}}catch(o){i=!0,t=o}finally{try{n&&null!=a.return&&await a.return()}finally{if(i)throw t}}const f=new Uint32Array(d.buffer,0,d.length>>2),g=f[1];if(0!==g)throw new Error("Invalid version: ".concat(g));const m=f[2],v=f[3],b=0===f[4],y=f[5],w=f[6],x=f[7],S=[],k=(8+3*w)*Uint32Array.BYTES_PER_ELEMENT;let A;switch(x){case Int8Array.BYTES_PER_ELEMENT:A=new Int8Array(d.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:A=new Int16Array(d.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:A=new Int32Array(d.buffer,k)}p=0;for(let e=0;e<w;e++){const t=f[3*e+8],n=new Float32Array(t+2);S.push(n);for(let i=0;i<2;i++)n[i]=f[3*e+8+i+1];for(let e=0;e<t;e++)n[e+2]=n[e]+A[p++]}return{areContours:b,thickness:y,outlines:S,width:m,height:v}}catch(Bb){return Xn("decompressSignature: ".concat(Bb)),null}var r}}function Tm(e,t,n,i){return i-=t,0===(n-=e)?i>0?0:4:1===n?i+6:2-i}function Rm(e,t,n,i,s,a,r){const o=Ht(on,this,Tm).call(this,n,i,s,a);for(let l=0;l<8;l++){const s=(-l+o-r+16)%8;if(0!==e[(n+Ht(on,this,Hm)._[2*s])*t+(i+Ht(on,this,Hm)._[2*s+1])])return s}return-1}function Nm(e,t,n,i,s,a,r){const o=Ht(on,this,Tm).call(this,n,i,s,a);for(let l=0;l<8;l++){const s=(l+o+r+16)%8;if(0!==e[(n+Ht(on,this,Hm)._[2*s])*t+(i+Ht(on,this,Hm)._[2*s+1])])return s}return-1}function Lm(e,t,n,i){const s=e.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)a[c*t]=a[c*t+t-1]=0;for(let c=0;c<t;c++)a[c]=a[t*n-1-c]=0;let r,o=1;const l=[];for(let c=1;c<n-1;c++){r=1;for(let e=1;e<t-1;e++){const n=c*t+e,i=a[n];if(0===i)continue;let s=c,h=e;if(1===i&&0===a[n-1])o+=1,h-=1;else{if(!(i>=1&&0===a[n+1])){1!==i&&(r=Math.abs(i));continue}o+=1,h+=1,i>1&&(r=i)}const u=[e,c],d=h===e+1,p={isHole:d,points:u,id:o,parent:0};let f;l.push(p);for(const e of l)if(e.id===r){f=e;break}f?f.isHole?p.parent=d?f.parent:r:p.parent=d?r:f.parent:p.parent=d?r:0;const g=Ht(on,this,Rm).call(this,a,t,c,e,s,h,0);if(-1===g){a[n]=-o,1!==a[n]&&(r=Math.abs(a[n]));continue}let m=Ht(on,this,Hm)._[2*g],v=Ht(on,this,Hm)._[2*g+1];const b=c+m,y=e+v;s=b,h=y;let w=c,x=e;for(;;){const i=Ht(on,this,Nm).call(this,a,t,w,x,s,h,1);m=Ht(on,this,Hm)._[2*i],v=Ht(on,this,Hm)._[2*i+1];const l=w+m,d=x+v;u.push(d,l);const p=w*t+x;if(0===a[p+1]?a[p]=-o:1===a[p]&&(a[p]=o),l===c&&d===e&&w===b&&x===y){1!==a[n]&&(r=Math.abs(a[n]));break}s=w,h=x,w=l,x=d}}}return l}function Dm(e,t,n,i){if(n-t<=4){for(let s=t;s<n-2;s+=2)i.push(e[s],e[s+1]);return}const s=e[t],a=e[t+1],r=e[n-4]-s,o=e[n-3]-a,l=Math.hypot(r,o),c=r/l,h=o/l,u=c*a-h*s,d=o/r,p=1/l,f=Math.atan(d),g=Math.cos(f),m=Math.sin(f),v=p*(Math.abs(g)+Math.abs(m)),b=p*(1-v+v**2),y=Math.max(Math.atan(Math.abs(m+g)*b),Math.atan(Math.abs(m-g)*b));let w=0,x=t;for(let S=t+2;S<n-2;S+=2){const t=Math.abs(u-c*e[S+1]+h*e[S]);t>w&&(x=S,w=t)}w>(l*y)**2?(Ht(on,this,Dm).call(this,e,t,x+2,i),Ht(on,this,Dm).call(this,e,x,n,i)):i.push(s,a)}function Im(e){const t=[],n=e.length;return Ht(on,this,Dm).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function Fm(e,t,n,i,s,a){const r=new Float32Array(a**2),o=-2*i**2,l=a>>1;for(let f=0;f<a;f++){const e=(f-l)**2;for(let t=0;t<a;t++)r[f*a+t]=Math.exp((e+(t-l)**2)/o)}const c=new Float32Array(256),h=-2*s**2;for(let f=0;f<256;f++)c[f]=Math.exp(f**2/h);const u=e.length,d=new Uint8Array(u),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let i=0;i<t;i++){const s=f*t+i,o=e[s];let h=0,u=0;for(let d=0;d<a;d++){const s=f+d-l;if(!(s<0||s>=n))for(let n=0;n<a;n++){const p=i+n-l;if(p<0||p>=t)continue;const f=e[s*t+p],g=r[d*a+n]*c[Math.abs(f-o)];h+=f*g,u+=g}}p[d[s]=Math.round(h/u)]++}return[d,p]}function jm(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function Om(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let r=0,o=n.length;r<o;r++){if(0===e[3+(r<<2)]){i=n[r]=255;continue}const t=n[r]=e[r<<2];t>i&&(i=t),t<s&&(s=t)}const a=255/(i-s);for(let r=0;r<t;r++)n[r]=(n[r]-s)*a;return n}function Wm(e){let t,n=-1/0,i=-1/0;const s=e.findIndex(e=>0!==e);let a=s,r=s;for(t=s;t<256;t++){const s=e[t];s>n&&(t-a>i&&(i=t-a,r=t-1),n=s,a=t)}for(t=r-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function zm(e){const t=e,{width:n,height:i}=e,{maxDim:s}=Ht(on,this,Bm)._;let a=n,r=i;if(n>s||i>s){let o=n,l=i,c=Math.log2(Math.max(n,i)/s);const h=Math.floor(c);c=c===h?h-1:h;for(let n=0;n<c;n++){a=Math.ceil(o/2),r=Math.ceil(l/2);const n=new OffscreenCanvas(a,r);n.getContext("2d").drawImage(e,0,0,o,l,0,0,a,r),o=a,l=r,e!==t&&e.close(),e=n.transferToImageBitmap()}const u=Math.min(s/a,s/r);a=Math.round(a*u),r=Math.round(r*u)}const o=new OffscreenCanvas(a,r).getContext("2d",{willReadFrequently:!0});o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,a,r);const l=o.getImageData(0,0,a,r).data;return[Ht(on,this,Om).call(this,l),a,r]}on=Mm;var Bm={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},Hm={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class Um extends Mg{constructor(){super(),super.updateProperties({fill:Ur._defaultLineColor,"stroke-width":0})}clone(){const e=new Um;return e.updateAll(this),e}}class Vm extends Am{constructor(e){super(e),super.updateProperties({stroke:Ur._defaultLineColor,"stroke-width":1})}clone(){const e=new Vm(this._viewParameters);return e.updateAll(this),e}}var Gm=new WeakMap,qm=new WeakMap,Xm=new WeakMap,Ym=new WeakMap;class Km extends Lg{constructor(e){super(c(c({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),Bt(this,Gm,!1),Bt(this,qm,null),Bt(this,Xm,null),Bt(this,Ym,null),this._willKeepAspectRatio=!0,Gt(Xm,this,e.signatureData||null),Gt(qm,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Ur.initialize(e,t),this._defaultDrawingOptions=new Um,this._defaultDrawnSignatureOptions=new Vm(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Jn(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Vt(qm,this)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasDescription");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(Vt(Xm,this)){const{lines:e,mustSmooth:t,areContours:n,description:i,uuid:s,heightInPage:a}=Vt(Xm,this),{rawDims:{pageWidth:r,pageHeight:o},rotation:l}=this.parent.viewport,c=Mm.processDrawnLines({lines:e,pageWidth:r,pageHeight:o,rotation:l,innerMargin:Km._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(c,a,i,s)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){Gt(Ym,this,e),this.addEditToolbar()}getUuid(){return Vt(Ym,this)}get description(){return Vt(qm,this)}set description(e){Gt(qm,this,e),super.addEditToolbar().then(t=>{null===t||void 0===t||t.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:s}=Vt(Xm,this),a=Math.max(i,s);return{areContours:t,outline:Mm.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:i,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:s,y:a}=this,{outline:r}=Gt(Xm,this,e);let o;Gt(Gm,this,r instanceof Pm),this.description=n,this.div.setAttribute("data-l10n-args",JSON.stringify({description:n})),Vt(Gm,this)?o=Km.getDefaultDrawingOptions():(o=Km._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":r.thickness})),this._addOutlines({drawOutlines:r,drawingOptions:o});const[l,c]=this.parentDimensions,[,h]=this.pageDimensions;let u=t/h;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(l*this.width,c*this.height),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return Mm.process(e,t,n,i,Km._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return Mm.extractContoursFromText(e,t,n,i,s,Km._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return Mm.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:Km._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=Km.getDefaultDrawingOptions():(this._drawingOptions=Km._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":s}}=this,a={annotationType:Sn.SIGNATURE,isSignature:!0,areContours:Vt(Gm,this),color:[0,0,0],thickness:Vt(Gm,this)?0:s,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(a.paths={lines:t,points:n},a.uuid=Vt(Ym,this),a.isCopy=!0):a.lines=t,Vt(qm,this)&&(a.accessibilityData={type:"Figure",alt:Vt(qm,this)}),a}static deserializeDraw(e,t,n,i,s,a){return a.areContours?Pm.deserialize(e,t,n,i,s,a):ym.deserialize(e,t,n,i,s,a)}static async deserialize(e,t,n){var i;const s=await super.deserialize(e,t,n);return Gt(Gm,s,e.areContours),Gt(qm,s,(null===(i=e.accessibilityData)||void 0===i?void 0:i.alt)||""),Gt(Ym,s,e.uuid),s}}o(Km,"_type","signature"),o(Km,"_editorType",Sn.SIGNATURE),o(Km,"_defaultDrawingOptions",null);var Qm=new WeakMap,$m=new WeakMap,Jm=new WeakMap,Zm=new WeakMap,ev=new WeakMap,tv=new WeakMap,nv=new WeakMap,iv=new WeakMap,sv=new WeakMap,av=new WeakMap,rv=new WeakMap,ov=new WeakSet;class lv extends Ur{constructor(e){super(c(c({},e),{},{name:"stampEditor"})),zt(this,ov),Bt(this,Qm,null),Bt(this,$m,null),Bt(this,Jm,null),Bt(this,Zm,null),Bt(this,ev,null),Bt(this,tv,""),Bt(this,nv,null),Bt(this,iv,!1),Bt(this,sv,null),Bt(this,av,!1),Bt(this,rv,!1),Gt(Zm,this,e.bitmapUrl),Gt(ev,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Ur.initialize(e,t)}static isHandlingMimeForPasting(e){return ji.includes(e)}static paste(e,t){t.pasteEditor({mode:Sn.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasAltText");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:a}=e||this.copyCanvas(null,null,!0).imageData,r=await n.guess({name:"altText",request:{data:i,width:s,height:a,channels:i.length/(s*a)}});if(!r)throw new Error("No response from the AI service.");if(r.error)throw new Error("Error from the AI service.");if(r.cancel)return null;if(!r.output)throw new Error("No valid response from the AI service.");const o=r.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;Vt($m,this)&&(Gt(Qm,this,null),this._uiManager.imageManager.deleteId(Vt($m,this)),null===(e=Vt(nv,this))||void 0===e||e.remove(),Gt(nv,this,null),Vt(sv,this)&&(clearTimeout(Vt(sv,this)),Gt(sv,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(Vt($m,this)&&null===Vt(nv,this)&&Ht(ov,this,uv).call(this),this.isAttachedToDOM||this.parent.add(this))):Vt($m,this)&&Ht(ov,this,uv).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(Vt(Jm,this)||Vt(Qm,this)||Vt(Zm,this)||Vt(ev,this)||Vt($m,this)||Vt(iv,this))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Vt(iv,this)||(Vt(Qm,this)?Ht(ov,this,dv).call(this):Ht(ov,this,uv).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(Gt($m,this,n),i&&Gt(Qm,this,i),Gt(iv,this,!1),Ht(ov,this,dv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==Vt(sv,this)&&clearTimeout(Vt(sv,this));Gt(sv,this,setTimeout(()=>{Gt(sv,this,null),Ht(ov,this,fv).call(this)},200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:i,height:s}=Vt(Qm,this),a=new Fi;let r=Vt(Qm,this),o=i,l=s,c=null;if(t){var h,u;if(i>t||s>t){const e=Math.min(t/i,t/s);o=Math.floor(i*e),l=Math.floor(s*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*a.sx),n=c.height=Math.ceil(l*a.sy);Vt(av,this)||(r=Ht(ov,this,pv).call(this,e,n));const d=c.getContext("2d");d.filter=this._uiManager.hcmFilter;let p="white",f="#cfcfd8";"none"!==this._uiManager.hcmFilter?f="black":null!==(h=(u=window).matchMedia)&&void 0!==h&&h.call(u,"(prefers-color-scheme: dark)").matches&&(p="#8f8f9d",f="#42414d");const g=15,m=g*a.sx,v=g*a.sy,b=new OffscreenCanvas(2*m,2*v),y=b.getContext("2d");y.fillStyle=p,y.fillRect(0,0,2*m,2*v),y.fillStyle=f,y.fillRect(0,0,m,v),y.fillRect(m,v,m,v),d.fillStyle=d.createPattern(b,"repeat"),d.fillRect(0,0,e,n),d.drawImage(r,0,0,r.width,r.height,0,0,e,n)}let d=null;if(n){let t,n;if(a.symmetric&&r.width<e&&r.height<e)t=r.width,n=r.height;else if(r=Vt(Qm,this),i>e||s>e){const a=Math.min(e/i,e/s);t=Math.floor(i*a),n=Math.floor(s*a),Vt(av,this)||(r=Ht(ov,this,pv).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(r,0,0,r.width,r.height,0,0,t,n),d={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:d}}static async deserialize(e,t,n){let i=null,s=!1;if(e instanceof Jd){var a;const{data:{rect:r,rotation:o,id:l,structParent:c,popupRef:h},container:u,parent:{page:{pageNumber:d}},canvas:p}=e;let f,g;p?(delete e.canvas,({id:f,bitmap:g}=n.imageManager.getFromCanvas(u.id,p)),p.remove()):(s=!0,e._hasNoCanvas=!0);const m=(null===(a=await t._structTree.getAriaAttributes("".concat(mi).concat(l)))||void 0===a?void 0:a.get("aria-label"))||"";i=e={annotationType:Sn.STAMP,bitmapId:f,bitmap:g,pageIndex:d-1,rect:r.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:m},isSvg:!1,structParent:c,popupRef:h}}const r=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:h,isSvg:u,accessibilityData:d}=e;s?(n.addMissingCanvas(e.id,r),Gt(iv,r,!0)):h&&n.imageManager.isValidId(h)?(Gt($m,r,h),l&&Gt(Qm,r,l)):Gt(Zm,r,c),Gt(av,r,u);const[p,f]=r.pageDimensions;return r.width=(o[2]-o[0])/p,r.height=(o[3]-o[1])/f,d&&(r.altTextData=d),r._initialData=i,Gt(rv,r,!!i),r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Sn.STAMP,bitmapId:Vt($m,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Vt(av,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=Ht(ov,this,gv).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const e=Ht(ov,this,mv).call(this,n);if(e.isSame)return null;var a;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(a=this._initialData.structParent)&&void 0!==a?a:-1}if(n.id=this.annotationElementId,null===t)return n;t.stamps||(t.stamps=new Map);const r=Vt(av,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(Vt($m,this))){if(Vt(av,this)){const e=t.stamps.get(Vt($m,this));r>e.area&&(e.area=r,e.serialized.bitmap.close(),e.serialized.bitmap=Ht(ov,this,gv).call(this,!1))}}else t.stamps.set(Vt($m,this),{area:r,serialized:n}),n.bitmap=Ht(ov,this,gv).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}function cv(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(Gt(Qm,this,e.bitmap),t||(Gt($m,this,e.id),Gt(av,this,e.isSvg)),e.file&&Gt(tv,this,e.file.name),Ht(ov,this,dv).call(this)):this.remove()}function hv(){if(Gt(Jm,this,null),this._uiManager.enableWaiting(!1),Vt(nv,this))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Vt(Qm,this))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Vt(Qm,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function uv(){if(Vt($m,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(Vt($m,this)).then(e=>Ht(ov,this,cv).call(this,e,!0)).finally(()=>Ht(ov,this,hv).call(this));if(Vt(Zm,this)){const e=Vt(Zm,this);return Gt(Zm,this,null),this._uiManager.enableWaiting(!0),void Gt(Jm,this,this._uiManager.imageManager.getFromUrl(e).then(e=>Ht(ov,this,cv).call(this,e)).finally(()=>Ht(ov,this,hv).call(this)))}if(Vt(ev,this)){const e=Vt(ev,this);return Gt(ev,this,null),this._uiManager.enableWaiting(!0),void Gt(Jm,this,this._uiManager.imageManager.getFromFile(e).then(e=>Ht(ov,this,cv).call(this,e)).finally(()=>Ht(ov,this,hv).call(this)))}const e=document.createElement("input");e.type="file",e.accept=ji.join(",");const t=this._uiManager._signal;Gt(Jm,this,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Ht(ov,this,cv).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>Ht(ov,this,hv).call(this))),e.click()}function dv(){var e;const{div:t}=this;let{width:n,height:i}=Vt(Qm,this);const[s,a]=this.pageDimensions,r=.75;if(this.width)n=this.width*s,i=this.height*a;else if(n>r*s||i>r*a){const e=Math.min(r*s/n,r*a/i);n*=e,i*=e}const[o,l]=this.parentDimensions;this.setDims(n*o/s,i*l/a),this._uiManager.enableWaiting(!1);const c=Gt(nv,this,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/s,this.height=i/a,null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),Ht(ov,this,fv).call(this),Vt(rv,this)||(this.parent.addUndoableEditor(this),Gt(rv,this,!0)),this._reportTelemetry({action:"inserted_image"}),Vt(tv,this)&&this.div.setAttribute("aria-description",Vt(tv,this)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}function pv(e,t){const{width:n,height:i}=Vt(Qm,this);let s=n,a=i,r=Vt(Qm,this);for(;s>2*e||a>2*t;){const n=s,i=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const o=new OffscreenCanvas(s,a);o.getContext("2d").drawImage(r,0,0,n,i,0,0,s,a),r=o.transferToImageBitmap()}return r}function fv(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,s=new Fi,a=Math.ceil(n*e*s.sx),r=Math.ceil(i*t*s.sy),o=Vt(nv,this);if(!o||o.width===a&&o.height===r)return;o.width=a,o.height=r;const l=Vt(av,this)?Vt(Qm,this):Ht(ov,this,pv).call(this,a,r),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,a,r)}function gv(e){if(e){if(Vt(av,this)){const e=this._uiManager.imageManager.getSvgUrl(Vt($m,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=Vt(Qm,this));return e.getContext("2d").drawImage(Vt(Qm,this),0,0),e.toDataURL()}if(Vt(av,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*wi.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*wi.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(n,i);return s.getContext("2d").drawImage(Vt(Qm,this),0,0,Vt(Qm,this).width,Vt(Qm,this).height,0,0,n,i),s.transferToImageBitmap()}return structuredClone(Vt(Qm,this))}function mv(e){var t;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,s=e.pageIndex===n,a=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}}o(lv,"_type","stamp"),o(lv,"_editorType",Sn.STAMP);var vv=new WeakMap,bv=new WeakMap,yv=new WeakMap,wv=new WeakMap,xv=new WeakMap,Sv=new WeakMap,kv=new WeakMap,Av=new WeakMap,_v=new WeakMap,Ev=new WeakMap,Cv=new WeakMap,Pv=new WeakMap,Mv=new WeakMap,Tv=new WeakMap,Rv=new WeakMap,Nv=new WeakMap,Lv=new WeakSet;class Dv{constructor(e){let{uiManager:t,pageIndex:n,div:i,structTreeLayer:s,accessibilityManager:a,annotationLayer:r,drawLayer:o,textLayer:l,viewport:c,l10n:h}=e;zt(this,Lv),Bt(this,vv,void 0),Bt(this,bv,!1),Bt(this,yv,null),Bt(this,wv,null),Bt(this,xv,null),Bt(this,Sv,new Map),Bt(this,kv,!1),Bt(this,Av,!1),Bt(this,_v,!1),Bt(this,Ev,null),Bt(this,Cv,null),Bt(this,Pv,null),Bt(this,Mv,null),Bt(this,Tv,null),Bt(this,Rv,-1),Bt(this,Nv,void 0);const u=[...zv._.values()];if(!Dv._initialized){Dv._initialized=!0;for(const e of u)e.initialize(h,t)}t.registerEditorTypes(u),Gt(Nv,this,t),this.pageIndex=n,this.div=i,Gt(vv,this,a),Gt(yv,this,r),this.viewport=c,Gt(Pv,this,l),this.drawLayer=o,this._structTree=s,Vt(Nv,this).addLayer(this)}get isEmpty(){return 0===Vt(Sv,this).size}get isInvisible(){return this.isEmpty&&Vt(Nv,this).getMode()===Sn.NONE}updateToolbar(e){Vt(Nv,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt(Nv,this).getMode();switch(Ht(Lv,this,Wv).call(this),e){case Sn.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Sn.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Sn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of zv._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=Vt(Pv,this))||void 0===t?void 0:t.div)}setEditingState(e){Vt(Nv,this).setEditingState(e)}addCommands(e){Vt(Nv,this).addCommands(e)}cleanUndoStack(e){Vt(Nv,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=Vt(yv,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){var e;Gt(_v,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),null===(e=Vt(Tv,this))||void 0===e||e.abort(),Gt(Tv,this,null);const t=new Set;for(const i of Vt(Sv,this).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(Vt(Nv,this).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!Vt(yv,this))return void Gt(_v,this,!1);const n=Vt(yv,this).getEditableAnnotations();for(const i of n){if(i.hide(),Vt(Nv,this).isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=await this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}Gt(_v,this,!1)}disable(){if(Gt(Av,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),Vt(Pv,this)&&!Vt(Tv,this)){Gt(Tv,this,new AbortController);const e=Vt(Nv,this).combinedSignal(Vt(Tv,this));Vt(Pv,this).div.addEventListener("pointerdown",e=>{const{clientX:t,clientY:n,timeStamp:i}=e;if(i-Vt(Rv,this)>500)return void Gt(Rv,this,i);Gt(Rv,this,-1);const{classList:s}=this.div;s.toggle("getElements",!0);const a=document.elementsFromPoint(t,n);if(s.toggle("getElements",!1),!this.div.contains(a[0]))return;let r;const o=new RegExp("^".concat(xn,"[0-9]+$"));for(const c of a)if(o.test(c.id)){r=c.id;break}if(!r)return;const l=Vt(Sv,this).get(r);null===(null===l||void 0===l?void 0:l.annotationElementId)&&(e.stopPropagation(),e.preventDefault(),l.dblclick())},{signal:e,capture:!0})}const e=new Map,t=new Map;for(const s of Vt(Sv,this).values()){var n;s.disableEditing(),s.annotationElementId&&(null===s.serialize()?(t.set(s.annotationElementId,s),null===(n=this.getEditableAnnotation(s.annotationElementId))||void 0===n||n.show(),s.remove()):e.set(s.annotationElementId,s))}if(Vt(yv,this)){const n=Vt(yv,this).getEditableAnnotations();for(const i of n){const{id:n}=i.data;if(Vt(Nv,this).isDeletedAnnotationElement(n))continue;let s=t.get(n);s?(s.resetAnnotationElement(i),s.show(!1),i.show()):(s=e.get(n),s&&(Vt(Nv,this).addChangedExistingAnnotation(s),s.renderAnnotationElement(i)&&s.show(!1)),i.show())}}Ht(Lv,this,Wv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of zv._.values())i.remove("".concat(s._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Gt(Av,this,!1)}getEditableAnnotation(e){var t;return(null===(t=Vt(yv,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){Vt(Nv,this).getActive()!==e&&Vt(Nv,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=Vt(Pv,this))&&void 0!==e&&e.div&&!Vt(Mv,this)){Gt(Mv,this,new AbortController);const e=Vt(Nv,this).combinedSignal(Vt(Mv,this));Vt(Pv,this).div.addEventListener("pointerdown",Ht(Lv,this,Iv).bind(this),{signal:e}),Vt(Pv,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=Vt(Pv,this))&&void 0!==e&&e.div&&Vt(Mv,this)&&(Vt(Mv,this).abort(),Gt(Mv,this,null),Vt(Pv,this).div.classList.remove("highlighting"))}enableClick(){if(Vt(wv,this))return;Gt(wv,this,new AbortController);const e=Vt(Nv,this).combinedSignal(Vt(wv,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=Vt(wv,this))||void 0===e||e.abort(),Gt(wv,this,null)}attach(e){Vt(Sv,this).set(e.id,e);const{annotationElementId:t}=e;t&&Vt(Nv,this).isDeletedAnnotationElement(t)&&Vt(Nv,this).removeDeletedAnnotationElement(e)}detach(e){var t;Vt(Sv,this).delete(e.id),null===(t=Vt(vv,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!Vt(Av,this)&&e.annotationElementId&&Vt(Nv,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),Vt(Nv,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(Vt(Nv,this).addDeletedAnnotationElement(e.annotationElementId),Ur.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),Vt(Nv,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!Vt(_v,this)),Vt(Nv,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!Vt(xv,this)&&(e._focusEventsAllowed=!1,Gt(xv,this,setTimeout(()=>{Gt(xv,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:Vt(Nv,this)._signal}),n.focus())},0))),e._structTreeParentId=null===(t=Vt(vv,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return Vt(Nv,this).getId()}combinedSignal(e){return Vt(Nv,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=Ut(Lv,this,Fv))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await Vt(Nv,this).updateMode(e.mode);const{offsetX:n,offsetY:i}=Ht(Lv,this,Ov).call(this),s=this.getNextId(),a=Ht(Lv,this,jv).call(this,c({parent:this,id:s,x:n,y:i,uiManager:Vt(Nv,this),isCentered:!0},t));a&&this.add(a)}async deserialize(e){var t,n;return await(null===(t=zv._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,Vt(Nv,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),s=Ht(Lv,this,jv).call(this,c({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:Vt(Nv,this),isCentered:t},n));return s&&this.add(s),s}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(Ht(Lv,this,Ov).call(this),!0,e)}setSelected(e){Vt(Nv,this).setSelected(e)}toggleSelected(e){Vt(Nv,this).toggleSelected(e)}unselect(e){Vt(Nv,this).unselect(e)}pointerup(e){var t;const{isMac:n}=li.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!Vt(kv,this))return;if(Gt(kv,this,!1),null!==(t=Ut(Lv,this,Fv))&&void 0!==t&&t.isDrawer&&Ut(Lv,this,Fv).supportMultipleDrawings)return;if(!Vt(bv,this))return void Gt(bv,this,!0);const i=Vt(Nv,this).getMode();i!==Sn.STAMP&&i!==Sn.SIGNATURE?this.createAndAddNewEditor(e,!1):Vt(Nv,this).unselectAll()}pointerdown(e){var t;if(Vt(Nv,this).getMode()===Sn.HIGHLIGHT&&this.enableTextSelection(),Vt(kv,this))return void Gt(kv,this,!1);const{isMac:n}=li.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(Gt(kv,this,!0),null!==(t=Ut(Lv,this,Fv))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const i=Vt(Nv,this).getActive();Gt(bv,this,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),Vt(Ev,this))return void Ut(Lv,this,Fv).startDrawing(this,Vt(Nv,this),!1,e);Vt(Nv,this).setCurrentDrawingSession(this),Gt(Ev,this,new AbortController);const t=Vt(Nv,this).combinedSignal(Vt(Ev,this));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(Gt(Cv,this,null),this.commitOrRemove())},{signal:t}),Ut(Lv,this,Fv).startDrawing(this,Vt(Nv,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;return void(this.div.contains(e)&&Gt(Cv,this,e))}Vt(Cv,this)&&setTimeout(()=>{var e;null===(e=Vt(Cv,this))||void 0===e||e.focus(),Gt(Cv,this,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Vt(Ev,this)?(Vt(Nv,this).setCurrentDrawingSession(null),Vt(Ev,this).abort(),Gt(Ev,this,null),Gt(Cv,this,null),Ut(Lv,this,Fv).endDrawing(e)):null}findNewParent(e,t,n){const i=Vt(Nv,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}commitOrRemove(){return!!Vt(Ev,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){Vt(Ev,this)&&Ut(Lv,this,Fv).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=Vt(Nv,this).getActive())||void 0===e?void 0:e.parent)===this&&(Vt(Nv,this).commitOrRemove(),Vt(Nv,this).setActiveEditor(null)),Vt(xv,this)&&(clearTimeout(Vt(xv,this)),Gt(xv,this,null));for(const n of Vt(Sv,this).values()){var t;null===(t=Vt(vv,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,Vt(Sv,this).clear(),Vt(Nv,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,Ii(this.div,t);for(const n of Vt(Nv,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;Vt(Nv,this).commitOrRemove(),Ht(Lv,this,Wv).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Ii(this.div,{rotation:i}),n!==i)for(const s of Vt(Sv,this).values())s.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return Vt(Nv,this).viewParameters.realScale}}function Iv(e){Vt(Nv,this).unselectAll();const{target:t}=e;if(t===Vt(Pv,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&Vt(Pv,this).div.contains(t)){const{isMac:t}=li.platform;if(0!==e.button||e.ctrlKey&&t)return;Vt(Nv,this).showAllEditors("highlight",!0,!0),Vt(Pv,this).div.classList.add("free"),this.toggleDrawing(),ug.startHighlighting(this,"ltr"===Vt(Nv,this).direction,{target:Vt(Pv,this).div,x:e.x,y:e.y}),Vt(Pv,this).div.addEventListener("pointerup",()=>{Vt(Pv,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Vt(Nv,this)._signal}),e.preventDefault()}}function Fv(e){return zv._.get(Vt(Nv,e).getMode())}function jv(e){const t=Ut(Lv,this,Fv);return t?new t.prototype.constructor(e):null}function Ov(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,t),r=(s+Math.min(window.innerWidth,e+n))/2-e,o=(a+Math.min(window.innerHeight,t+i))/2-t,[l,c]=this.viewport.rotation%180===0?[r,o]:[o,r];return{offsetX:l,offsetY:c}}function Wv(){for(const e of Vt(Sv,this).values())e.isEmpty()&&e.remove()}o(Dv,"_initialized",!1);var zv={_:new Map([bp,Em,lv,ug,Km].map(e=>[e._editorType,e]))},Bv=new WeakMap,Hv=new WeakMap,Uv=new WeakMap,Vv=new WeakSet;class Gv{constructor(e){let{pageIndex:t}=e;zt(this,Vv),Bt(this,Bv,null),Bt(this,Hv,new Map),Bt(this,Uv,new Map),this.pageIndex=t}setParent(e){if(Vt(Bv,this)){if(Vt(Bv,this)!==e){if(Vt(Hv,this).size>0)for(const t of Vt(Hv,this).values())t.remove(),e.append(t);Gt(Bv,this,e)}}else Gt(Bv,this,e)}static get _svgFactory(){return Jn(this,"_svgFactory",new Nu)}draw(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=(Qv._=(t=Qv._,n=t++,t),n),r=Ht(Vv,this,Xv).call(this),o=Gv._svgFactory.createElement("defs");r.append(o);const l=Gv._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(a);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),i&&Vt(Uv,this).set(a,l);const h=s?Ht(Vv,this,Yv).call(this,o,c):null,u=Gv._svgFactory.createElement("use");return r.append(u),u.setAttribute("href","#".concat(c)),this.updateProperties(r,e),Vt(Hv,this).set(a,r),{id:a,clipPathId:"url(#".concat(h,")")}}drawOutline(e,t){var n,i;const s=(Qv._=(n=Qv._,i=n++,n),i),a=Ht(Vv,this,Xv).call(this),r=Gv._svgFactory.createElement("defs");a.append(r);const o=Gv._svgFactory.createElement("path");r.append(o);const l="path_p".concat(this.pageIndex,"_").concat(s);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t){const e=Gv._svgFactory.createElement("mask");r.append(e),c="mask_p".concat(this.pageIndex,"_").concat(s),e.setAttribute("id",c),e.setAttribute("maskUnits","objectBoundingBox");const t=Gv._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=Gv._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const h=Gv._svgFactory.createElement("use");a.append(h),h.setAttribute("href","#".concat(l)),c&&h.setAttribute("mask","url(#".concat(c,")"));const u=h.cloneNode();return a.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(a,e),Vt(Hv,this).set(s,a),s}finalizeDraw(e,t){Vt(Uv,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:s,path:a}=t,r="number"===typeof e?Vt(Hv,this).get(e):e;if(r){if(n&&Ht(Vv,this,Kv).call(this,r,n),i&&qv.call(Gv,r,i),s){const{classList:e}=r;for(const[t,n]of Object.entries(s))e.toggle(t,n)}if(a){const e=r.firstChild.firstChild;Ht(Vv,this,Kv).call(this,e,a)}}}updateParent(e,t){if(t===this)return;const n=Vt(Hv,this).get(e);n&&(Vt(Bv,t).append(n),Vt(Hv,this).delete(e),Vt(Hv,t).set(e,n))}remove(e){Vt(Uv,this).delete(e),null!==Vt(Bv,this)&&(Vt(Hv,this).get(e).remove(),Vt(Hv,this).delete(e))}destroy(){Gt(Bv,this,null);for(const e of Vt(Hv,this).values())e.remove();Vt(Hv,this).clear(),Vt(Uv,this).clear()}}function qv(e,t){let[n,i,s,a]=t;const{style:r}=e;r.top="".concat(100*i,"%"),r.left="".concat(100*n,"%"),r.width="".concat(100*s,"%"),r.height="".concat(100*a,"%")}function Xv(){const e=ln._svgFactory.create(1,1,!0);return Vt(Bv,this).append(e),e.setAttribute("aria-hidden",!0),e}function Yv(e,t){const n=ln._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=ln._svgFactory.createElement("use");return n.append(s),s.setAttribute("href","#".concat(t)),s.classList.add("clip"),i}function Kv(e,t){for(const[n,i]of Object.entries(t))null===i?e.removeAttribute(n):e.setAttribute(n,i)}ln=Gv;var Qv={_:0};function $v(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=$v(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}globalThis._pdfjsTestingUtils={HighlightOutliner:gf},globalThis.pdfjsLib={AbortException:ai,AnnotationEditorLayer:Dv,AnnotationEditorParamsType:kn,AnnotationEditorType:Sn,AnnotationEditorUIManager:ma,AnnotationLayer:lp,AnnotationMode:wn,AnnotationType:Rn,build:"cbeef3233",ColorPicker:Of,createValidAbsoluteUrl:Qn,DOMSVGFactory:Nu,DrawLayer:Gv,FeatureTest:li,fetchData:xi,getDocument:Bh,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(Ai(e))return Xn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(e=>{try{return new URL(e)}catch(t){try{return new URL(decodeURIComponent(e))}catch(n){try{return new URL(e,"https://foo.bar")}catch(i){try{return new URL(decodeURIComponent(e),"https://foo.bar")}catch(s){return null}}}}})(e);if(!n)return t;const i=e=>{try{let t=decodeURIComponent(e);return t.includes("/")?(t=t.split("/").at(-1),t.test(/^\.pdf$/i)?t:e):t}catch(t){return e}},s=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(s.test(a))return i(a);if(n.searchParams.size>0){const e=Array.from(n.searchParams.values()).reverse();for(const n of e)if(s.test(n))return i(n);const t=Array.from(n.searchParams.keys()).reverse();for(const n of t)if(s.test(n))return i(n)}if(n.hash){const e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(e)return i(e[0])}return t},getUuid:gi,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:i=0}=t;const{width:s,height:a}=e.attributes.style,r=[0,0,parseInt(s),parseInt(a)];return new Si({viewBox:r,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:mc,ImageKind:Tn,InvalidPDFException:ni,isDataScheme:Ai,isPdfFile:_i,isValidExplicitDest:Mo,MathClamp:vi,noContextMenu:Pi,normalizeUnicode:function(e){return pi||(pi=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,fi=new Map([["\ufb05","\u017ft"]])),e.replaceAll(pi,(e,t,n)=>t?t.normalize("NFKC"):fi.get(n))},OPS:On,OutputScale:Fi,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:Kh,PDFDateString:Ti,PDFWorker:ru,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:wi,RenderingCancelledException:ki,ResponseException:ii,setLayerDimensions:Ii,shadow:Jn,SignatureExtractor:Mm,stopEvent:Mi,SupportedImageMimeTypes:ji,TextLayer:Ch,TouchManager:fr,updateUrlHash:$n,Util:hi,VerbosityLevel:jn,version:"5.3.93",XfaLayer:Lu};const Jv=function(){for(var e,t,n=0,i="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=$v(e))&&(i&&(i+=" "),i+=t);return i};var Zv=Object.prototype.hasOwnProperty;function eb(e,t,n){for(n of e.keys())if(tb(n,t))return n}function tb(e,t){var n,i,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&tb(e[i],t[i]););return-1===i}if(n===Set){if(e.size!==t.size)return!1;for(i of e){if((s=i)&&"object"===typeof s&&!(s=eb(t,s)))return!1;if(!t.has(s))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(i of e){if((s=i[0])&&"object"===typeof s&&!(s=eb(t,s)))return!1;if(!tb(i[1],t.get(s)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((i=e.byteLength)===t.byteLength)for(;i--&&e.getInt8(i)===t.getInt8(i););return-1===i}if(ArrayBuffer.isView(e)){if((i=e.byteLength)===t.byteLength)for(;i--&&e[i]===t[i];);return-1===i}if(!n||"object"===typeof e){for(n in i=0,e){if(Zv.call(e,n)&&++i&&!Zv.call(t,n))return!1;if(!(n in t)||!tb(e[n],t[n]))return!1}return Object.keys(t).length===i}}return e!==e&&t!==t}const nb=["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onBlur","onInput","onInvalid","onReset","onSubmit","onLoad","onError","onKeyDown","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onChange","onToggle"];var ib="Invariant failed";function sb(e,t){if(!e)throw new Error(ib)}var ab=n(440);const rb=(0,t.createContext)(null);class ob{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return sb(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){sb(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{sb(this.pdfDocument),sb(e),"string"===typeof e?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(e=>{sb(Array.isArray(e),'"'.concat(e,'" is not a valid destination array.'));const t=e[0];new Promise(e=>{sb(this.pdfDocument),t instanceof Object?this.pdfDocument.getPageIndex(t).then(t=>{e(t)}).catch(()=>{sb(!1,'"'.concat(t,'" is not a valid page reference.'))}):"number"===typeof t?e(t):sb(!1,'"'.concat(t,'" is not a valid destination reference.'))}).then(t=>{const n=t+1;sb(this.pdfViewer),sb(n>=1&&n<=this.pagesCount,'"'.concat(n,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:t,pageNumber:n})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;sb(this.pdfViewer),sb(e>=1&&e<=this.pagesCount,'"'.concat(e,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||"noopener noreferrer nofollow",e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function lb(e){let{children:t,type:n}=e;return(0,St.jsx)("div",{className:"react-pdf__message react-pdf__message--".concat(n),children:t})}const cb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function hb(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function ub(){return(0,t.useReducer)(hb,{value:void 0,error:void 0})}const db="undefined"!==typeof window,pb=db&&"file:"===window.location.protocol;function fb(e){return function(e){return"string"===typeof e}(e)&&/^data:/.test(e)}function gb(e){sb(fb(e));const[t="",n=""]=e.split(",");return-1!==t.split(";").indexOf("base64")?atob(n):unescape(n)}const mb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function vb(){ab(!pb,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(mb))}const bb=["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"],yb=["url"],{Tm:wb}=e,xb=(e,t)=>{switch(t){case cb.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case cb.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."));break}};function Sb(e){return"object"===typeof e&&null!==e&&("data"in e||"range"in e||"url"in e)}const kb=(0,t.forwardRef)(function(e,n){let{children:i,className:a,error:r="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:l,file:h,inputRef:u,imageResourcesPath:d,loading:p="Loading PDF\u2026",noData:f="No PDF file specified.",onItemClick:g,onLoadError:m,onLoadProgress:v,onLoadSuccess:b,onPassword:y=xb,onSourceError:w,onSourceSuccess:x,options:S,renderMode:k,rotate:A,scale:_}=e,E=s(e,bb);const[C,P]=ub(),{value:M,error:T}=C,[R,N]=ub(),{value:L,error:D}=R,I=(0,t.useRef)(new ob),F=(0,t.useRef)([]),j=(0,t.useRef)(void 0),O=(0,t.useRef)(void 0);h&&h!==j.current&&Sb(h)&&(ab(!tb(h,j.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),j.current=h),S&&S!==O.current&&(ab(!tb(S,O.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),O.current=S);const W=(0,t.useRef)({scrollPageIntoView:e=>{const{dest:t,pageNumber:n,pageIndex:i=n-1}=e;if(g)return void g({dest:t,pageIndex:i,pageNumber:n});const s=F.current[i];s?s.scrollIntoView():ab(!1,"An internal link leading to page ".concat(n," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,t.useImperativeHandle)(n,()=>({linkService:I,pages:F,viewer:W}),[]),(0,t.useEffect)(function(){P({type:"RESET"})},[h,P]);const z=(0,t.useCallback)(async()=>{if(!h)return null;if("string"===typeof h){if(fb(h)){return{data:gb(h)}}return vb(),{url:h}}if(h instanceof wb)return{range:h};if(h instanceof ArrayBuffer)return{data:h};if(db&&function(e){return sb(db),e instanceof Blob}(h)){const e=await function(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return n(new Error("Error while reading a file."));t(i.result)},i.onerror=e=>{if(!e.target)return n(new Error("Error while reading a file."));const{error:t}=e.target;if(!t)return n(new Error("Error while reading a file."));switch(t.code){case t.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case t.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case t.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},i.readAsArrayBuffer(e)})}(h);return{data:e}}if(sb("object"===typeof h),sb(Sb(h)),"url"in h&&"string"===typeof h.url){if(fb(h.url)){const{url:e}=h,t=s(h,yb);return c({data:gb(e)},t)}vb()}return h},[h]);(0,t.useEffect)(()=>{const e=function(e){let t=!1;return{promise:new Promise((n,i)=>{e.then(e=>!t&&n(e)).catch(e=>!t&&i(e))}),cancel(){t=!0}}}(z());return e.promise.then(e=>{P({type:"RESOLVE",value:e})}).catch(e=>{P({type:"REJECT",error:e})}),()=>{var t;(null===(t=e)||void 0===t?void 0:t.cancel)&&t.cancel()}},[z,P]),(0,t.useEffect)(()=>{"undefined"!==typeof M&&(!1!==M?x&&x():T&&(ab(!1,T.toString()),w&&w(T)))},[M]),(0,t.useEffect)(function(){N({type:"RESET"})},[N,M]),(0,t.useEffect)(function(){if(!M)return;const e=Bh(S?c(c({},M),S):M);v&&(e.onProgress=v),y&&(e.onPassword=y);const t=e,n=t.promise.then(e=>{N({type:"RESOLVE",value:e})}).catch(e=>{t.destroyed||N({type:"REJECT",error:e})});return()=>{n.finally(()=>t.destroy())}},[S,N,M]),(0,t.useEffect)(()=>{"undefined"!==typeof L&&(!1!==L?L&&(b&&b(L),F.current=new Array(L.numPages),I.current.setDocument(L)):D&&(ab(!1,D.toString()),m&&m(D)))},[L]),(0,t.useEffect)(function(){I.current.setViewer(W.current),I.current.setExternalLinkRel(o),I.current.setExternalLinkTarget(l)},[o,l]);const B=(0,t.useCallback)((e,t)=>{F.current[e]=t},[]),H=(0,t.useCallback)(e=>{delete F.current[e]},[]),U=(0,t.useMemo)(()=>({imageResourcesPath:d,linkService:I.current,onItemClick:g,pdf:L,registerPage:B,renderMode:k,rotate:A,scale:_,unregisterPage:H}),[d,g,L,B,k,A,_,H]),V=(0,t.useMemo)(()=>function(e,t){const n={};for(const i of nb){const s=e[i];s&&(n[i]=t?e=>s(e,t(i)):s)}return n}(E,()=>L),[E,L]);return(0,St.jsx)("div",c(c({className:Jv("react-pdf__Document",a),ref:u},V),{},{children:h?void 0===L||null===L?(0,St.jsx)(lb,{type:"loading",children:"function"===typeof p?p():p}):!1===L?(0,St.jsx)(lb,{type:"error",children:"function"===typeof r?r():r}):function(){if(e=U,!Boolean(null===e||void 0===e?void 0:e.pdf))throw new Error("pdf is undefined");var e;const t="function"===typeof i?i(U):i;return(0,St.jsx)(rb.Provider,{value:U,children:t})}():(0,St.jsx)(lb,{type:"no-data",children:"function"===typeof f?f():f})}))}),Ab=kb;mc.workerSrc="/pdf.worker.min.js";const _b=(0,t.forwardRef)(function(e,n){let{fileUrl:i="/pdfs/libro.pdf",onPageChange:s,onReady:a,onInteractiveReady:r,showControls:o=!0,thumbnailsVisible:l=!1,onToggleThumbnails:h,onZoomChange:u}=e;const d=(0,t.useRef)(null),p=(0,t.useRef)(null),f=(0,t.useRef)(null),[g,m]=(0,t.useState)(null),[v,b]=(0,t.useState)(0),[y,w]=(0,t.useState)(0),[x,S]=(0,t.useState)(!0),[k,A]=(0,t.useState)(null),[_,E]=(0,t.useState)({width:550,height:733}),[C,P]=(0,t.useState)(!1),[M,T]=(0,t.useState)(!1),R=(0,t.useRef)(null),[N,L]=(0,t.useState)({}),[D,I]=(0,t.useState)({}),[F,j]=(0,t.useState)({}),[O,W]=(0,t.useState)(125),[z,B]=(0,t.useState)("auto"),[H,U]=(0,t.useState)(""),[V,G]=(0,t.useState)(null),[q,X]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=()=>{const e=window.innerHeight-140,t=window.innerWidth-80;let n=Math.min(e,950),i=Math.min(t,Math.round(n/1.333));n=Math.max(n,850),i=Math.max(i,650),E({width:i,height:n})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const Y=(0,t.useMemo)(()=>{const{width:e,height:t}=_,n=t/e||1.333,i=O/100;let s=e,a=t;return"width"===z?(s=e,a=e*n):"height"===z?(a=t,s=t/n):(s=e,a=t),{width:s*i,height:a*i}},[_,O,z]);(0,t.useEffect)(()=>{let e=!1;return(async()=>{try{const t=Bh(i),n=await t.promise;e||(m(n),b(n.numPages||0),S(!1))}catch(t){console.error("Error cargando PDF",t),e||A("No se pudo cargar el PDF")}})(),()=>{e=!0}},[i]),(0,t.useEffect)(()=>{if(!v)return;const e=[y,y+1,y-1].filter(e=>e>=0&&e<v);L(t=>{const n=c({},t);return e.forEach(e=>n[e]=!0),n})},[y,v]);const K=(0,t.useCallback)(async e=>{if(!g)return null;try{const t=await g.getPage(e),n=t.getViewport({scale:2}),i=document.createElement("canvas"),s=i.getContext("2d");return i.width=n.width,i.height=n.height,await t.render({canvasContext:s,viewport:n}).promise,i.toDataURL("image/jpeg",.92)}catch(t){return console.error("Error renderizando p\xe1gina",e,t),null}},[g]);(0,t.useEffect)(()=>{if(!g||!v)return;[y+1,y-1].filter(e=>e>=1&&e<=v).forEach(e=>{D[e]||K(e).then(t=>{t&&I(n=>n[e]?n:c(c({},n),{},{[e]:t}))})});const e=y+1;D[e]||K(e).then(t=>{t&&I(n=>n[e]?n:c(c({},n),{},{[e]:t}))})},[y,v,g,K,D]),(0,t.useEffect)(()=>{if(!g||!v)return;let e=!1;return(async()=>{for(let t=1;t<=v&&!e;t++)if(!F[t])try{const n=await g.getPage(t),i=n.getViewport({scale:1}),s=120,a=Math.max(.1,Math.min(1,s/i.width)),r=n.getViewport({scale:a}),o=document.createElement("canvas"),l=o.getContext("2d");o.width=Math.ceil(r.width),o.height=Math.ceil(r.height),await n.render({canvasContext:l,viewport:r}).promise;const h=o.toDataURL("image/jpeg",.7);e||j(e=>e[t]?e:c(c({},e),{},{[t]:h}))}catch(Bb){console.warn("No se pudo crear miniatura de p\xe1gina",t,Bb)}})(),()=>{e=!0}},[g,v,F]);const Q=(0,t.useMemo)(()=>{if(!v)return[];const e=[];for(let t=0;t<v;t++){const n=t+1,i=D[n];e.push((0,St.jsx)("div",{className:"page-wrapper",children:(0,St.jsx)("div",{className:"demoPage",children:(0,St.jsxs)("div",{className:"page-content",children:[(0,St.jsx)("div",{className:"page-number",children:n}),(0,St.jsx)("div",{className:"pdf-page-container",children:i?(0,St.jsx)("img",{src:i,alt:"P\xe1gina ".concat(n),style:{width:"100%",height:"100%",objectFit:"contain"},draggable:!1}):(0,St.jsxs)("div",{className:"page-loading",children:["Cargando p\xe1gina ",n,"..."]})})]})})},t))}return e},[v,D]),$=(0,t.useCallback)(e=>{var t;const n=null!==(t=null===e||void 0===e?void 0:e.data)&&void 0!==t?t:0;w(n),null===s||void 0===s||s(n+1)},[s]);(0,t.useEffect)(()=>{f.current&&(f.current.scrollTop=0)},[y]);const J=(0,t.useCallback)(()=>{W(e=>Math.min(300,e+25))},[]),Z=(0,t.useCallback)(()=>{W(e=>Math.max(50,e-25))},[]),ee=(0,t.useCallback)(()=>{W(100),B("auto")},[]),te=(0,t.useCallback)(()=>{const e=ue.current;if(e){const t=(e.clientWidth||_.width)/(_.width||1);W(Math.min(300,Math.max(50,Math.round(100*t))))}B("width")},[_.width]),ne=(0,t.useCallback)(()=>{const e=ue.current;if(e){const t=(e.clientHeight||_.height)/(_.height||1);W(Math.min(300,Math.max(50,Math.round(100*t))))}B("height")},[_.height]),ie=(0,t.useCallback)(()=>{B("auto"),W(100)},[]),se=(0,t.useCallback)(()=>{const e=document.querySelector(".libro-fullscreen-wrapper")||p.current;var t,n,i;document.fullscreenElement?(null===(t=(n=document).exitFullscreen)||void 0===t||t.call(n),P(!1)):(null===e||void 0===e||null===(i=e.requestFullscreen)||void 0===i||i.call(e),P(!0))},[]);(0,t.useEffect)(()=>{const e=()=>{P(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);const ae=(0,t.useCallback)(()=>{T(e=>!e)},[]);(0,t.useEffect)(()=>(M?R.current=setInterval(()=>{var e,t;const n=null===(e=d.current)||void 0===e||null===(t=e.pageFlip)||void 0===t?void 0:t.call(e);if(!n)return;n.getCurrentPageIndex()>=v-1?n.flip(0):n.flipNext()},4e3):R.current&&clearInterval(R.current),()=>{R.current&&clearInterval(R.current)}),[M,v]);const re=(0,t.useCallback)(e=>{U(e),G(e?{current:0,total:0}:null)},[]),oe=(0,t.useCallback)(()=>{},[]),le=(0,t.useCallback)(()=>{},[]),ce=(0,t.useCallback)(()=>{X(e=>!e)},[]),he=(0,t.useCallback)(()=>{var e,t;const n=null===(e=(t=window).getSelection)||void 0===e?void 0:e.call(t).toString();if(n&&"speechSynthesis"in window){const e=new SpeechSynthesisUtterance(n);window.speechSynthesis.speak(e)}},[]),ue=(0,t.useRef)(null),[de,pe]=(0,t.useState)(!1),[fe,ge]=(0,t.useState)({x:0,y:0}),me=(0,t.useRef)({x:0,y:0}),ve=(0,t.useCallback)(e=>{O<=100||(pe(!0),me.current={x:e.clientX-fe.x,y:e.clientY-fe.y})},[O,fe]),be=(0,t.useCallback)(e=>{if(!de)return;let t=e.clientX-me.current.x,n=e.clientY-me.current.y;const i=ue.current;if(i){const e=i.clientWidth,s=i.clientHeight,a=Y.width,r=Y.height,o=Math.max(0,(a-e)/2),l=Math.max(0,(r-s)/2);t=Math.min(o,Math.max(-o,t)),n=Math.min(l,Math.max(-l,n))}ge({x:t,y:n})},[de]),ye=(0,t.useCallback)(()=>{de&&pe(!1)},[de]);(0,t.useEffect)(()=>{const e=ue.current;if(!e)return;e.addEventListener("mousemove",be),window.addEventListener("mouseup",ye),e.addEventListener("mouseleave",ye);const t=t=>{if(!t.ctrlKey)return;t.preventDefault();const n=t.deltaY<0?25:-25;W(e=>Math.min(300,Math.max(50,e+n)));const i=e.getBoundingClientRect(),s=t.clientX-i.left-i.width/2,a=t.clientY-i.top-i.height/2;ge(e=>({x:e.x+.05*s,y:e.y+.05*a}))};return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("mousemove",be),window.removeEventListener("mouseup",ye),e.removeEventListener("mouseleave",ye),e.removeEventListener("wheel",t)}},[be,ye]),(0,t.useEffect)(()=>{O<=100&&(0!==fe.x||0!==fe.y)&&ge({x:0,y:0})},[O,fe]),(0,t.useEffect)(()=>{null===u||void 0===u||u(O)},[O,u]),(0,t.useEffect)(()=>{const e=e=>{var t,n;const i=null===(t=d.current)||void 0===t||null===(n=t.pageFlip)||void 0===n?void 0:n.call(t);i&&("ArrowRight"===e.key?i.flipNext():"ArrowLeft"===e.key?i.flipPrev():"Home"===e.key?i.flip(0):"End"===e.key&&i.flip(Math.max(0,v-1)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[v]);const we=(0,t.useRef)(!1);return(0,t.useEffect)(()=>{var e,t;if(we.current)return;const n=null===(e=d.current)||void 0===e||null===(t=e.pageFlip)||void 0===t?void 0:t.call(e);n&&"function"===typeof n.flip&&(we.current=!0,null===r||void 0===r||r())}),(0,t.useImperativeHandle)(n,()=>({next:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.pageFlip().flipNext()},prev:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.pageFlip().flipPrev()},goTo:e=>{var t;const n=null===(t=d.current)||void 0===t?void 0:t.pageFlip();if(!n||!v)return;const i=Math.max(0,Math.min(v-1,(null!==e&&void 0!==e?e:1)-1));n.flip(i),w(i)},zoomIn:()=>J(),zoomOut:()=>Z(),zoomReset:()=>ee(),fitWidth:()=>te(),fitHeight:()=>ne(),fitAuto:()=>ie(),getZoom:()=>O,setZoom:e=>{const t=Number(e);Number.isFinite(t)&&W(Math.min(300,Math.max(50,t)))},toggleFullscreen:()=>se(),toggleAutoplay:()=>ae()}),[v,J,Z,ee,te,ne,ie,se,ae,O]),k?(0,St.jsx)("div",{className:"flipbook-shell",children:(0,St.jsxs)("div",{className:"pdf-error",children:[(0,St.jsx)("h3",{children:"Error al cargar el PDF"}),(0,St.jsx)("p",{children:k})]})}):(0,St.jsxs)("div",{ref:p,className:"flipbook-shell",children:[o&&(0,St.jsx)(Dt,{onZoomIn:J,onZoomOut:Z,onZoomReset:ee,onFitWidth:te,onFitHeight:ne,onFitAuto:ie,fitMode:z,onPrevPage:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.pageFlip().flipPrev()},onNextPage:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.pageFlip().flipNext()},onGoToPage:e=>{var t;return null===(t=d.current)||void 0===t?void 0:t.pageFlip().flip(e-1)},currentPage:y+1,totalPages:v,onToggleThumbnails:h,thumbnailsVisible:l,onReadSelection:he,currentZoom:O,onToggleFullscreen:se,isFullscreen:C,onToggleAutoplay:ae,isAutoplay:M,searchQuery:H,onSearchQueryChange:re,onSearchPrev:oe,onSearchNext:le,searchInfo:V,onToggleBookmark:ce,isBookmarked:q}),l&&(0,St.jsxs)("div",{className:"flipbook-thumbnails-panel",children:[(0,St.jsxs)("div",{className:"thumbnails-header",children:[(0,St.jsx)("span",{children:"Miniaturas"}),(0,St.jsx)("button",{className:"close-thumbnails",onClick:h,children:"\xd7"})]}),(0,St.jsx)("div",{className:"thumbnails-list",children:Array.from({length:v},(e,t)=>(0,St.jsxs)("div",{className:"thumbnail-item ".concat(y===t?"active":""),onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.pageFlip().flip(t)},children:[(0,St.jsx)("div",{className:"thumbnail-preview",children:F[t+1]?(0,St.jsx)("img",{src:F[t+1],alt:"Miniatura p\xe1gina ".concat(t+1),style:{width:"100%",height:"100%",objectFit:"contain",background:"#fff"},draggable:!1}):(0,St.jsx)("span",{children:t+1})}),(0,St.jsxs)("span",{className:"thumbnail-number",children:["P\xe1gina ",t+1]})]},t))})]}),(0,St.jsxs)("div",{className:"flipbook-main-container ".concat(o?"with-controls":""),children:[x&&(0,St.jsx)("div",{className:"flipbook-loading",children:(0,St.jsx)(Ab,{file:i,onLoadSuccess:e=>{let{numPages:t}=e;b(t),S(!1),null===a||void 0===a||a({totalPages:t})},onLoadError:e=>A(e.message),loading:(0,St.jsx)("div",{className:"loading-spinner",children:"Cargando PDF..."})})}),v>0&&(0,St.jsx)("div",{className:"flipbook-scroll-viewport",ref:f,children:(0,St.jsx)("div",{className:"flipbook-wrapper",children:(0,St.jsx)("div",{ref:ue,className:"flipbook-pan-container ".concat(O>100?de?"panning":"zoomed":""),onMouseDown:ve,style:{width:"100%",height:"100%",overflow:"hidden",cursor:O>100?de?"grabbing":"grab":"default"},children:(0,St.jsx)("div",{className:"flipbook-pan-inner",style:{transform:"translate(".concat(fe.x,"px, ").concat(fe.y,"px)"),transition:de?"none":"transform 0.1s ease-out",willChange:"transform"},children:(0,St.jsx)(jt,{ref:d,width:Y.width,height:Y.height,size:"fixed",minWidth:300,minHeight:400,maxWidth:2e3,maxHeight:2e3,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startPage:y,autoSize:!1,maxShadowOpacity:.5,showCover:!1,mobileScrollSupport:!0,onFlip:$,className:"flipbook-component",children:Q},"flip-".concat(Y.width,"-").concat(Y.height,"-").concat(O,"-").concat(z))})})})})]})]})}),Eb=_b;function Cb(){var e;const n=(0,t.useRef)(null),i=fe(),s=ue(),[a,r]=(0,t.useState)(1),[o,l]=(0,t.useState)(1),c=Number(null===(e=s.state)||void 0===e?void 0:e.targetPage)||null;(0,t.useEffect)(()=>{const e=new URLSearchParams(s.search),t=parseInt(e.get("page")||"0",10);!isNaN(t)&&t>0&&i("/libro",{state:{targetPage:t},replace:!0})},[s.search,i]);const[h]=(0,t.useState)(void 0),[u,d]=(0,t.useState)(!1),[p,f]=(0,t.useState)(125),[g,m]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[y,w]=(0,t.useState)(!1),[x,S]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const e=()=>{m(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]),(0,St.jsxs)("div",{className:"libro-fullscreen-wrapper",style:{minHeight:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",background:"transparent",boxSizing:"border-box",padding:0,overflow:"hidden"},children:[(0,St.jsx)("div",{className:"libro-controls-top",children:(0,St.jsx)(Dt,{currentPage:a,totalPages:o,onToggleThumbnails:()=>d(e=>!e),thumbnailsVisible:u,onZoomIn:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.zoomIn()},onZoomOut:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.zoomOut()},onZoomReset:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.zoomReset()},onFitWidth:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.fitWidth()},onFitHeight:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.fitHeight()},onFitAuto:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.fitAuto()},onPrevPage:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.prev()},onNextPage:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.next()},onGoToPage:e=>{var t;return null===(t=n.current)||void 0===t?void 0:t.goTo(e)},currentZoom:p,onZoomTo:e=>{var t,i;return null===(t=n.current)||void 0===t||null===(i=t.setZoom)||void 0===i?void 0:i.call(t,e)},onToggleFullscreen:()=>{var e,t;null===(e=n.current)||void 0===e||null===(t=e.toggleFullscreen)||void 0===t||t.call(e)},isFullscreen:g,onReadSelection:()=>{if(window.getSelection){const e=window.getSelection().toString();if(e){const t=new window.SpeechSynthesisUtterance(e);window.speechSynthesis.speak(t)}}}})}),(0,St.jsx)("div",{style:{flex:1,width:"100vw",height:"calc(100vh - 96px)",display:"flex",justifyContent:"center",alignItems:"center",minHeight:0,background:"#181a20"},children:(0,St.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},children:(0,St.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},children:(0,St.jsx)(Eb,{ref:n,fileUrl:"/pdfs/libro.pdf",onPageChange:e=>r(e),onReady:e=>{let{totalPages:t}=e;l(t),w(!0)},onInteractiveReady:()=>S(!0),thumbnailsVisible:u,onToggleThumbnails:()=>d(e=>!e),onZoomChange:e=>f(e),showControls:!1})})})}),(0,St.jsx)(Pb,{flipRef:n,totalPages:o,targetPage:c,didJump:v,setDidJump:b,pdfReady:y,flipReady:x})]})}function Pb(e){let{flipRef:n,totalPages:i,targetPage:s,didJump:a,setDidJump:r,pdfReady:o,flipReady:l}=e;return(0,t.useEffect)(()=>{if(a)return;if(!o||!l)return;if(!Number.isFinite(s)||s<=0)return;if(!i||i<=0)return;const e=Math.min(i,Math.max(1,s));let t=0;const c=setInterval(()=>{var i,s;t++;const a=null===(i=n.current)||void 0===i||null===(s=i.pageFlip)||void 0===s?void 0:s.call(i);a&&"function"===typeof a.flip?(a.flip(e-1),r(!0),clearInterval(c)):t>=20&&clearInterval(c)},100);return()=>clearInterval(c)},[a,n,i,s,r,o,l]),null}function Mb(e){let{children:t}=e;return(0,St.jsx)("div",{className:"libro-lpp-layout",children:t})}function Tb(){return(0,St.jsxs)("div",{style:{maxWidth:600,margin:"40px auto",background:"linear-gradient(135deg, #004AAD 80%, #004AAD 100%)",borderRadius:18,boxShadow:"0 4px 24px #004aad33",padding:0,overflow:"hidden",border:"2.5px solid #338dff44"},children:[(0,St.jsx)("div",{style:{background:"linear-gradient(90deg, #004AAD 60%, #004AAD 100%)",color:"#FF7F11",padding:"28px 0 18px 0",textAlign:"center",fontWeight:700,fontSize:28,letterSpacing:1.5},children:"Temas del Curso"}),(0,St.jsxs)("ol",{style:{fontSize:22,color:"#0B0C10",lineHeight:2.1,margin:0,padding:"32px 40px 32px 48px",background:"#fff",borderBottomLeftRadius:18,borderBottomRightRadius:18,boxShadow:"0 2px 8px #004aad11",textAlign:"center",listStylePosition:"inside"},children:[(0,St.jsx)("li",{children:"Conceptos"}),(0,St.jsx)("li",{children:"Ciclos"}),(0,St.jsx)("li",{children:"Funciones"}),(0,St.jsx)("li",{children:"Vectores"}),(0,St.jsx)("li",{children:"Matrices"}),(0,St.jsx)("li",{children:"Archivos"}),(0,St.jsx)("li",{children:"Registros"})]})]})}const Rb=[{nombre:"Conceptos",archivo:"Conceptos.png"},{nombre:"Ciclos",archivo:"ciclos.png"},{nombre:"Funciones",archivo:"funciones.png"},{nombre:"Vectores",archivo:"vectores.jpg"},{nombre:"Matrices",archivo:"matrices.jpg"},{nombre:"Archivos",archivo:"archivos.jpg"},{nombre:"Registros",archivo:"registros.jpg"}];function Nb(){const[e,i]=(0,t.useState)(0),s=(0,t.useRef)(null);return(0,t.useEffect)(()=>(s.current=setTimeout(()=>{i(e=>(e+1)%Rb.length)},3500),()=>clearTimeout(s.current)),[e]),(0,St.jsxs)("div",{style:{maxWidth:700,margin:"40px auto",background:"linear-gradient(135deg, #004AAD 80%, #ffb300 100%)",borderRadius:18,boxShadow:"0 4px 24px #004aad33",padding:0,overflow:"hidden",border:"2.5px solid #338dff44"},children:[(0,St.jsx)("div",{style:{background:"linear-gradient(90deg, #004AAD 60%, #ffb300 100%)",color:"#fff",padding:"28px 0 18px 0",textAlign:"center",fontWeight:700,fontSize:28,letterSpacing:1.5},children:"Galer\xeda de Temas"}),(0,St.jsxs)("div",{style:{background:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"32px 0 32px 0",borderBottomLeftRadius:18,borderBottomRightRadius:18,minHeight:420},children:[(0,St.jsx)("h3",{style:{color:"#004AAD",marginBottom:18,fontSize:24,fontWeight:600},children:Rb[e].nombre}),(0,St.jsx)("img",{src:n(428)("./".concat(Rb[e].archivo)),alt:Rb[e].nombre,style:{maxWidth:520,maxHeight:340,borderRadius:12,boxShadow:"0 2px 16px #004aad22",border:"2px solid #ffb300",background:"#eaeaea"}}),(0,St.jsx)("div",{style:{marginTop:24,display:"flex",gap:7,justifyContent:"center"},children:Rb.map((t,n)=>(0,St.jsx)("button",{onClick:()=>i(n),style:{width:10,height:10,borderRadius:"50%",border:"none",background:n===e?"#004AAD":"#ffb300",opacity:n===e?1:.5,cursor:"pointer",transition:"background 0.2s, opacity 0.2s"},"aria-label":t.nombre},t.nombre))})]})]})}const Lb=[{id:1,title:"Reto 01 \u2013 Suma de dos n\xfameros",level:"b\xe1sico",theme:"entrada/salida",description:"Escribe un algoritmo en LPP que pida al usuario dos n\xfameros enteros y muestre en pantalla la suma de ambos.",status:"completado",requirements:["Debe usar Lea para las entradas","Debe usar Escriba para la salida","Debe almacenar la suma en una variable llamada resultado"],examples:[{input:"3 5",output:"La suma es 8"},{input:"10 -4",output:"La suma es 6"}],hints:["Recuerda declarar las variables antes de Inicio","Las instrucciones del programa principal deben ir entre Inicio y Fin","Usa el operador <- para asignar valores a las variables"],initialCode:"Entero a, b, resultado\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:3},{id:2,title:"Reto 02 \u2013 N\xfamero par o impar",level:"b\xe1sico",theme:"condicionales",description:"Crea un algoritmo que lea un n\xfamero entero y determine si es par o impar.",status:"en progreso",requirements:["Debe usar una estructura condicional Si...Entonces...Fin Si","Debe usar el operador mod para verificar el residuo de dividir entre 2",'Debe mostrar exactamente "El n\xfamero es par" o "El n\xfamero es impar" usando Escriba'],examples:[{input:"4",output:"El n\xfamero es par"},{input:"7",output:"El n\xfamero es impar"}],hints:["Un n\xfamero es par si (numero mod 2) = 0","Puedes usar: Si (numero mod 2 = 0) Entonces ... Sino ... Fin Si","Aseg\xfarate de que la condici\xf3n sea booleana"],initialCode:"Entero numero\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:2},{id:3,title:"Reto 03 \u2013 Mayor de tres n\xfameros",level:"b\xe1sico",theme:"condicionales",description:"Escribe un algoritmo que lea tres n\xfameros y muestre cu\xe1l es el mayor.",status:"en progreso",requirements:["Debe leer exactamente tres n\xfameros con Lea","Debe usar condicionales anidadas o una variable auxiliar para guardar el mayor","Debe mostrar el mayor de los tres con Escriba"],examples:[{input:"5 8 3",output:"El mayor es 8"},{input:"15 12 20",output:"El mayor es 20"}],hints:["Compara primero dos n\xfameros y guarda el mayor en una variable","Luego compara ese resultado con el tercer n\xfamero","Puedes usar Si...Entonces anidados"],initialCode:"Entero a, b, c, mayor\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:1},{id:4,title:"Reto 04 \u2013 Promedio de calificaciones",level:"b\xe1sico",theme:"entrada/salida",description:"Crea un algoritmo que calcule el promedio de tres calificaciones.",status:"completado",requirements:["Debe leer tres calificaciones usando Lea","Debe calcular el promedio correctamente como un valor real","Debe mostrar el resultado con un mensaje claro usando Escriba"],examples:[{input:"8 9 7",output:"El promedio es 8.00"},{input:"10 6 9",output:"El promedio es 8.33"}],hints:["El promedio se calcula sumando los valores y dividiendo entre la cantidad","Usa variables tipo Real para mantener los decimales","La f\xf3rmula puede ser: promedio <- (cal1 + cal2 + cal3) / 3"],initialCode:"Real cal1, cal2, cal3, promedio\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:1},{id:5,title:"Reto 05 \u2013 Tabla de multiplicar",level:"intermedio",theme:"ciclos",description:"Escribe un algoritmo que muestre la tabla de multiplicar de un n\xfamero del 1 al 10.",status:"pendiente",requirements:["Debe usar un ciclo Para","Debe leer el n\xfamero del cual mostrar la tabla usando Lea","Debe mostrar 10 l\xedneas con el formato: n x i = resultado"],examples:[{input:"5",output:"5 x 1 = 5\\n5 x 2 = 10\\n...\\n5 x 10 = 50"}],hints:["Usa un ciclo Para que vaya de 1 hasta 10","En cada iteraci\xf3n, multiplica el n\xfamero por el contador","Usa Escriba para mostrar cada l\xednea de la tabla"],initialCode:"Entero numero, i, resultado\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:0},{id:6,title:"Reto 06 \u2013 Suma de n\xfameros pares",level:"intermedio",theme:"ciclos",description:"Crea un algoritmo que sume todos los n\xfameros pares del 1 al 100.",status:"pendiente",requirements:["Debe usar un ciclo (Puede ser Para o Mientras)","Debe identificar los n\xfameros pares usando mod 2","Debe acumular la suma correctamente en una variable"],examples:[{input:"",output:"La suma de los pares del 1 al 100 es 2550"}],hints:["Usa un ciclo Para desde 1 hasta 100","Dentro del ciclo verifica: Si (i mod 2 = 0) Entonces...","Si es par, suma el valor de i en la variable acumuladora"],initialCode:"Entero i, suma\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:0},{id:7,title:"Reto 07 \u2013 Contador descendente",level:"b\xe1sico",theme:"ciclos",description:"Escribe un algoritmo que cuente de 10 a 1 de forma descendente.",status:"completado",requirements:["Debe usar un ciclo","Debe contar desde 10 hasta 1 de forma descendente","Debe mostrar cada n\xfamero en una l\xednea usando Escriba"],examples:[{input:"",output:"10\\n9\\n8\\n7\\n6\\n5\\n4\\n3\\n2\\n1"}],hints:["Usa un ciclo Para con contador descendente","La sintaxis puede ser: Para i <- 10 Hasta 1 Haga Con Paso -1","En cada iteraci\xf3n, muestra el valor de i"],initialCode:"Entero i\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:2},{id:8,title:"Reto 08 \u2013 Validar contrase\xf1a",level:"intermedio",theme:"condicionales",description:'Crea un algoritmo que valide si una contrase\xf1a ingresada es correcta (la contrase\xf1a v\xe1lida es "LPP2024").',status:"pendiente",requirements:["Debe leer una contrase\xf1a del usuario usando Lea",'Debe compararla con el valor fijo "LPP2024"','Debe mostrar "Acceso concedido" o "Acceso denegado"'],examples:[{input:"LPP2024",output:"Acceso concedido"},{input:"abc123",output:"Acceso denegado"}],hints:["Usa una variable tipo Cadena para la contrase\xf1a","Compara con el operador =","Usa una estructura Si...Entonces...Sino...Fin Si"],initialCode:"Cadena password\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:0},{id:9,title:"Reto 09 \u2013 Calculadora b\xe1sica",level:"intermedio",theme:"condicionales",description:"Escribe un algoritmo que funcione como calculadora simple (+, -, *, /).",status:"pendiente",requirements:["Debe leer dos n\xfameros reales y la operaci\xf3n a realizar","Debe realizar la operaci\xf3n correcta seg\xfan el s\xedmbolo (+, -, *, /)","Debe manejar los cuatro operadores b\xe1sicos y mostrar el resultado con Escriba"],examples:[{input:"5 + 3",output:"Resultado: 8"},{input:"10 / 2",output:"Resultado: 5"}],hints:["Usa una variable tipo Cadena para el operador","Puedes usar una estructura Caso seg\xfan el operador","Recuerda verificar que el divisor no sea 0 en la divisi\xf3n"],initialCode:"Real num1, num2, resultado\nCadena operador\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:0},{id:10,title:"Reto 10 \u2013 N\xfameros primos",level:"avanzado",theme:"ciclos",description:"Crea un algoritmo que determine si un n\xfamero entero positivo es primo.",status:"pendiente",requirements:["Debe leer un n\xfamero entero positivo","Debe verificar si el n\xfamero es divisible solo por 1 y por s\xed mismo",'Debe mostrar "Es primo" o "No es primo" seg\xfan el resultado'],examples:[{input:"7",output:"Es primo"},{input:"8",output:"No es primo"}],hints:["Un n\xfamero primo solo es divisible por 1 y por s\xed mismo","Usa un ciclo para buscar divisores desde 2 hasta numero - 1","Si encuentras un divisor, puedes marcar una bandera y detener el ciclo"],initialCode:"Entero numero, i, contador\nInicio\n  /* Escribe aqu\xed tu soluci\xf3n */\nFin",attempts:0}];function Db(e){let{challenge:t,onSelect:n}=e;return(0,St.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:(0,St.jsxs)("div",{className:"space-y-4",children:[(0,St.jsxs)("div",{className:"flex items-start justify-between",children:[(0,St.jsx)("h3",{className:"text-black pr-4 font-semibold",children:t.title}),(()=>{switch(t.status){case"completado":return(0,St.jsx)("span",{className:"text-green-500 text-lg",children:"\u2705"});case"en progreso":return(0,St.jsx)("span",{className:"text-yellow-500 text-lg",children:"\u23f3"});default:return(0,St.jsx)("span",{className:"text-slate-300 text-lg",children:"\u25cb"})}})()]}),(0,St.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,St.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(e=>{switch(e){case"b\xe1sico":return"bg-green-100 text-black";case"intermedio":return"bg-yellow-100 text-black";case"avanzado":return"bg-red-100 text-black";default:return"bg-slate-100 text-black"}})(t.level),children:t.level.charAt(0).toUpperCase()+t.level.slice(1)}),(0,St.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(e=>{switch(e){case"entrada/salida":return"bg-blue-100 text-black";case"condicionales":return"bg-purple-100 text-black";case"ciclos":return"bg-pink-100 text-black";case"arreglos":return"bg-orange-100 text-black";default:return"bg-slate-100 text-black"}})(t.theme),children:t.theme.charAt(0).toUpperCase()+t.theme.slice(1)})]}),(0,St.jsx)("p",{className:"text-black text-sm line-clamp-2",children:t.description}),(0,St.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,St.jsx)("span",{className:"text-sm text-black",children:(()=>{switch(t.status){case"completado":return"Completado";case"en progreso":return"En progreso";default:return"Pendiente"}})()}),(0,St.jsx)("button",{onClick:n,className:"inline-flex items-center px-3 py-1.5 rounded-md text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"Resolver"})]})]})})}function Ib(e){let{completedCount:t,totalCount:n,progressPercentage:i}=e;const s=Lb.filter(e=>"b\xe1sico"===e.level),a=s.filter(e=>"completado"===e.status).length,r=Lb.filter(e=>"condicionales"===e.theme),o=r.filter(e=>"completado"===e.status).length,l=Lb.filter(e=>"ciclos"===e.theme),c=l.filter(e=>"completado"===e.status).length,h=Math.max(0,Math.min(100,i||0));return(0,St.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 space-y-4",children:[(0,St.jsx)("h3",{className:"text-black font-semibold",children:"Tu progreso"}),(0,St.jsxs)("div",{className:"space-y-2",children:[(0,St.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,St.jsx)("span",{className:"text-black",children:"Progreso general"}),(0,St.jsxs)("span",{className:"text-black font-medium",children:[h,"%"]})]}),(0,St.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,St.jsx)("div",{className:"h-2 bg-blue-600 rounded-full transition-all",style:{width:"".concat(h,"%")}})}),(0,St.jsxs)("p",{className:"text-xs text-black",children:[t," de ",n," retos completados"]})]}),(0,St.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,St.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,St.jsx)("span",{className:"text-green-500 text-lg flex-shrink-0",children:"\u2705"}),(0,St.jsx)("span",{className:"text-black",children:"Retos b\xe1sicos"}),(0,St.jsxs)("span",{className:"ml-auto text-black",children:[a,"/",s.length]})]}),(0,St.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,St.jsx)("span",{className:"text-yellow-500 text-lg flex-shrink-0",children:"\ud83e\udde9"}),(0,St.jsx)("span",{className:"text-black",children:"Condicionales"}),(0,St.jsxs)("span",{className:"ml-auto text-black",children:[o,"/",r.length]})]}),(0,St.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,St.jsx)("span",{className:"text-black text-lg flex-shrink-0",children:"\ud83d\udd01"}),(0,St.jsx)("span",{className:"text-black",children:"Ciclos"}),(0,St.jsxs)("span",{className:"ml-auto text-black",children:[c,"/",l.length]})]})]})]})}function Fb(e){let{onSelectChallenge:n}=e;const[i,s]=(0,t.useState)("todos"),[a,r]=(0,t.useState)("todos"),[o,l]=(0,t.useState)("todos"),c=Lb.filter(e=>("todos"===i||e.level===i)&&(("todos"===a||e.theme===a)&&("todos"===o||e.status===o))),h=Lb.filter(e=>"completado"===e.status).length,u=Lb.length,d=Math.round(h/u*100);return(0,St.jsxs)("div",{className:"min-h-screen",children:[(0,St.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,St.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,St.jsxs)("div",{className:"flex items-center justify-between",children:[(0,St.jsx)("div",{className:"flex items-center gap-4",children:(0,St.jsxs)("div",{className:"flex items-center gap-2",children:[(0,St.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,St.jsx)("span",{className:"text-2xl text-white",children:"\ud83d\udcd8"})}),(0,St.jsxs)("div",{children:[(0,St.jsx)("h1",{className:"text-black font-semibold",children:"Retos de Algoritmos en LPP"}),(0,St.jsx)("p",{className:"text-black text-sm",children:"Lenguaje de Programaci\xf3n para Principiantes"})]})]})}),(0,St.jsx)("div",{className:"flex items-center gap-4",children:(0,St.jsxs)("div",{className:"text-right",children:[(0,St.jsx)("p",{className:"text-black text-sm",children:"Progreso"}),(0,St.jsxs)("p",{className:"text-black font-medium",children:[h,"/",u," retos completados"]})]})})]})})}),(0,St.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,St.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,St.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,St.jsx)(Ib,{completedCount:h,totalCount:u,progressPercentage:d}),(0,St.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 space-y-4",children:[(0,St.jsx)("h3",{className:"text-black font-semibold",children:"Filtros"}),(0,St.jsxs)("div",{className:"space-y-2",children:[(0,St.jsx)("label",{className:"text-sm text-black",children:"Nivel"}),(0,St.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"w-full border rounded-md px-3 py-2 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,St.jsx)("option",{value:"todos",children:"Todos"}),(0,St.jsx)("option",{value:"b\xe1sico",children:"B\xe1sico"}),(0,St.jsx)("option",{value:"intermedio",children:"Intermedio"}),(0,St.jsx)("option",{value:"avanzado",children:"Avanzado"})]})]}),(0,St.jsxs)("div",{className:"space-y-2",children:[(0,St.jsx)("label",{className:"text-sm text-black",children:"Tema"}),(0,St.jsxs)("select",{value:a,onChange:e=>r(e.target.value),className:"w-full border rounded-md px-3 py-2 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,St.jsx)("option",{value:"todos",children:"Todos"}),(0,St.jsx)("option",{value:"entrada/salida",children:"Entrada/Salida"}),(0,St.jsx)("option",{value:"condicionales",children:"Condicionales"}),(0,St.jsx)("option",{value:"ciclos",children:"Ciclos"}),(0,St.jsx)("option",{value:"arreglos",children:"Arreglos"})]})]}),(0,St.jsxs)("div",{className:"space-y-2",children:[(0,St.jsx)("label",{className:"text-sm text-black",children:"Estado"}),(0,St.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full border rounded-md px-3 py-2 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,St.jsx)("option",{value:"todos",children:"Todos"}),(0,St.jsx)("option",{value:"pendiente",children:"Pendientes"}),(0,St.jsx)("option",{value:"en progreso",children:"En progreso"}),(0,St.jsx)("option",{value:"completado",children:"Completados"})]})]}),(0,St.jsx)("button",{onClick:()=>{s("todos"),r("todos"),l("todos")},className:"w-full inline-flex items-center justify-center px-3 py-2 rounded-md border text-sm font-medium text-white hover:bg-slate-50 transition-colors",children:"Limpiar filtros"})]})]}),(0,St.jsxs)("div",{className:"lg:col-span-3",children:[(0,St.jsx)("div",{className:"mb-4",children:(0,St.jsxs)("p",{className:"text-black text-sm",children:["Mostrando ",c.length," de ",u," retos"]})}),(0,St.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(e=>(0,St.jsx)(Db,{challenge:e,onSelect:()=>n(e)},e.id))}),0===c.length&&(0,St.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:(0,St.jsx)("p",{className:"text-black",children:"No se encontraron retos con los filtros seleccionados."})})]})]})})]})}function jb(e){var n,i,s,a,r;let{result:o}=e;const[l,c]=(0,t.useState)(!1),[h,u]=(0,t.useState)("resumen"),d=fe(),p=e=>"px-4 py-2 text-sm font-medium border-b-2 -mb-px transition-colors ".concat(h===e?"border-blue-600 text-blue-700 bg-white":"border-transparent text-black hover:text-black hover:bg-slate-100");return(0,St.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,St.jsx)("div",{className:"border-b bg-slate-50",children:(0,St.jsxs)("div",{className:"flex",children:[(0,St.jsx)("button",{type:"button",className:p("resumen"),onClick:()=>u("resumen"),children:"Resumen"}),(0,St.jsx)("button",{type:"button",className:p("errores"),onClick:()=>u("errores"),children:"Errores en tu c\xf3digo"}),(0,St.jsx)("button",{type:"button",className:p("corregido"),onClick:()=>u("corregido"),children:"C\xf3digo corregido"}),(0,St.jsx)("button",{type:"button",className:p("pruebas"),onClick:()=>u("pruebas"),children:"Pruebas ejecutadas"})]})}),"resumen"===h&&(0,St.jsxs)("div",{className:"p-6 space-y-6",children:[(0,St.jsxs)("div",{className:"flex items-start gap-4",children:[(0,St.jsx)("span",{className:"text-4xl flex-shrink-0",children:o.success?"\u2705":"\u274c"}),(0,St.jsxs)("div",{children:[(0,St.jsx)("h3",{className:"mb-2 font-semibold ".concat(o.success?"text-green-900":"text-red-900"),children:o.success?"\xa1Excelente trabajo!":"Tu c\xf3digo necesita algunas correcciones"}),(0,St.jsx)("p",{className:"text-black",children:o.message}),(null===o||void 0===o?void 0:o.reviewPage)&&(0,St.jsx)("div",{className:"mt-4",children:(0,St.jsx)("button",{type:"button",className:"inline-flex items-center px-3 py-1.5 rounded-md border text-sm font-medium text-black hover:bg-slate-50 transition-colors",onClick:()=>{const e=Number(o.reviewPage);Number.isFinite(e)&&e>0?d("/libro",{state:{targetPage:e}}):d("/libro")},children:"\ud83d\udcd6 Repasar tema"})})]})]}),!o.success&&"string"===typeof o.message&&(/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\u274C/.test(o.message)||/\u274C[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*Error:/i.test(o.message))&&(0,St.jsxs)("div",{className:"flex items-start gap-3 bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,St.jsx)("span",{className:"text-red-600 text-xl flex-shrink-0 mt-0.5",children:"\u26a0\ufe0f"}),(0,St.jsxs)("div",{children:[(0,St.jsx)("h4",{className:"text-red-900 mb-1 font-semibold",children:"Error al validar con IA"}),(0,St.jsx)("p",{className:"text-sm text-red-700 break-words",children:o.message}),(0,St.jsx)("p",{className:"text-sm text-black mt-2",children:"Reintenta en unos segundos. Si persiste, verifica tu conexi\xf3n a internet."})]})]}),(0,St.jsxs)("div",{className:"space-y-3",children:[(0,St.jsx)("h4",{className:"text-black font-semibold",children:"Verificaci\xf3n de requisitos:"}),null===(n=o.checks)||void 0===n?void 0:n.map((e,t)=>(0,St.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[(0,St.jsx)("span",{className:"text-lg flex-shrink-0",children:e.passed?"\u2705":"\u274c"}),(0,St.jsx)("span",{className:"text-black",children:e.label})]},t))]})]}),"errores"===h&&(0,St.jsx)("div",{className:"p-6 space-y-4",children:o.errors&&o.errors.length>0?(0,St.jsxs)(St.Fragment,{children:[(0,St.jsxs)("div",{className:"flex items-start gap-3 bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,St.jsx)("span",{className:"text-red-600 text-xl flex-shrink-0 mt-0.5",children:"\u26a0\ufe0f"}),(0,St.jsxs)("div",{children:[(0,St.jsxs)("h4",{className:"text-red-900 mb-1 font-semibold",children:["Se encontraron ",o.errors.length," problemas"]}),(0,St.jsx)("p",{className:"text-sm text-black",children:"Revisa los siguientes puntos y corrige tu c\xf3digo:"})]})]}),(0,St.jsx)("div",{className:"space-y-3",children:o.errors.map((e,t)=>(0,St.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 space-y-2",children:[(0,St.jsx)("div",{className:"flex items-center gap-2",children:(0,St.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-black rounded text-sm",children:["L\xednea ",e.line]})}),(0,St.jsx)("p",{className:"text-black",children:e.message})]},t))})]}):(0,St.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[(0,St.jsx)("span",{className:"text-4xl mb-3 block",children:"\u2705"}),(0,St.jsx)("h4",{className:"text-black mb-2 font-semibold",children:"\xa1No se encontraron errores!"}),(0,St.jsx)("p",{className:"text-black",children:"Tu c\xf3digo cumple con todos los requisitos del reto."})]})}),"corregido"===h&&(0,St.jsxs)("div",{className:"p-6 space-y-4",children:[(0,St.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,St.jsxs)("div",{children:[(0,St.jsx)("h4",{className:"text-black mb-1 font-semibold",children:"Versi\xf3n corregida de tu c\xf3digo"}),(0,St.jsx)("p",{className:"text-sm text-black",children:"Esta es una soluci\xf3n v\xe1lida generada por el validador"})]}),(0,St.jsxs)("button",{type:"button",onClick:()=>{null!==o&&void 0!==o&&o.correctedCode&&(navigator.clipboard.writeText(o.correctedCode),c(!0),setTimeout(()=>c(!1),2e3))},className:"inline-flex items-center px-3 py-1.5 rounded-md border text-sm font-medium text-black hover:bg-slate-50 transition-colors",children:[(0,St.jsx)("span",{className:"mr-2",children:l?"\u2705":"\ud83d\udccb"}),l?"Copiado":"Copiar c\xf3digo"]})]}),(0,St.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 overflow-x-auto",children:(0,St.jsx)("pre",{className:"text-sm text-white font-mono whitespace-pre",children:o.correctedCode})}),(0,St.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,St.jsxs)("p",{className:"text-sm text-black",children:["\ud83d\udca1 ",(0,St.jsx)("span",{className:"font-semibold",children:"Tip:"})," Analiza las diferencias entre tu c\xf3digo y esta soluci\xf3n para entender qu\xe9 necesita mejorarse."]})})]}),"pruebas"===h&&(0,St.jsxs)("div",{className:"p-6 space-y-4",children:[(0,St.jsxs)("div",{children:[(0,St.jsx)("h4",{className:"text-black mb-2 font-semibold",children:"Casos de prueba ejecutados"}),(0,St.jsxs)("p",{className:"text-sm text-black",children:["Tu c\xf3digo fue evaluado contra ",(null===(i=o.testCases)||void 0===i?void 0:i.length)||0," casos de prueba"]})]}),(0,St.jsx)("div",{className:"overflow-x-auto",children:(0,St.jsxs)("table",{className:"w-full border-collapse",children:[(0,St.jsx)("thead",{children:(0,St.jsxs)("tr",{className:"bg-slate-50 border-b",children:[(0,St.jsx)("th",{className:"text-left p-3 text-black text-sm",children:"Caso"}),(0,St.jsx)("th",{className:"text-left p-3 text-black text-sm",children:"Entrada"}),(0,St.jsx)("th",{className:"text-left p-3 text-black text-sm",children:"Salida esperada"}),(0,St.jsx)("th",{className:"text-left p-3 text-black text-sm",children:"Salida obtenida"}),(0,St.jsx)("th",{className:"text-left p-3 text-black text-sm",children:"Resultado"})]})}),(0,St.jsx)("tbody",{children:null===(s=o.testCases)||void 0===s?void 0:s.map((e,t)=>(0,St.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,St.jsx)("td",{className:"p-3 text-black text-sm",children:e.case}),(0,St.jsx)("td",{className:"p-3",children:(0,St.jsx)("code",{className:"text-sm bg-slate-100 px-2 py-1 rounded text-black",children:e.input||"(vac\xedo)"})}),(0,St.jsx)("td",{className:"p-3",children:(0,St.jsx)("code",{className:"text-sm bg-slate-100 px-2 py-1 rounded text-black",children:e.expectedOutput})}),(0,St.jsx)("td",{className:"p-3",children:(0,St.jsx)("code",{className:"text-sm px-2 py-1 rounded ".concat(e.passed?"bg-green-100 text-black":"bg-red-100 text-black"),children:e.actualOutput})}),(0,St.jsx)("td",{className:"p-3",children:(0,St.jsxs)("span",{className:"inline-flex items-center gap-1 text-sm ".concat((e.passed,"text-black")),children:[(0,St.jsx)("span",{children:e.passed?"\u2705":"\u274c"}),e.passed?"Pas\xf3":"Fall\xf3"]})})]},t))})]})}),(0,St.jsxs)("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg p-4",children:[(0,St.jsxs)("span",{className:"text-black text-sm",children:["Total de pruebas: ",(null===(a=o.testCases)||void 0===a?void 0:a.length)||0]}),(0,St.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,St.jsxs)("span",{className:"text-black",children:["\u2713 Pasadas: ",(null===(r=o.testCases)||void 0===r?void 0:r.filter(e=>e.passed).length)||0]}),(0,St.jsxs)("span",{className:"text-black",children:["\u2717 Fallidas:"," ",o.testCases?o.testCases.filter(e=>!e.passed).length:0]})]})]})]})]})}function Ob(e){let{challenge:n,onBack:i}=e;const[s,a]=(0,t.useState)(n.initialCode),[r,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[h,u]=(0,t.useState)(!1),[d,p]=(0,t.useState)(!1),[f,g]=(0,t.useState)(!1),[m,v]=(0,t.useState)(n.attempts||0),b=(0,t.useRef)(Date.now()),y=(0,t.useRef)(""),w=(0,t.useRef)(null),x="attempts:".concat(n.id),S="lastCode:".concat(n.id);(0,t.useEffect)(()=>{try{const e=parseInt(localStorage.getItem(x)||"NaN",10);isNaN(e)||v(e);const t=localStorage.getItem(S)||"";y.current=t}catch(e){}},[]);return(0,St.jsxs)("div",{className:"min-h-screen",children:[(0,St.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,St.jsx)("div",{className:"max-w-[1600px] mx-auto px-6 py-4",children:(0,St.jsxs)("div",{className:"flex items-center justify-between",children:[(0,St.jsxs)("div",{className:"flex items-center gap-4",children:[(0,St.jsxs)("button",{onClick:i,className:"inline-flex items-center px-3 py-1.5 rounded-md text-sm font-medium text-white hover:bg-slate-100 transition-colors",children:[(0,St.jsx)("span",{className:"mr-2",children:"\u2190"}),"Volver a los retos"]}),(0,St.jsx)("div",{className:"h-6 w-px bg-slate-200"}),(0,St.jsx)("h1",{className:"text-black font-semibold",children:n.title})]}),(0,St.jsxs)("div",{className:"flex items-center gap-4",children:[(0,St.jsxs)("div",{className:"flex gap-2",children:[(0,St.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(e=>{switch(e){case"b\xe1sico":return"bg-green-100 text-black";case"intermedio":return"bg-yellow-100 text-black";case"avanzado":return"bg-red-100 text-black";default:return"bg-slate-100 text-black"}})(n.level),children:n.level.charAt(0).toUpperCase()+n.level.slice(1)}),(0,St.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(e=>{switch(e){case"entrada/salida":return"bg-blue-100 text-black";case"condicionales":return"bg-purple-100 text-black";case"ciclos":return"bg-pink-100 text-black";case"arreglos":return"bg-orange-100 text-black";default:return"bg-slate-100 text-black"}})(n.theme),children:n.theme.charAt(0).toUpperCase()+n.theme.slice(1)})]}),(0,St.jsxs)("div",{className:"text-right",children:[(0,St.jsxs)("p",{className:"text-sm text-black",children:["Intentos: ",m]}),(0,St.jsxs)("p",{className:"text-sm text-black",children:["Estado:"," ",(0,St.jsx)("span",{className:"completado"===n.status?"text-green-600 font-medium":"text-black",children:"completado"===n.status?"Completado \u2713":"Pendiente"})]})]})]})]})})}),(0,St.jsxs)("div",{className:"max-w-[1600px] mx-auto px-6 py-8",children:[(0,St.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,St.jsx)("div",{className:"space-y-6",children:(0,St.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 space-y-6",children:[(0,St.jsxs)("div",{children:[(0,St.jsx)("h2",{className:"text-black mb-3 font-semibold",children:"Descripci\xf3n del reto"}),(0,St.jsx)("p",{className:"text-black",children:n.description})]}),(0,St.jsxs)("div",{children:[(0,St.jsx)("h3",{className:"text-black mb-3 font-semibold",children:"Requisitos"}),(0,St.jsx)("ul",{className:"space-y-2",children:n.requirements.map((e,t)=>(0,St.jsxs)("li",{className:"flex items-start gap-2 text-black",children:[(0,St.jsx)("span",{className:"text-blue-600 mt-1",children:"\u2022"}),(0,St.jsx)("span",{children:e})]},t))})]}),(0,St.jsxs)("div",{children:[(0,St.jsx)("h3",{className:"text-black mb-3 font-semibold",children:"Ejemplo de entrada/salida"}),(0,St.jsx)("div",{className:"space-y-3",children:n.examples.map((e,t)=>(0,St.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[e.input&&(0,St.jsxs)("div",{children:[(0,St.jsx)("p",{className:"text-sm text-black",children:"Entrada:"}),(0,St.jsx)("code",{className:"text-sm text-black",children:e.input})]}),(0,St.jsxs)("div",{children:[(0,St.jsx)("p",{className:"text-sm text-black",children:"Salida:"}),(0,St.jsx)("code",{className:"text-sm text-black whitespace-pre-line",children:e.output})]})]},t))})]}),(0,St.jsxs)("div",{children:[(0,St.jsxs)("button",{onClick:()=>u(!h),className:"w-full inline-flex items-center justify-center px-3 py-2 rounded-md border text-sm font-medium text-white bg-white hover:bg-slate-50 transition-colors",children:[(0,St.jsx)("span",{className:"mr-2",children:"\ud83d\udca1"}),h?"Ocultar pistas":"Ver pistas"]}),h&&(0,St.jsx)("div",{className:"mt-4 space-y-2",children:n.hints.map((e,t)=>(0,St.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,St.jsxs)("p",{className:"text-sm text-black",children:[(0,St.jsxs)("span",{className:"font-semibold",children:["Pista ",t+1,":"]})," ",e]})},t))})]}),(0,St.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,St.jsx)("h4",{className:"text-blue-900 mb-2 font-semibold",children:"\ud83d\udcdd Notas sobre LPP"}),(0,St.jsxs)("ul",{className:"text-sm text-black space-y-1",children:[(0,St.jsx)("li",{children:"\u2022 Primero declara las variables y luego escribe el bloque principal."}),(0,St.jsxs)("li",{children:["\u2022 El programa principal se delimita con ",(0,St.jsx)("strong",{children:"Inicio"})," y ",(0,St.jsx)("strong",{children:"Fin"}),"."]}),(0,St.jsxs)("li",{children:["\u2022 Usa ",(0,St.jsx)("strong",{children:"Lea"})," para entrada de datos y ",(0,St.jsx)("strong",{children:"Escriba"})," para salida."]}),(0,St.jsxs)("li",{children:["\u2022 El operador de asignaci\xf3n es ",(0,St.jsx)("strong",{children:"<-"}),"."]})]})]})]})}),(0,St.jsx)("div",{className:"space-y-4",children:(0,St.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,St.jsxs)("div",{className:"bg-slate-50 border-b px-4 py-3 flex items-center justify-between",children:[(0,St.jsxs)("div",{className:"flex items-center gap-3",children:[(0,St.jsx)("span",{className:"text-sm text-black",children:"Lenguaje:"}),(0,St.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border border-slate-300 text-black",children:"LPP (pseudoc\xf3digo)"})]}),(0,St.jsxs)("button",{onClick:()=>{a(n.initialCode),o(null)},className:"inline-flex items-center px-3 py-1.5 rounded-md text-sm font-medium text-white hover:bg-slate-100 border border-transparent hover:border-slate-200 transition-colors",children:[(0,St.jsx)("span",{className:"mr-2",children:"\u27f3"}),"Reiniciar c\xf3digo"]})]}),(0,St.jsx)("div",{className:"p-4",children:(0,St.jsx)("textarea",{ref:w,value:s,onChange:e=>a(e.target.value),onKeyDown:e=>{if("Tab"!==e.key)return;e.preventDefault();const t=e.target,n=t.selectionStart,i=t.selectionEnd,r=s||"",o=(e,n)=>{setTimeout(()=>{try{t.selectionStart=e,t.selectionEnd=n}catch(i){}},0)};if(n!==i){const t=r.slice(0,n),s=r.slice(n,i),l=r.slice(i),c=s.split("\n");if(e.shiftKey){let e=0;const s=c.map(t=>{if(t.startsWith("\t"))return e+=1,t.slice(1);const n=t.match(/^ {1,4}/);return n?(e+=n[0].length,t.slice(n[0].length)):t}).join("\n");a(t+s+l),o(n,Math.max(n,i-e))}else{const e=c.map(e=>"\t"+e).join("\n"),s=c.length;a(t+e+l),o(n+1,i+s)}}else{const t=r.slice(0,n),s=r.slice(i);if(e.shiftKey){const e=t.lastIndexOf("\n")+1;let i=0,r=t;if("\t"===t[e])r=t.slice(0,e)+t.slice(e+1),i=1;else{const n=t.slice(e).match(/^ {1,4}/);n&&(r=t.slice(0,e)+t.slice(e+n[0].length),i=n[0].length)}a(r+s);const l=Math.max(n-i,e);o(l,l)}else{const e="\t";a(t+e+s);const i=n+e.length;o(i,i)}}},className:"w-full h-[400px] font-mono text-sm bg-slate-900 text-slate-100 p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",spellCheck:!1})}),(0,St.jsxs)("div",{className:"bg-slate-50 border-t px-4 py-3 flex items-center justify-between",children:[(0,St.jsxs)("div",{className:"text-sm text-black",children:[l&&(0,St.jsxs)("span",{className:"flex items-center gap-2",children:[(0,St.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Validando con DeepSeek..."]}),r&&!l&&(0,St.jsx)("span",{className:r.success?"text-green-600":"text-red-600",children:r.success?"\u2713 Validaci\xf3n exitosa":"\u2717 Se encontraron errores"})]}),(0,St.jsx)("button",{onClick:async()=>{c(!0);try{const n=await async function(e){return(await fetch("http://localhost:8000/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})})).json()}(s),i=(e=>{if(!e)return{success:!1,message:"No se recibi\xf3 respuesta del validador de IA.",checks:[],errors:[],correctedCode:"",testCases:[]};let t="";const n=e.match(/---CODIGO_CORREGIDO---([\s\S]*?)---FIN_CODIGO_CORREGIDO---/);n&&(t=n[1].trim());let i=[];const s=e.match(/---CHECKS---([\s\S]*?)---FIN_CHECKS---/);if(s){const e=s[1].trim();try{const t=JSON.parse(e);Array.isArray(t)&&(i=t)}catch(Bb){i=[]}}let a=[];const r=e.match(/---TESTS---([\s\S]*?)---FIN_TESTS---/);if(r){const e=r[1].trim();try{const t=JSON.parse(e);Array.isArray(t)&&(a=t)}catch(Bb){a=[]}}let o=e.replace(/---CODIGO_CORREGIDO---[\s\S]*?---FIN_CODIGO_CORREGIDO---/g,"").replace(/---CHECKS---[\s\S]*?---FIN_CHECKS---/g,"").replace(/---TESTS---[\s\S]*?---FIN_TESTS---/g,"").trim();const l=o.split("\n"),c=l[0]||"Errores detectados en tu c\xf3digo.",h=[];l.slice(1).forEach(e=>{const t=e.trim();if(!t.startsWith("- L\xednea"))return;const n=t.match(/- L\xednea\s+(\d+):\s*(.+?)(?:\.?\s+Correcci\xf3n:\s*(.+))?$/);if(n){const[,e,t,i]=n;h.push({line:Number(e),message:t+(i?" Correcci\xf3n sugerida: ".concat(i):"")})}});const u=/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\u274C/.test(e)||/\u274C[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*Error:/.test(e),d=/^Errores encontrados\s*\(/.test(o),p=o.startsWith("C\xf3digo correcto"),f=Array.isArray(i)&&i.some(e=>e&&!1===e.passed),g=Array.isArray(i)&&i.some(e=>e&&!0===e.passed),m=Array.isArray(a)&&a.some(e=>e&&!1===e.passed),v=Array.isArray(a)&&a.some(e=>e&&!0===e.passed);let b=!1;return b=!u&&!d&&!(h.length>0)&&!(Array.isArray(i)&&i.length>0&&f)&&!(Array.isArray(a)&&a.length>0&&m)&&(!!p||!!(Array.isArray(i)&&i.length>0&&!f&&g)||!!(Array.isArray(a)&&a.length>0&&!m&&v)),{success:b,message:p?o:c,checks:i,errors:h,correctedCode:t,testCases:a}})(n.feedback);o(i);const a=(e=>{if(!e)return"";let t=String(e).replace(/\/\*[\s\S]*?\*\//g,"").replace(/[\u2190\u2B05\u27F5]/g,"<-").toLowerCase();return t=t.replace(/\s+/g," ").trim(),t})(s),r=a!==(y.current||"");try{localStorage.setItem(S,a),y.current=a}catch(e){}const l=Math.floor((Date.now()-b.current)/6e4);if(!i.success&&r){const e=(m||0)+1;v(e);try{localStorage.setItem(x,String(e))}catch(t){}e>=8||l>=25?p(!0):e>=4&&g(!0)}const c=(!i.errors||0===i.errors.length)&&(!i.checks||0===i.checks.length)&&(!i.correctedCode||""===i.correctedCode.trim())&&(!i.testCases||0===i.testCases.length),h=!i.message||""===i.message.trim()||/No comprendo/i.test(i.message)||/No entiendo/i.test(i.message)||/No se recibi\xf3 respuesta/i.test(i.message);c&&h&&p(!0)}catch(n){o({success:!1,message:"No se pudo conectar con el validador de IA.",checks:[],errors:[{line:1,message:String(n)}],correctedCode:"",testCases:[]}),p(!0)}finally{c(!1)}},disabled:l,className:"inline-flex items-center px-4 py-2 rounded-md text-sm font-medium text-white transition-colors ".concat(l?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700"),children:l?"Validando...":"Validar soluci\xf3n"})]})]})})]}),r&&(0,St.jsx)(jb,{result:r}),d&&(0,St.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,St.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border max-w-lg w-full p-6",children:[(0,St.jsx)("h3",{className:"text-black mb-3 font-semibold",children:"Orientaci\xf3n sobre LPP"}),(0,St.jsx)("p",{className:"text-sm text-black mb-4",children:"Aun no tienes claridad con la sintaxis correcta de LPP, por lo tanto te enviaremos al Libro de Fundamentos de Programacion en LPP, para que hagas un repaso y refuerces tu conocimiento."}),(0,St.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,St.jsx)("button",{type:"button",className:"px-3 py-1.5 rounded-md border text-sm font-medium text-black hover:bg-slate-50",onClick:()=>{p(!1);try{window.location.reload()}catch(e){}},children:"Rechazar"}),(0,St.jsx)("a",{href:"/libro?page=15",className:"px-4 py-2 rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",onClick:()=>p(!1),children:"Aceptar"})]})]})}),f&&(0,St.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-40",children:(0,St.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border max-w-lg w-full p-6",children:[(0,St.jsx)("h3",{className:"text-black mb-3 font-semibold",children:"\xbfTe ayudo a destrabar este reto?"}),(0,St.jsx)("p",{className:"text-sm text-black mb-4",children:"Has intentado este ejercicio varias veces. Eso est\xe1 muy bien, as\xed se aprende. \xbfPrefieres ver una pista o repasar r\xe1pidamente el tema?"}),(0,St.jsxs)("div",{className:"flex items-center justify-end gap-3 flex-wrap",children:[(0,St.jsx)("button",{type:"button",className:"px-3 py-1.5 rounded-md border text-sm font-medium text-black hover:bg-slate-50",onClick:()=>{g(!1),u(!0)},children:"Ver una pista"}),(0,St.jsx)("a",{href:"/libro?page=15",className:"px-3 py-1.5 rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",onClick:()=>g(!1),children:"Repasar el tema"}),(0,St.jsx)("button",{type:"button",className:"px-3 py-1.5 rounded-md border text-sm font-medium text-black hover:bg-slate-50",onClick:()=>g(!1),children:"Seguir intentando"})]})]})})]})]})}function Wb(){const[e,n]=(0,t.useState)("list"),[i,s]=(0,t.useState)(null);return(0,St.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:"list"===e?(0,St.jsx)(Fb,{onSelectChallenge:e=>{s(e),n("detail")}}):i&&(0,St.jsx)(Ob,{challenge:i,onBack:()=>{n("list"),s(null)}})})}function zb(){const e=!!localStorage.getItem("token"),[n,i]=t.useState(1),s=(0,St.jsx)("div",{children:[1,2,3,4,5,6].map(e=>(0,St.jsxs)("button",{className:"libro-lpp-chapter-btn"+(n===e?" active":""),onClick:()=>i(e),children:["Cap\xedtulo ",e]},e))});return(0,St.jsxs)(dt,{children:[(0,St.jsx)(Mt,{onLoginClick:()=>{window.location.href="/login"}}),(0,St.jsxs)("div",{style:{position:"relative",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,St.jsx)("div",{style:{flex:1},children:(0,St.jsxs)(Le,{children:[(0,St.jsx)(Re,{path:"/",element:(0,St.jsx)(Lt,{})}),(0,St.jsx)(Re,{path:"/temas",element:(0,St.jsx)(Tb,{})}),(0,St.jsx)(Re,{path:"/galeria",element:(0,St.jsx)(Nb,{})}),(0,St.jsx)(Re,{path:"/libro",element:e?(0,St.jsx)(Mb,{chapterControls:s,children:(0,St.jsx)(Cb,{})}):(0,St.jsx)(Lt,{})}),(0,St.jsx)(Re,{path:"/retos",element:e?(0,St.jsx)(Mb,{children:(0,St.jsx)(Wb,{})}):(0,St.jsx)(Lt,{})})]})}),(0,St.jsx)(Tt,{})]})]})}i.createRoot(document.getElementById("root")).render((0,St.jsx)(zb,{}))})()})();
//# sourceMappingURL=main.1fa96c9e.js.map